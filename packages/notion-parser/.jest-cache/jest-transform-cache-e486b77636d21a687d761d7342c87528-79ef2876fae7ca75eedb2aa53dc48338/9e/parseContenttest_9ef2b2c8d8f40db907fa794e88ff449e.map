{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\integration\\parseContent.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\integration\\parseContent.test.ts"],"sourcesContent":["/**\r\n * Tests d'intÃ©gration pour parseContent\r\n * Tests end-to-end du flux complet de parsing\r\n */\r\n\r\nimport { parseContent } from '../../src/parseContent';\r\n\r\ndescribe('parseContent Integration Tests', () => {\r\n  describe('End-to-End Parsing Flow', () => {\r\n    it('should parse markdown document completely', () => {\r\n      const markdown = `# Main Title\r\n\r\nThis is a paragraph with **bold** and *italic* text.\r\n\r\n## Subsection\r\n\r\n- List item 1\r\n- List item 2 with [link](https://example.com)\r\n- List item 3\r\n\r\n### Code Example\r\n\r\n\\`\\`\\`javascript\r\nfunction hello() {\r\n  console.log(\"Hello World\");\r\n}\r\n\\`\\`\\`\r\n\r\n> This is a blockquote\r\n\r\n| Name | Age | City |\r\n|------|-----|------|\r\n| John | 30  | NYC  |\r\n| Jane | 25  | LA   |\r\n`;\r\n      \r\n      const result = parseContent(markdown, {\r\n        contentType: 'markdown',\r\n        includeMetadata: true\r\n      });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toBeDefined();\r\n      expect(result.blocks.length).toBeGreaterThan(5);\r\n      expect(result.metadata?.detectedType).toBe('markdown');\r\n      \r\n      // VÃ©rifier les types de blocs\r\n      const blockTypes = result.blocks.map(b => b.type);\r\n      expect(blockTypes).toContain('heading_1');\r\n      expect(blockTypes).toContain('heading_2');\r\n      expect(blockTypes).toContain('heading_3');\r\n      expect(blockTypes).toContain('paragraph');\r\n      expect(blockTypes).toContain('bulleted_list_item');\r\n      expect(blockTypes).toContain('code');\r\n      expect(blockTypes).toContain('quote');\r\n      expect(blockTypes).toContain('table');\r\n    });\r\n\r\n    it('should handle CSV data with headers', () => {\r\n      const csv = `Name,Age,City,Country\r\nJohn,30,Paris,France\r\nJane,25,London,UK\r\nBob,35,Berlin,Germany`;\r\n      \r\n      const result = parseContent(csv, {\r\n        contentType: 'csv',\r\n        includeMetadata: true\r\n      });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toHaveLength(1);\r\n      expect(result.blocks[0].type).toBe('table');\r\n      expect(result.metadata?.detectedType).toBe('csv');\r\n    });\r\n\r\n    it('should detect and parse code automatically', () => {\r\n      const code = `function complexFunction(param1, param2) {\r\n  const result = param1 + param2;\r\n  console.log(\\`Result: \\${result}\\`);\r\n  return result;\r\n}\r\n\r\n// Usage\r\nconst value = complexFunction(10, 20);`;\r\n      \r\n      const result = parseContent(code, {\r\n        includeMetadata: true\r\n      });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.metadata?.detectedType).toBe('code');\r\n      expect(result.blocks[0].type).toBe('code');\r\n    });\r\n\r\n    it('should handle mixed content with auto-detection', () => {\r\n      const mixedContent = `# Documentation\r\n\r\nHere's some code:\r\n\r\n\\`\\`\\`python\r\ndef hello():\r\n    print(\"Hello World\")\r\n\\`\\`\\`\r\n\r\nAnd here's a table:\r\n\r\n| Feature | Status |\r\n|---------|--------|\r\n| Parser  | âœ… Done |\r\n| Tests   | ðŸ”„ WIP |`;\r\n      \r\n      const result = parseContent(mixedContent);\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(3);\r\n      \r\n      const blockTypes = result.blocks.map(b => b.type);\r\n      expect(blockTypes).toContain('heading_1');\r\n      expect(blockTypes).toContain('paragraph');\r\n      expect(blockTypes).toContain('code');\r\n      expect(blockTypes).toContain('table');\r\n    });\r\n  });\r\n\r\n  describe('Error Handling Integration', () => {\r\n    it('should handle malformed content gracefully', () => {\r\n      const malformed = `# Unclosed header\r\n**Unclosed bold\r\n[Unclosed link(https://example.com\r\n| Malformed | table\r\n|-----------|\r\n| Missing | cell`;\r\n      \r\n      const result = parseContent(malformed, {\r\n        errorHandling: { onError: 'return' }\r\n      });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toBeDefined();\r\n    });\r\n\r\n    it('should handle empty and null inputs', () => {\r\n      const emptyResult = parseContent('');\r\n      expect(emptyResult.success).toBe(true);\r\n      expect(emptyResult.blocks).toEqual([]);\r\n      \r\n      const nullResult = parseContent(null as any);\r\n      expect(nullResult.success).toBe(true);\r\n      expect(nullResult.blocks).toEqual([]);\r\n      \r\n      const undefinedResult = parseContent(undefined as any);\r\n      expect(undefinedResult.success).toBe(true);\r\n      expect(undefinedResult.blocks).toEqual([]);\r\n    });\r\n  });\r\n\r\n  describe('Options Integration', () => {\r\n    it('should respect all parsing options together', () => {\r\n      const content = `# Test Document\r\n\r\nThis has **formatting** and [links](https://example.com).\r\n\r\n\\`\\`\\`javascript\r\nconsole.log(\"code\");\r\n\\`\\`\\``;\r\n      \r\n      const result = parseContent(content, {\r\n        contentType: 'markdown',\r\n        includeMetadata: true,\r\n        includeValidation: true,\r\n        conversion: {\r\n          preserveFormatting: true,\r\n          convertLinks: true,\r\n          convertCode: true\r\n        },\r\n        detection: {\r\n          enableCodeDetection: true,\r\n          enableMarkdownDetection: true\r\n        }\r\n      });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.metadata).toBeDefined();\r\n      expect(result.validation).toBeDefined();\r\n      expect(result.blocks.length).toBeGreaterThan(2);\r\n    });\r\n  });\r\n\r\n  describe('Performance Integration', () => {\r\n    it('should handle large content efficiently', () => {\r\n      const largeContent = Array(100).fill(`# Section\r\nContent with **formatting** and [links](https://example.com).\r\n\r\n- List item 1\r\n- List item 2\r\n\r\n\\`\\`\\`javascript\r\nfunction test() { return true; }\r\n\\`\\`\\``).join('\\n\\n');\r\n      \r\n      const startTime = Date.now();\r\n      const result = parseContent(largeContent, {\r\n        contentType: 'markdown'\r\n      });\r\n      const endTime = Date.now();\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(100);\r\n      expect(endTime - startTime).toBeLessThan(5000); // 5 seconds max\r\n    });\r\n  });\r\n});"],"version":3}