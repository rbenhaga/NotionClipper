{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\detectors\\ContentDetector.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\detectors\\ContentDetector.test.ts"],"sourcesContent":["/**\r\n * Tests unitaires pour ContentDetector - Conformes au Cahier des Charges v2.1\r\n * Couvre toutes les fonctionnalitÃ©s de dÃ©tection automatique avec validation stricte\r\n */\r\n\r\nimport { ContentDetector } from '../../../src/detectors/ContentDetector';\r\nimport type { DetectionOptions } from '../../../src/types';\r\n\r\ndescribe('ContentDetector - Cahier des Charges v2.1', () => {\r\n  let detector: ContentDetector;\r\n\r\n  beforeEach(() => {\r\n    detector = new ContentDetector();\r\n  });\r\n\r\n  describe('URL Detection', () => {\r\n    it('should detect HTTP URLs', () => {\r\n      const result = detector.detect('http://example.com');\r\n      expect(result.type).toBe('url');\r\n      expect(result.confidence).toBe(1.0);\r\n    });\r\n\r\n    it('should detect HTTPS URLs', () => {\r\n      const result = detector.detect('https://www.example.com/path?param=value');\r\n      expect(result.type).toBe('url');\r\n      expect(result.confidence).toBe(1.0);\r\n    });\r\n\r\n    it('should not detect malformed URLs', () => {\r\n      const result = detector.detect('htp://malformed.com');\r\n      expect(result.type).not.toBe('url');\r\n    });\r\n  });\r\n\r\n  describe('Code Detection', () => {\r\n    it('should detect JavaScript code', () => {\r\n      const code = 'function test() { console.log(\"hello\"); }';\r\n      const result = detector.detect(code);\r\n      expect(result.type).toBe('code');\r\n      expect(result.confidence).toBeGreaterThan(0.7);\r\n    });\r\n\r\n    it('should detect Python code', () => {\r\n      const code = 'def hello():\\n    print(\"Hello World\")';\r\n      const result = detector.detect(code);\r\n      expect(result.type).toBe('code');\r\n      expect(result.confidence).toBeGreaterThan(0.7);\r\n    });\r\n\r\n    it('should detect code with high confidence for complex functions', () => {\r\n      const code = `\r\n        class MyClass {\r\n          constructor(name) {\r\n            this.name = name;\r\n          }\r\n          \r\n          getName() {\r\n            return this.name;\r\n          }\r\n        }\r\n      `;\r\n      const result = detector.detect(code);\r\n      expect(result.type).toBe('code');\r\n      expect(result.confidence).toBeGreaterThan(0.8);\r\n    });\r\n  });\r\n\r\n  describe('Table Detection', () => {\r\n    it('should detect CSV format', () => {\r\n      const csv = 'Name,Age,City\\nJohn,30,NYC\\nJane,25,LA';\r\n      const result = detector.detect(csv);\r\n      expect(['csv', 'table']).toContain(result.type);\r\n      expect(result.confidence).toBeGreaterThan(0.7);\r\n    });\r\n\r\n    it('should detect TSV format', () => {\r\n      const tsv = 'Name\\tAge\\tCity\\nJohn\\t30\\tNYC\\nJane\\t25\\tLA';\r\n      const result = detector.detect(tsv);\r\n      expect(['tsv', 'table']).toContain(result.type);\r\n      expect(result.confidence).toBeGreaterThan(0.7);\r\n    });\r\n\r\n    it('should detect markdown tables', () => {\r\n      const table = '| Name | Age | City |\\n|------|-----|------|\\n| John | 30  | NYC  |';\r\n      const result = detector.detect(table);\r\n      expect(['table', 'markdown']).toContain(result.type);\r\n    });\r\n  });\r\n\r\n  describe('Markdown Detection', () => {\r\n    it('should detect markdown headers', () => {\r\n      const markdown = '# Header 1\\n## Header 2\\nSome content';\r\n      const result = detector.detect(markdown);\r\n      expect(result.type).toBe('markdown');\r\n      expect(result.confidence).toBeGreaterThan(0.4);\r\n    });\r\n\r\n    it('should detect markdown lists', () => {\r\n      const markdown = '- Item 1\\n- Item 2\\n- Item 3';\r\n      const result = detector.detect(markdown);\r\n      expect(result.type).toBe('markdown');\r\n      expect(result.confidence).toBeGreaterThan(0.4);\r\n    });\r\n\r\n    it('should detect markdown formatting', () => {\r\n      const markdown = 'This is **bold** and *italic* text with `code`';\r\n      const result = detector.detect(markdown);\r\n      expect(result.type).toBe('markdown');\r\n      expect(result.confidence).toBeGreaterThan(0.4);\r\n    });\r\n  });\r\n\r\n  describe('HTML Detection', () => {\r\n    it('should detect HTML tags', () => {\r\n      const html = '<div><p>Hello <strong>world</strong></p></div>';\r\n      const result = detector.detect(html);\r\n      expect(result.type).toBe('html');\r\n      expect(result.confidence).toBeGreaterThan(0.5);\r\n    });\r\n\r\n    it('should detect HTML with attributes', () => {\r\n      const html = '<div class=\"container\" id=\"main\"><p>Content</p></div>';\r\n      const result = detector.detect(html);\r\n      expect(result.type).toBe('html');\r\n      expect(result.confidence).toBeGreaterThan(0.5);\r\n    });\r\n  });\r\n\r\n  describe('JSON Detection', () => {\r\n    it('should detect valid JSON objects', () => {\r\n      const json = '{\"name\": \"John\", \"age\": 30, \"city\": \"NYC\"}';\r\n      const result = detector.detect(json);\r\n      expect(result.type).toBe('json');\r\n      expect(result.confidence).toBeGreaterThan(0.8);\r\n    });\r\n\r\n    it('should detect JSON arrays', () => {\r\n      const json = '[{\"id\": 1}, {\"id\": 2}, {\"id\": 3}]';\r\n      const result = detector.detect(json);\r\n      expect(result.type).toBe('json');\r\n      expect(result.confidence).toBeGreaterThan(0.8);\r\n    });\r\n\r\n    it('should not detect invalid JSON', () => {\r\n      const invalidJson = '{name: \"John\", age: 30}';\r\n      const result = detector.detect(invalidJson);\r\n      expect(result.type).not.toBe('json');\r\n    });\r\n  });\r\n\r\n  describe('LaTeX Detection', () => {\r\n    it('should detect LaTeX equations', () => {\r\n      const latex = '\\\\begin{equation} E = mc^2 \\\\end{equation}';\r\n      const result = detector.detect(latex);\r\n      expect(result.type).toBe('latex');\r\n      expect(result.confidence).toBeGreaterThanOrEqual(0.7);\r\n    });\r\n\r\n    it('should detect inline LaTeX with math symbols', () => {\r\n      const latex = 'The formula $\\\\frac{1}{2} \\\\sum_{i=1}^{n} x_i$ is complex';\r\n      const result = detector.detect(latex);\r\n      // Le dÃ©tecteur peut retourner 'code' ou 'latex' selon la prioritÃ©\r\n      expect(['latex', 'code']).toContain(result.type);\r\n      expect(result.confidence).toBeGreaterThan(0.5);\r\n    });\r\n  });\r\n\r\n  describe('Text Fallback', () => {\r\n    it('should fallback to text for unrecognized content', () => {\r\n      const text = 'This is just plain text without any special formatting.';\r\n      const result = detector.detect(text);\r\n      expect(result.type).toBe('text');\r\n      expect(result.confidence).toBe(1.0);\r\n    });\r\n  });\r\n\r\n  describe('Detection Options', () => {\r\n    it('should respect confidence threshold', () => {\r\n      const weakMarkdown = 'Maybe *italic* text';\r\n      const options = { confidenceThreshold: 0.8 };\r\n      const result = detector.detect(weakMarkdown, options);\r\n      \r\n      // Should have some result\r\n      expect(result.type).toBeDefined();\r\n    });\r\n\r\n    it('should disable specific detectors', () => {\r\n      const options = {\r\n        enableMarkdownDetection: false,\r\n        enableHtmlDetection: false,\r\n        enableCodeDetection: false\r\n      };\r\n      \r\n      const markdown = '# Header\\n**bold** text';\r\n      const result = detector.detect(markdown, options);\r\n      \r\n      expect(result.type).toBe('text');\r\n    });\r\n  });\r\n\r\n  describe('Metadata Analysis', () => {\r\n    it('should provide metadata for URL detection', () => {\r\n      const content = 'https://example.com';\r\n      const result = detector.detect(content);\r\n      \r\n      expect(result.metadata).toBeDefined();\r\n      if (result.metadata) {\r\n        expect(result.metadata.url).toBe('https://example.com');\r\n      }\r\n    });\r\n\r\n    it('should provide metadata for code detection', () => {\r\n      const content = 'function test() { return true; }';\r\n      const result = detector.detect(content);\r\n      \r\n      if (result.type === 'code' && result.metadata) {\r\n        expect(result.metadata.language).toBeDefined();\r\n      }\r\n    });\r\n\r\n    it('should provide metadata for JSON detection', () => {\r\n      const content = '{\"name\": \"test\", \"value\": 123}';\r\n      const result = detector.detect(content);\r\n      \r\n      if (result.type === 'json' && result.metadata) {\r\n        expect(result.metadata.isObject).toBe(true);\r\n      }\r\n    });\r\n  });\r\n\r\n  // â­ NOUVEAU : Tests pour la dÃ©tection audio (Cahier des Charges v2.1)\r\n  describe('Audio Detection (â­ NOUVEAU v2.1)', () => {\r\n    it('should detect MP3 audio URLs with high confidence', () => {\r\n      const audioUrl = 'https://example.com/podcast.mp3';\r\n      const result = detector.detect(audioUrl);\r\n      \r\n      expect(result.type).toBe('url'); // URL dÃ©tectÃ©e en premier\r\n      expect(result.confidence).toBeGreaterThan(0.9);\r\n      expect(result.metadata?.url).toBe(audioUrl);\r\n    });\r\n\r\n    it('should detect all supported audio formats', () => {\r\n      const audioFormats = ['mp3', 'wav', 'ogg', 'm4a', 'aac', 'flac', 'webm'];\r\n      \r\n      audioFormats.forEach(format => {\r\n        const url = `https://example.com/audio.${format}`;\r\n        const result = detector.detect(url);\r\n        \r\n        expect(result.type).toBe('url');\r\n        expect(result.confidence).toBeGreaterThan(0.9);\r\n      });\r\n    });\r\n\r\n    it('should detect audio streaming URLs', () => {\r\n      const streamingUrls = [\r\n        'https://soundcloud.com/user/track',\r\n        'https://spotify.com/track/123',\r\n        'https://music.youtube.com/watch?v=123'\r\n      ];\r\n      \r\n      streamingUrls.forEach(url => {\r\n        const result = detector.detect(url);\r\n        expect(result.type).toBe('url');\r\n        expect(result.confidence).toBeGreaterThan(0.9);\r\n      });\r\n    });\r\n\r\n    it('should not detect non-audio URLs as audio', () => {\r\n      const nonAudioUrls = [\r\n        'https://example.com/image.jpg',\r\n        'https://example.com/document.pdf',\r\n        'https://example.com/video.mp4'\r\n      ];\r\n      \r\n      nonAudioUrls.forEach(url => {\r\n        const result = detector.detect(url);\r\n        expect(result.type).toBe('url'); // Toujours URL mais pas audio\r\n      });\r\n    });\r\n  });\r\n\r\n  // â­ AMÃ‰LIORÃ‰ : Tests de dÃ©tection avec seuils de confiance prÃ©cis\r\n  describe('Detection Confidence Thresholds (ConformitÃ© Cahier des Charges)', () => {\r\n    it('should detect URLs with confidence > 0.90', () => {\r\n      const urls = [\r\n        'https://www.notion.so',\r\n        'http://example.com/path?param=value',\r\n        'https://github.com/user/repo.git'\r\n      ];\r\n      \r\n      urls.forEach(url => {\r\n        const result = detector.detect(url);\r\n        expect(result.type).toBe('url');\r\n        expect(result.confidence).toBeGreaterThan(0.90);\r\n      });\r\n    });\r\n\r\n    it('should detect code with confidence > 0.70', () => {\r\n      const codeExamples = [\r\n        'function hello() {\\n  console.log(\"Hello World\");\\n  return true;\\n}',\r\n        'class MyClass {\\n  constructor(name) {\\n    this.name = name;\\n  }\\n}',\r\n        'def calculate_sum(a, b):\\n    return a + b\\n\\nresult = calculate_sum(5, 3)'\r\n      ];\r\n      \r\n      codeExamples.forEach(code => {\r\n        const result = detector.detect(code);\r\n        expect(result.type).toBe('code');\r\n        expect(result.confidence).toBeGreaterThan(0.70);\r\n      });\r\n    });\r\n\r\n    it('should detect tables with confidence > 0.70', () => {\r\n      const tableExamples = [\r\n        'Name,Age,City\\nJohn,30,Paris\\nJane,25,London',\r\n        'Name\\tAge\\tCity\\nJohn\\t30\\tParis\\nJane\\t25\\tLondon',\r\n        '| Name | Age | City |\\n|------|-----|------|\\n| John | 30  | Paris |'\r\n      ];\r\n      \r\n      tableExamples.forEach(table => {\r\n        const result = detector.detect(table);\r\n        expect(['csv', 'tsv', 'table']).toContain(result.type);\r\n        expect(result.confidence).toBeGreaterThan(0.70);\r\n      });\r\n    });\r\n\r\n    it('should detect JSON with confidence > 0.70', () => {\r\n      const jsonExamples = [\r\n        '{\"name\": \"John\", \"age\": 30, \"city\": \"Paris\"}',\r\n        '[{\"id\": 1, \"name\": \"Item 1\"}, {\"id\": 2, \"name\": \"Item 2\"}]',\r\n        '{\\n  \"users\": [\\n    {\"name\": \"John\", \"active\": true}\\n  ]\\n}'\r\n      ];\r\n      \r\n      jsonExamples.forEach(json => {\r\n        const result = detector.detect(json);\r\n        expect(result.type).toBe('json');\r\n        expect(result.confidence).toBeGreaterThan(0.70);\r\n      });\r\n    });\r\n\r\n    it('should detect LaTeX with confidence > 0.50', () => {\r\n      const latexExamples = [\r\n        '\\\\begin{equation} E = mc^2 \\\\end{equation}',\r\n        '$\\\\frac{1}{2} \\\\sum_{i=1}^{n} x_i$',\r\n        '$$\\\\int_{a}^{b} f(x) \\\\, dx = F(b) - F(a)$$'\r\n      ];\r\n      \r\n      latexExamples.forEach(latex => {\r\n        const result = detector.detect(latex);\r\n        expect(result.type).toBe('latex');\r\n        expect(result.confidence).toBeGreaterThan(0.50);\r\n      });\r\n    });\r\n\r\n    it('should detect HTML with confidence > 0.50', () => {\r\n      const htmlExamples = [\r\n        '<div><p>Hello <strong>world</strong></p></div>',\r\n        '<!DOCTYPE html>\\n<html><head><title>Test</title></head><body><p>Content</p></body></html>',\r\n        '<article><h1>Title</h1><p>Paragraph with <a href=\"#\">link</a></p></article>'\r\n      ];\r\n      \r\n      htmlExamples.forEach(html => {\r\n        const result = detector.detect(html);\r\n        expect(result.type).toBe('html');\r\n        expect(result.confidence).toBeGreaterThan(0.50);\r\n      });\r\n    });\r\n\r\n    it('should detect Markdown with confidence > 0.40', () => {\r\n      const markdownExamples = [\r\n        '# Title\\n**Bold** and *italic*\\n- List item',\r\n        '## Subtitle\\n\\n> Blockquote\\n\\n```javascript\\ncode block\\n```',\r\n        '### Section\\n\\n1. Numbered list\\n2. Second item\\n\\n[Link](https://example.com)'\r\n      ];\r\n      \r\n      markdownExamples.forEach(markdown => {\r\n        const result = detector.detect(markdown);\r\n        expect(result.type).toBe('markdown');\r\n        expect(result.confidence).toBeGreaterThan(0.40);\r\n      });\r\n    });\r\n\r\n    it('should fallback to text with confidence = 1.0', () => {\r\n      const plainTexts = [\r\n        'Just plain text without any special formatting',\r\n        'Simple sentence.',\r\n        'Multiple sentences. This is another one. And a third.'\r\n      ];\r\n      \r\n      plainTexts.forEach(text => {\r\n        const result = detector.detect(text);\r\n        expect(result.type).toBe('text');\r\n        expect(result.confidence).toBe(1.0);\r\n      });\r\n    });\r\n  });\r\n\r\n  // â­ NOUVEAU : Tests de prioritÃ© de dÃ©tection\r\n  describe('Detection Priority Order (Cahier des Charges v2.1)', () => {\r\n    it('should prioritize URL over other types', () => {\r\n      const mixedContent = 'https://github.com/user/repo.git';\r\n      const result = detector.detect(mixedContent);\r\n      \r\n      expect(result.type).toBe('url');\r\n      expect(result.confidence).toBeGreaterThan(0.90);\r\n    });\r\n\r\n    it('should prioritize LaTeX over code for math content', () => {\r\n      const mathContent = '\\\\begin{equation} f(x) = \\\\sum_{i=1}^{n} a_i x^i \\\\end{equation}';\r\n      const result = detector.detect(mathContent);\r\n      \r\n      expect(result.type).toBe('latex');\r\n      expect(result.confidence).toBeGreaterThan(0.50);\r\n    });\r\n\r\n    it('should prioritize JSON over code for valid JSON', () => {\r\n      const jsonContent = '{\"function\": \"test\", \"code\": true, \"array\": [1, 2, 3]}';\r\n      const result = detector.detect(jsonContent);\r\n      \r\n      expect(result.type).toBe('json');\r\n      expect(result.confidence).toBeGreaterThan(0.70);\r\n    });\r\n\r\n    it('should prioritize code over markdown for code-heavy content', () => {\r\n      const codeContent = `class Calculator {\r\n  constructor() {\r\n    this.result = 0;\r\n  }\r\n  \r\n  add(value) {\r\n    this.result += value;\r\n    return this;\r\n  }\r\n}`;\r\n      const result = detector.detect(codeContent);\r\n      \r\n      expect(result.type).toBe('code');\r\n      expect(result.confidence).toBeGreaterThan(0.70);\r\n    });\r\n\r\n    it('should prioritize table over markdown for table content', () => {\r\n      const tableContent = `Name,Age,Department,Salary\r\nJohn Doe,30,Engineering,75000\r\nJane Smith,28,Design,68000\r\nBob Johnson,35,Marketing,72000`;\r\n      \r\n      const result = detector.detect(tableContent);\r\n      \r\n      expect(result.type).toBe('csv');\r\n      expect(result.confidence).toBeGreaterThan(0.70);\r\n    });\r\n  });\r\n\r\n  // â­ NOUVEAU : Tests d'options de dÃ©tection avancÃ©es\r\n  describe('Advanced Detection Options (Cahier des Charges v2.1)', () => {\r\n    it('should respect audio detection in URL detection', () => {\r\n      const audioUrl = 'https://example.com/podcast.mp3';\r\n      \r\n      const result = detector.detect(audioUrl);\r\n      \r\n      expect(result.type).toBe('url');\r\n      expect(result.metadata?.url).toBe(audioUrl);\r\n    });\r\n\r\n    it('should respect confidence threshold', () => {\r\n      const weakMarkdown = 'Maybe *italic* text';\r\n      \r\n      const lowThreshold = detector.detect(weakMarkdown, { confidenceThreshold: 0.1 });\r\n      const highThreshold = detector.detect(weakMarkdown, { confidenceThreshold: 0.8 });\r\n      \r\n      expect(lowThreshold.type).toBeDefined();\r\n      expect(highThreshold.type).toBeDefined();\r\n    });\r\n\r\n    it('should disable specific detectors when requested', () => {\r\n      const options: DetectionOptions = {\r\n        enableMarkdownDetection: false,\r\n        enableHtmlDetection: false,\r\n        enableCodeDetection: false,\r\n        enableLatexDetection: false,\r\n        enableJsonDetection: false,\r\n        enableTableDetection: false\r\n      };\r\n      \r\n      const markdown = '# Header\\n**bold** text';\r\n      const result = detector.detect(markdown, options);\r\n      \r\n      expect(result.type).toBe('text');\r\n    });\r\n\r\n    it('should handle detection options correctly', () => {\r\n      const code = 'function test() { return true; }';\r\n      const options: DetectionOptions = {\r\n        enableCodeDetection: false\r\n      };\r\n      \r\n      const result = detector.detect(code, options);\r\n      \r\n      // MÃªme avec code dÃ©sactivÃ©, devrait dÃ©tecter autre chose ou text\r\n      expect(result.type).toBeDefined();\r\n    });\r\n  });\r\n\r\n  // â­ NOUVEAU : Tests de mÃ©tadonnÃ©es enrichies\r\n  describe('Enhanced Metadata Analysis (Cahier des Charges v2.1)', () => {\r\n    it('should provide comprehensive metadata for URL detection', () => {\r\n      const url = 'https://www.example.com/path?param=value#section';\r\n      const result = detector.detect(url);\r\n      \r\n      expect(result.metadata).toBeDefined();\r\n      expect(result.metadata?.url).toBe(url);\r\n    });\r\n\r\n    it('should provide language metadata for code detection', () => {\r\n      const jsCode = 'const hello = () => console.log(\"Hello\");';\r\n      const result = detector.detect(jsCode);\r\n      \r\n      if (result.type === 'code') {\r\n        expect(result.metadata?.language).toBeDefined();\r\n        expect(result.metadata?.language).toBe('javascript');\r\n      }\r\n    });\r\n\r\n    it('should provide format metadata for table detection', () => {\r\n      const csv = 'Name,Age\\nJohn,30\\nJane,25';\r\n      const result = detector.detect(csv);\r\n      \r\n      if (result.type === 'csv') {\r\n        expect(result.metadata?.delimiter).toBe(',');\r\n      }\r\n    });\r\n\r\n    it('should provide structure metadata for JSON detection', () => {\r\n      const jsonObject = '{\"name\": \"test\", \"items\": [1, 2, 3]}';\r\n      const result = detector.detect(jsonObject);\r\n      \r\n      if (result.type === 'json') {\r\n        expect(result.metadata?.isObject).toBe(true);\r\n        expect(result.metadata?.itemCount).toBeGreaterThan(0);\r\n      }\r\n    });\r\n\r\n    it('should provide LaTeX features metadata', () => {\r\n      const latex = '$\\\\frac{1}{2}$ and \\\\begin{equation} x = y \\\\end{equation}';\r\n      const result = detector.detect(latex);\r\n      \r\n      if (result.type === 'latex') {\r\n        expect(result.metadata?.hasInlineLatex).toBe(true);\r\n        expect(result.metadata?.hasEnvironments).toBe(true);\r\n      }\r\n    });\r\n  });\r\n\r\n  // â­ AMÃ‰LIORÃ‰ : Tests d'edge cases robustes\r\n  describe('Robust Edge Cases (Production Ready)', () => {\r\n    it('should handle empty content gracefully', () => {\r\n      const result = detector.detect('');\r\n      expect(result.type).toBe('text');\r\n      expect(result.confidence).toBe(1.0);\r\n    });\r\n\r\n    it('should handle null/undefined content without throwing', () => {\r\n      expect(() => detector.detect(null as any)).not.toThrow();\r\n      expect(() => detector.detect(undefined as any)).not.toThrow();\r\n      \r\n      const nullResult = detector.detect(null as any);\r\n      const undefinedResult = detector.detect(undefined as any);\r\n      \r\n      expect(nullResult.type).toBe('text');\r\n      expect(undefinedResult.type).toBe('text');\r\n    });\r\n\r\n    it('should handle whitespace-only content', () => {\r\n      const whitespaceContent = '   \\n\\t  \\n  ';\r\n      const result = detector.detect(whitespaceContent);\r\n      \r\n      expect(result.type).toBe('text');\r\n      expect(result.confidence).toBe(1.0);\r\n    });\r\n\r\n    it('should handle very long content efficiently', () => {\r\n      const longContent = 'a'.repeat(50000); // 50k characters\r\n      const startTime = Date.now();\r\n      \r\n      const result = detector.detect(longContent);\r\n      const processingTime = Date.now() - startTime;\r\n      \r\n      expect(result).toBeDefined();\r\n      expect(result.type).toBe('text');\r\n      expect(processingTime).toBeLessThan(100); // Should be fast\r\n    });\r\n\r\n    it('should handle malformed JSON gracefully', () => {\r\n      const malformedJson = '{name: \"John\", age: 30, }';\r\n      const result = detector.detect(malformedJson);\r\n      \r\n      // Should not crash and provide reasonable result\r\n      expect(result).toBeDefined();\r\n      expect(['json', 'text']).toContain(result.type);\r\n    });\r\n\r\n    it('should handle malformed URLs gracefully', () => {\r\n      const malformedUrls = [\r\n        'htp://malformed.com',\r\n        'https://',\r\n        'not-a-url-at-all',\r\n        'javascript:alert(\"xss\")'\r\n      ];\r\n      \r\n      malformedUrls.forEach(url => {\r\n        const result = detector.detect(url);\r\n        expect(result).toBeDefined();\r\n        expect(result.type).not.toBe('url');\r\n      });\r\n    });\r\n\r\n    it('should handle mixed content appropriately', () => {\r\n      const mixedContent = `# Markdown Title\r\n      \r\nfunction code() {\r\n  return \"javascript\";\r\n}\r\n\r\nhttps://example.com\r\n\r\n{\"json\": \"object\"}`;\r\n      \r\n      const result = detector.detect(mixedContent);\r\n      \r\n      // Should detect the most prominent type\r\n      expect(result).toBeDefined();\r\n      expect(['markdown', 'code', 'text']).toContain(result.type);\r\n    });\r\n\r\n    it('should handle special characters and Unicode', () => {\r\n      const unicodeContent = 'ðŸŽ¯ Test avec Ã©mojis et caractÃ¨res spÃ©ciaux: Ã Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«';\r\n      const result = detector.detect(unicodeContent);\r\n      \r\n      expect(result).toBeDefined();\r\n      expect(result.type).toBe('text');\r\n    });\r\n\r\n    it('should handle binary-like content', () => {\r\n      const binaryLike = '\\x00\\x01\\x02\\x03\\x04\\x05';\r\n      const result = detector.detect(binaryLike);\r\n      \r\n      expect(result).toBeDefined();\r\n      expect(result.type).toBe('text');\r\n    });\r\n  });\r\n\r\n  // â­ NOUVEAU : Tests de performance\r\n  describe('Performance Requirements (Cahier des Charges v2.1)', () => {\r\n    it('should detect content type in < 5ms for 1000 lines', () => {\r\n      const content = Array(1000).fill('Line of content').join('\\n');\r\n      const startTime = Date.now();\r\n      \r\n      const result = detector.detect(content);\r\n      const processingTime = Date.now() - startTime;\r\n      \r\n      expect(result).toBeDefined();\r\n      expect(processingTime).toBeLessThan(5);\r\n    });\r\n\r\n    it('should handle concurrent detections efficiently', async () => {\r\n      const contents = [\r\n        'https://example.com',\r\n        'function test() {}',\r\n        'Name,Age\\nJohn,30',\r\n        '{\"key\": \"value\"}',\r\n        '# Markdown title'\r\n      ];\r\n      \r\n      const startTime = Date.now();\r\n      \r\n      const results = contents.map(content => detector.detect(content));\r\n      const processingTime = Date.now() - startTime;\r\n      \r\n      expect(results).toHaveLength(5);\r\n      expect(results.every(r => r.confidence > 0)).toBe(true);\r\n      expect(processingTime).toBeLessThan(10);\r\n    });\r\n  });\r\n\r\n  // â­ NOUVEAU : Tests de sÃ©curitÃ©\r\n  describe('Security Validation (Cahier des Charges v2.1)', () => {\r\n    it('should not be vulnerable to ReDoS attacks', () => {\r\n      const maliciousContent = 'a'.repeat(10000) + '!';\r\n      const startTime = Date.now();\r\n      \r\n      const result = detector.detect(maliciousContent);\r\n      const processingTime = Date.now() - startTime;\r\n      \r\n      expect(result).toBeDefined();\r\n      expect(processingTime).toBeLessThan(100); // Should not hang\r\n    });\r\n\r\n    it('should handle potentially malicious URLs safely', () => {\r\n      const maliciousUrls = [\r\n        'javascript:alert(\"xss\")',\r\n        'data:text/html,<script>alert(\"xss\")</script>',\r\n        'file:///etc/passwd',\r\n        'ftp://malicious.com'\r\n      ];\r\n      \r\n      maliciousUrls.forEach(url => {\r\n        const result = detector.detect(url);\r\n        expect(result.type).not.toBe('url'); // Should not detect as valid URL\r\n      });\r\n    });\r\n\r\n    it('should handle large payloads without memory issues', () => {\r\n      const largeContent = 'x'.repeat(1000000); // 1MB\r\n      \r\n      expect(() => {\r\n        const result = detector.detect(largeContent);\r\n        expect(result).toBeDefined();\r\n      }).not.toThrow();\r\n    });\r\n  });\r\n});"],"version":3}