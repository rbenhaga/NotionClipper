{"version":3,"names":["cov_27sem404wr","actualCoverage","s","RichTextConverter","parseRichText","text","options","f","b","processedText","processEscapes","tokens","tokenizeText","tokensToRichText","escapeMap","Map","counter","escapedChars","result","forEach","char","escapedPattern","RegExp","replace","placeholder","set","_escapeMap","restoreEscapes","patterns","regex","type","priority","convertLinks","push","allMatches","pattern","match","source","exec","start","index","end","length","content","url","expression","sort","a","map","m","originalText","segments","createSegments","segment","equation","annotations","bold","italic","code","strikethrough","underline","textContent","link","Object","keys","undefined","href","changePoints","Set","add","token","sortedPoints","Array","from","i","slice","applicableTokens","filter","equationToken","find","t","mergeAdjacentSegments","trim","merged","current","next","canMergeSegments","JSON","stringify","createSimpleRichText","createFormattedRichText","formatting","createLinkRichText","createEquationRichText","combineRichText","richTexts","flat","truncateRichText","richText","maxLength","currentLength","item","remainingLength","truncatedContent","substring","exports"],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\converters\\RichTextConverter.ts"],"sourcesContent":["import type { NotionRichText, NotionColor } from '../types';\r\n\r\ninterface TextToken {\r\n  type: 'text' | 'bold' | 'italic' | 'code' | 'strikethrough' | 'underline' | 'link' | 'auto-link' | 'equation' | 'bold-italic';\r\n  content: string;\r\n  start: number;\r\n  end: number;\r\n  url?: string;\r\n  expression?: string;\r\n}\r\n\r\n\r\n\r\nexport class RichTextConverter {\r\n  parseRichText(text: string, options?: { convertLinks?: boolean }): NotionRichText[] {\r\n    if (!text) return [];\r\n\r\n    // Traiter les échappements d'abord\r\n    const processedText = this.processEscapes(text);\r\n\r\n    // Nouvelle approche: tokenisation puis reconstruction\r\n    const tokens = this.tokenizeText(processedText, options);\r\n    return this.tokensToRichText(tokens, processedText);\r\n  }\r\n\r\n  private processEscapes(text: string): string {\r\n    // Remplacer les échappements par des placeholders temporaires\r\n    const escapeMap = new Map<string, string>();\r\n    let counter = 0;\r\n\r\n    // Traiter les échappements de caractères spéciaux\r\n    const escapedChars = ['*', '_', '`', '~', '[', ']', '(', ')', '$'];\r\n\r\n    let result = text;\r\n\r\n    escapedChars.forEach(char => {\r\n      const escapedPattern = new RegExp(`\\\\\\\\\\\\${char}`, 'g');\r\n      result = result.replace(escapedPattern, () => {\r\n        const placeholder = `§ESC${counter++}§`;\r\n        escapeMap.set(placeholder, char);\r\n        return placeholder;\r\n      });\r\n    });\r\n\r\n    // Stocker la map pour la restauration\r\n    (this as any)._escapeMap = escapeMap;\r\n\r\n    return result;\r\n  }\r\n\r\n  private restoreEscapes(text: string): string {\r\n    const escapeMap = (this as any)._escapeMap as Map<string, string>;\r\n    if (!escapeMap) return text;\r\n\r\n    let result = text;\r\n    escapeMap.forEach((char, placeholder) => {\r\n      result = result.replace(new RegExp(placeholder, 'g'), char);\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  private tokenizeText(text: string, options?: { convertLinks?: boolean }): TextToken[] {\r\n\r\n    // Définir tous les patterns avec leurs priorités\r\n    const patterns: Array<{ regex: RegExp; type: TextToken['type']; priority: number }> = [\r\n      // Équations (priorité la plus haute - pas d'imbrication)\r\n      { regex: /\\$([^$]+)\\$/g, type: 'equation', priority: 1 },\r\n\r\n      // Code inline (priorité haute - peut être imbriqué)\r\n      { regex: /`([^`]+)`/g, type: 'code', priority: 2 },\r\n\r\n      // Bold + Italic (***text***)\r\n      { regex: /\\*\\*\\*([^*]+)\\*\\*\\*/g, type: 'bold-italic', priority: 4 },\r\n\r\n      // Bold (**text**)\r\n      { regex: /\\*\\*([^*]+)\\*\\*/g, type: 'bold', priority: 5 },\r\n\r\n      // Underline (__text__)\r\n      { regex: /__([^_]+)__/g, type: 'underline', priority: 6 },\r\n\r\n      // Italic (*text* or _text_)\r\n      { regex: /\\*([^*]+)\\*/g, type: 'italic', priority: 7 },\r\n      { regex: /_([^_]+)_/g, type: 'italic', priority: 7 },\r\n\r\n      // Strikethrough (~~text~~)\r\n      { regex: /~~([^~]+)~~/g, type: 'strikethrough', priority: 8 }\r\n    ];\r\n\r\n    // Ajouter les patterns de liens seulement si convertLinks n'est pas false\r\n    if (options?.convertLinks !== false) {\r\n      patterns.push(\r\n        // Links (priorité haute - peut contenir du formatage)\r\n        { regex: /\\[([^\\]]+)\\]\\(([^)]+)\\)/g, type: 'link', priority: 3 },\r\n\r\n        // URLs auto-détectées (priorité haute)\r\n        { regex: /(https?:\\/\\/[^\\s<>\"{}|\\\\^`[\\]]+)/g, type: 'auto-link', priority: 3 }\r\n      );\r\n    }\r\n\r\n    // Trouver tous les matches avec leurs positions\r\n    const allMatches: Array<{\r\n      match: RegExpExecArray;\r\n      type: string;\r\n      priority: number;\r\n      start: number;\r\n      end: number;\r\n      content: string;\r\n      url?: string;\r\n      expression?: string;\r\n    }> = [];\r\n\r\n    patterns.forEach(pattern => {\r\n      let match;\r\n      const regex = new RegExp(pattern.regex.source, 'g');\r\n\r\n      while ((match = regex.exec(text)) !== null) {\r\n        const start = match.index;\r\n        const end = match.index + match[0].length;\r\n\r\n        let content = match[1];\r\n        let url: string | undefined;\r\n        let expression: string | undefined;\r\n\r\n        if (pattern.type === 'link') {\r\n          content = match[1];\r\n          url = match[2];\r\n        } else if (pattern.type === 'auto-link') {\r\n          content = match[1];\r\n          url = match[1];\r\n        } else if (pattern.type === 'equation') {\r\n          expression = match[1];\r\n          content = match[1];\r\n        } else if (pattern.type === 'bold-italic') {\r\n          // Traiter comme bold ET italic\r\n          allMatches.push({\r\n            match,\r\n            type: 'bold',\r\n            priority: pattern.priority,\r\n            start,\r\n            end,\r\n            content\r\n          });\r\n          allMatches.push({\r\n            match,\r\n            type: 'italic',\r\n            priority: pattern.priority,\r\n            start,\r\n            end,\r\n            content\r\n          });\r\n          continue;\r\n        }\r\n\r\n        allMatches.push({\r\n          match,\r\n          type: pattern.type,\r\n          priority: pattern.priority,\r\n          start,\r\n          end,\r\n          content,\r\n          url,\r\n          expression\r\n        });\r\n      }\r\n    });\r\n\r\n    // Trier par position puis par priorité\r\n    allMatches.sort((a, b) => {\r\n      if (a.start !== b.start) return a.start - b.start;\r\n      return a.priority - b.priority;\r\n    });\r\n\r\n    return allMatches.map(m => ({\r\n      type: m.type as TextToken['type'],\r\n      content: m.content,\r\n      start: m.start,\r\n      end: m.end,\r\n      url: m.url,\r\n      expression: m.expression\r\n    }));\r\n  }\r\n\r\n  private tokensToRichText(tokens: TextToken[], originalText: string): NotionRichText[] {\r\n    if (tokens.length === 0) {\r\n      return [{\r\n        type: 'text',\r\n        text: { content: this.restoreEscapes(originalText) }\r\n      }];\r\n    }\r\n\r\n    const result: NotionRichText[] = [];\r\n    const segments = this.createSegments(tokens, originalText);\r\n\r\n    segments.forEach(segment => {\r\n      if (segment.type === 'equation') {\r\n        result.push({\r\n          type: 'equation',\r\n          equation: { expression: segment.expression || segment.content }\r\n        });\r\n      } else {\r\n        const annotations: any = {};\r\n\r\n        // Appliquer toutes les annotations qui s'appliquent à ce segment\r\n        if (segment.bold) annotations.bold = true;\r\n        if (segment.italic) annotations.italic = true;\r\n        if (segment.code) annotations.code = true;\r\n        if (segment.strikethrough) annotations.strikethrough = true;\r\n        if (segment.underline) annotations.underline = true;\r\n\r\n        const textContent: any = { content: segment.content };\r\n        if (segment.link) {\r\n          textContent.link = { url: segment.link.url };\r\n        }\r\n\r\n        // Restaurer les échappements dans le contenu\r\n        textContent.content = this.restoreEscapes(textContent.content);\r\n\r\n        result.push({\r\n          type: 'text',\r\n          text: textContent,\r\n          annotations: Object.keys(annotations).length > 0 ? annotations : undefined,\r\n          href: segment.link ? segment.link.url : null\r\n        });\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  private createSegments(tokens: TextToken[], originalText: string): Array<{\r\n    content: string;\r\n    start: number;\r\n    end: number;\r\n    type: 'text' | 'equation';\r\n    bold?: boolean;\r\n    italic?: boolean;\r\n    code?: boolean;\r\n    strikethrough?: boolean;\r\n    underline?: boolean;\r\n    link?: { url: string };\r\n    expression?: string;\r\n  }> {\r\n    // Créer une liste de tous les points de changement\r\n    const changePoints = new Set<number>();\r\n    changePoints.add(0);\r\n    changePoints.add(originalText.length);\r\n\r\n    tokens.forEach(token => {\r\n      changePoints.add(token.start);\r\n      changePoints.add(token.end);\r\n    });\r\n\r\n    const sortedPoints = Array.from(changePoints).sort((a, b) => a - b);\r\n    const segments: Array<{\r\n      content: string;\r\n      start: number;\r\n      end: number;\r\n      type: 'text' | 'equation';\r\n      bold?: boolean;\r\n      italic?: boolean;\r\n      code?: boolean;\r\n      strikethrough?: boolean;\r\n      underline?: boolean;\r\n      link?: { url: string };\r\n      expression?: string;\r\n    }> = [];\r\n\r\n    // Créer des segments entre chaque point de changement\r\n    for (let i = 0; i < sortedPoints.length - 1; i++) {\r\n      const start = sortedPoints[i];\r\n      const end = sortedPoints[i + 1];\r\n\r\n      if (start === end) continue;\r\n\r\n      const content = originalText.slice(start, end);\r\n      if (!content) continue;\r\n\r\n      // Déterminer quels tokens s'appliquent à ce segment\r\n      const applicableTokens = tokens.filter(token => {\r\n        // Un token s'applique si le segment est complètement à l'intérieur du token\r\n        return token.start <= start && end <= token.end;\r\n      });\r\n\r\n      // Vérifier si c'est une équation (priorité absolue)\r\n      const equationToken = applicableTokens.find(t => t.type === 'equation');\r\n      if (equationToken) {\r\n        segments.push({\r\n          content: equationToken.content,\r\n          start,\r\n          end,\r\n          type: 'equation',\r\n          expression: equationToken.expression\r\n        });\r\n        continue;\r\n      }\r\n\r\n      // Construire les annotations pour ce segment\r\n      const segment: any = {\r\n        content,\r\n        start,\r\n        end,\r\n        type: 'text'\r\n      };\r\n\r\n      applicableTokens.forEach(token => {\r\n        switch (token.type) {\r\n          case 'bold':\r\n            segment.bold = true;\r\n            break;\r\n          case 'italic':\r\n            segment.italic = true;\r\n            break;\r\n          case 'code':\r\n            segment.code = true;\r\n            break;\r\n          case 'strikethrough':\r\n            segment.strikethrough = true;\r\n            break;\r\n          case 'underline':\r\n            segment.underline = true;\r\n            break;\r\n          case 'link':\r\n          case 'auto-link':\r\n            segment.link = { url: token.url! };\r\n            break;\r\n        }\r\n      });\r\n\r\n      segments.push(segment);\r\n    }\r\n\r\n    // Filtrer les segments vides et fusionner les segments adjacents identiques\r\n    return this.mergeAdjacentSegments(segments.filter(s => s.content.trim() || s.type === 'equation'));\r\n  }\r\n\r\n  private mergeAdjacentSegments(segments: any[]): any[] {\r\n    if (segments.length <= 1) return segments;\r\n\r\n    const merged: any[] = [];\r\n    let current = { ...segments[0] };\r\n\r\n    for (let i = 1; i < segments.length; i++) {\r\n      const next = segments[i];\r\n\r\n      // Vérifier si les segments peuvent être fusionnés\r\n      if (this.canMergeSegments(current, next)) {\r\n        current.content += next.content;\r\n        current.end = next.end;\r\n      } else {\r\n        merged.push(current);\r\n        current = { ...next };\r\n      }\r\n    }\r\n\r\n    merged.push(current);\r\n    return merged;\r\n  }\r\n\r\n  private canMergeSegments(a: any, b: any): boolean {\r\n    if (a.type !== b.type) return false;\r\n    if (a.type === 'equation') return false; // Ne jamais fusionner les équations\r\n\r\n    // Comparer toutes les propriétés de formatage\r\n    return a.bold === b.bold &&\r\n      a.italic === b.italic &&\r\n      a.code === b.code &&\r\n      a.strikethrough === b.strikethrough &&\r\n      a.underline === b.underline &&\r\n      JSON.stringify(a.link) === JSON.stringify(b.link);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Convertit du texte simple en rich text\r\n   */\r\n  createSimpleRichText(content: string): NotionRichText[] {\r\n    return [{\r\n      type: 'text',\r\n      text: { content }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Crée un rich text avec formatage spécifique\r\n   */\r\n  createFormattedRichText(\r\n    content: string,\r\n    formatting: {\r\n      bold?: boolean;\r\n      italic?: boolean;\r\n      strikethrough?: boolean;\r\n      underline?: boolean;\r\n      code?: boolean;\r\n      color?: NotionColor;\r\n    } = {}\r\n  ): NotionRichText[] {\r\n    return [{\r\n      type: 'text',\r\n      text: { content },\r\n      annotations: formatting\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Crée un rich text avec lien\r\n   */\r\n  createLinkRichText(content: string, url: string): NotionRichText[] {\r\n    return [{\r\n      type: 'text',\r\n      text: {\r\n        content,\r\n        link: { url }\r\n      }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Crée un rich text équation\r\n   */\r\n  createEquationRichText(expression: string): NotionRichText[] {\r\n    return [{\r\n      type: 'equation',\r\n      equation: { expression }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Combine plusieurs rich text arrays\r\n   */\r\n  combineRichText(...richTexts: NotionRichText[][]): NotionRichText[] {\r\n    return richTexts.flat();\r\n  }\r\n\r\n  /**\r\n   * Tronque le rich text si nécessaire\r\n   */\r\n  truncateRichText(richText: NotionRichText[], maxLength: number): NotionRichText[] {\r\n    let currentLength = 0;\r\n    const result: NotionRichText[] = [];\r\n\r\n    for (const item of richText) {\r\n      const content = item.type === 'text'\r\n        ? item.text?.content || ''\r\n        : item.type === 'equation'\r\n          ? item.equation?.expression || ''\r\n          : '';\r\n\r\n      if (currentLength + content.length <= maxLength) {\r\n        result.push(item);\r\n        currentLength += content.length;\r\n      } else {\r\n        const remainingLength = maxLength - currentLength;\r\n        if (remainingLength > 10) {\r\n          const truncatedContent = content.substring(0, remainingLength - 10) + '...';\r\n\r\n          if (item.type === 'text') {\r\n            result.push({\r\n              ...item,\r\n              text: {\r\n                ...item.text,\r\n                content: truncatedContent\r\n              }\r\n            });\r\n          } else if (item.type === 'equation') {\r\n            result.push({\r\n              type: 'text',\r\n              text: { content: truncatedContent }\r\n            });\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}