{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\parsers\\CodeParser.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\parsers\\CodeParser.ts"],"sourcesContent":["import { BaseParser } from './BaseParser';\r\nimport type { ASTNode, ParseOptions } from '../types';\r\n\r\nexport class CodeParser extends BaseParser {\r\n  private readonly validLanguages = [\r\n    'abap', 'actionscript', 'ada', 'apache', 'applescript', 'arduino', 'assembly', 'autohotkey',\r\n    'bash', 'basic', 'batch', 'brainfuck', 'c', 'clojure', 'cmake', 'cobol', 'coffeescript',\r\n    'c++', 'c#', 'crystal', 'css', 'cuda', 'd', 'dart', 'delphi', 'diff', 'django', 'docker',\r\n    'dockerfile', 'elixir', 'elm', 'erlang', 'f#', 'flow', 'fortran', 'fsharp', 'gherkin',\r\n    'git', 'glsl', 'go', 'gradle', 'graphql', 'groovy', 'haml', 'handlebars', 'haskell',\r\n    'haxe', 'html', 'http', 'ini', 'java', 'javascript', 'jinja2', 'json', 'jsx', 'julia',\r\n    'kotlin', 'latex', 'less', 'liquid', 'lisp', 'livescript', 'llvm', 'lua', 'makefile',\r\n    'markdown', 'markup', 'matlab', 'mermaid', 'nim', 'nix', 'objective-c', 'ocaml', 'pascal',\r\n    'perl', 'php', 'plain text', 'powershell', 'prolog', 'protobuf', 'pug', 'puppet', 'python',\r\n    'qml', 'r', 'razor', 'reason', 'ruby', 'rust', 'sass', 'scala', 'scheme', 'scss', 'shell',\r\n    'smalltalk', 'solidity', 'sql', 'stylus', 'svelte', 'swift', 'tcl', 'tex', 'toml',\r\n    'tsx', 'typescript', 'vala', 'vb.net', 'verilog', 'vhdl', 'vim', 'visual basic',\r\n    'vue', 'webassembly', 'xml', 'xquery', 'yaml', 'zig'\r\n  ];\r\n\r\n  constructor(options: ParseOptions = {}) {\r\n    super(options);\r\n  }\r\n\r\n  parse(content: string): ASTNode[] {\r\n    if (!content?.trim()) return [];\r\n\r\n    const language = this.detectLanguage(content);\r\n    const truncatedContent = this.truncateContent(content, this.options.maxCodeLength || 2000);\r\n\r\n    return [this.createCodeNode(truncatedContent, language, true)];\r\n  }\r\n\r\n  private detectLanguage(content: string): string {\r\n    // Check if language is provided in metadata\r\n    if (this.options.metadata?.language) {\r\n      const providedLang = this.options.metadata.language.toLowerCase();\r\n      if (this.validLanguages.includes(providedLang)) {\r\n        return providedLang;\r\n      }\r\n    }\r\n\r\n    // Auto-detect based on content patterns\r\n    const detectedLang = this.autoDetectLanguage(content);\r\n    return this.validLanguages.includes(detectedLang) ? detectedLang : 'plain text';\r\n  }\r\n\r\n  private autoDetectLanguage(content: string): string {\r\n    // JavaScript/TypeScript\r\n    if (this.hasPatterns(content, [\r\n      /\\b(const|let|var)\\s+\\w+/,\r\n      /function\\s*\\(/,\r\n      /=>\\s*{?/,\r\n      /import\\s+.*from/\r\n    ])) {\r\n      if (content.includes('interface ') || content.includes(': string') || content.includes(': number')) {\r\n        return 'typescript';\r\n      }\r\n      return 'javascript';\r\n    }\r\n\r\n    // Python\r\n    if (this.hasPatterns(content, [\r\n      /\\bdef\\s+\\w+\\s*\\(/,\r\n      /\\bclass\\s+\\w+/,\r\n      /\\bimport\\s+\\w+/,\r\n      /\\bfrom\\s+\\w+\\s+import/,\r\n      /:\\s*$/m\r\n    ])) {\r\n      return 'python';\r\n    }\r\n\r\n    // Java\r\n    if (this.hasPatterns(content, [\r\n      /\\bpublic\\s+class\\s+\\w+/,\r\n      /\\bpublic\\s+static\\s+void\\s+main/,\r\n      /\\bimport\\s+java\\./,\r\n      /\\bSystem\\.out\\.println/\r\n    ])) {\r\n      return 'java';\r\n    }\r\n\r\n    // C/C++\r\n    if (this.hasPatterns(content, [\r\n      /#include\\s*<.*>/,\r\n      /\\bint\\s+main\\s*\\(/,\r\n      /\\bstd::/,\r\n      /\\bprintf\\s*\\(/\r\n    ])) {\r\n      return content.includes('std::') || content.includes('#include <iostream>') ? 'c++' : 'c';\r\n    }\r\n\r\n    // C#\r\n    if (this.hasPatterns(content, [\r\n      /\\busing\\s+System/,\r\n      /\\bnamespace\\s+\\w+/,\r\n      /\\bpublic\\s+class\\s+\\w+/,\r\n      /\\bConsole\\.WriteLine/\r\n    ])) {\r\n      return 'c#';\r\n    }\r\n\r\n    // PHP\r\n    if (content.includes('<?php') || this.hasPatterns(content, [\r\n      /\\$\\w+\\s*=/,\r\n      /\\bfunction\\s+\\w+\\s*\\(/,\r\n      /\\becho\\s+/\r\n    ])) {\r\n      return 'php';\r\n    }\r\n\r\n    // Ruby\r\n    if (this.hasPatterns(content, [\r\n      /\\bdef\\s+\\w+/,\r\n      /\\bclass\\s+\\w+/,\r\n      /\\bend\\s*$/m,\r\n      /\\bputs\\s+/\r\n    ])) {\r\n      return 'ruby';\r\n    }\r\n\r\n    // Go\r\n    if (this.hasPatterns(content, [\r\n      /\\bpackage\\s+\\w+/,\r\n      /\\bfunc\\s+\\w+\\s*\\(/,\r\n      /\\bimport\\s+\\(/,\r\n      /\\bfmt\\.Print/\r\n    ])) {\r\n      return 'go';\r\n    }\r\n\r\n    // Rust\r\n    if (this.hasPatterns(content, [\r\n      /\\bfn\\s+\\w+\\s*\\(/,\r\n      /\\blet\\s+mut\\s+/,\r\n      /\\buse\\s+std::/,\r\n      /\\bprintln!\\s*\\(/\r\n    ])) {\r\n      return 'rust';\r\n    }\r\n\r\n    // SQL\r\n    if (this.hasPatterns(content, [\r\n      /\\bSELECT\\s+.*\\bFROM\\b/i,\r\n      /\\bINSERT\\s+INTO\\b/i,\r\n      /\\bUPDATE\\s+.*\\bSET\\b/i,\r\n      /\\bCREATE\\s+TABLE\\b/i\r\n    ])) {\r\n      return 'sql';\r\n    }\r\n\r\n    // HTML\r\n    if (this.hasPatterns(content, [\r\n      /<html\\b/i,\r\n      /<head\\b/i,\r\n      /<body\\b/i,\r\n      /<div\\b.*>/i\r\n    ])) {\r\n      return 'html';\r\n    }\r\n\r\n    // CSS\r\n    if (this.hasPatterns(content, [\r\n      /\\w+\\s*{\\s*[\\w-]+\\s*:/,\r\n      /@media\\s+/,\r\n      /\\.[\\w-]+\\s*{/,\r\n      /#[\\w-]+\\s*{/\r\n    ])) {\r\n      return 'css';\r\n    }\r\n\r\n    // JSON\r\n    if (this.isValidJson(content)) {\r\n      return 'json';\r\n    }\r\n\r\n    // XML\r\n    if (this.hasPatterns(content, [\r\n      /<\\?xml\\s+version/i,\r\n      /<\\/\\w+>/,\r\n      /<\\w+\\s+.*=/\r\n    ])) {\r\n      return 'xml';\r\n    }\r\n\r\n    // YAML\r\n    if (this.hasPatterns(content, [\r\n      /^[\\w-]+:\\s*$/m,\r\n      /^[\\w-]+:\\s+\\w+/m,\r\n      /^\\s*-\\s+\\w+/m\r\n    ])) {\r\n      return 'yaml';\r\n    }\r\n\r\n    // Shell/Bash\r\n    if (this.hasPatterns(content, [\r\n      /^#!/,\r\n      /\\becho\\s+/,\r\n      /\\bif\\s+\\[.*\\]/,\r\n      /\\$\\w+/\r\n    ])) {\r\n      return 'bash';\r\n    }\r\n\r\n    // Kotlin\r\n    if (this.hasPatterns(content, [\r\n      /\\bfun\\s+\\w+\\s*\\(/,\r\n      /\\bval\\s+\\w+/,\r\n      /\\bvar\\s+\\w+/,\r\n      /\\bclass\\s+\\w+.*{/\r\n    ])) {\r\n      return 'kotlin';\r\n    }\r\n\r\n    // Swift\r\n    if (this.hasPatterns(content, [\r\n      /\\bfunc\\s+\\w+\\s*\\(/,\r\n      /\\bvar\\s+\\w+/,\r\n      /\\blet\\s+\\w+/,\r\n      /\\bimport\\s+Foundation/\r\n    ])) {\r\n      return 'swift';\r\n    }\r\n\r\n    // Dart\r\n    if (this.hasPatterns(content, [\r\n      /\\bvoid\\s+main\\s*\\(/,\r\n      /\\bclass\\s+\\w+\\s*{/,\r\n      /\\bimport\\s+'dart:/,\r\n      /\\bString\\s+\\w+/\r\n    ])) {\r\n      return 'dart';\r\n    }\r\n\r\n    // Julia\r\n    if (this.hasPatterns(content, [\r\n      /\\bfunction\\s+\\w+\\s*\\(/,\r\n      /\\bend\\s*$/m,\r\n      /\\busing\\s+\\w+/,\r\n      /\\bprintln\\s*\\(/\r\n    ])) {\r\n      return 'julia';\r\n    }\r\n\r\n    // Scala\r\n    if (this.hasPatterns(content, [\r\n      /\\bobject\\s+\\w+/,\r\n      /\\bdef\\s+\\w+\\s*\\(/,\r\n      /\\bval\\s+\\w+/,\r\n      /\\bimport\\s+scala\\./\r\n    ])) {\r\n      return 'scala';\r\n    }\r\n\r\n    // Haskell\r\n    if (this.hasPatterns(content, [\r\n      /\\w+\\s*::\\s*\\w+/,\r\n      /\\bmodule\\s+\\w+/,\r\n      /\\bimport\\s+\\w+/,\r\n      /\\bwhere\\s*$/m\r\n    ])) {\r\n      return 'haskell';\r\n    }\r\n\r\n    // Elixir\r\n    if (this.hasPatterns(content, [\r\n      /\\bdefmodule\\s+\\w+/,\r\n      /\\bdef\\s+\\w+\\s*\\(/,\r\n      /\\bdo\\s*$/m,\r\n      /\\bIO\\.puts/\r\n    ])) {\r\n      return 'elixir';\r\n    }\r\n\r\n    // Erlang\r\n    if (this.hasPatterns(content, [\r\n      /^-module\\s*\\(/m,\r\n      /^-export\\s*\\(/m,\r\n      /\\w+\\s*\\(.*\\)\\s*->/,\r\n      /\\bio:format/\r\n    ])) {\r\n      return 'erlang';\r\n    }\r\n\r\n    // F#\r\n    if (this.hasPatterns(content, [\r\n      /\\blet\\s+\\w+\\s*=/,\r\n      /\\bmodule\\s+\\w+/,\r\n      /\\bopen\\s+\\w+/,\r\n      /\\bprintfn\\s+/\r\n    ])) {\r\n      return 'f#';\r\n    }\r\n\r\n    // Fortran\r\n    if (this.hasPatterns(content, [\r\n      /\\bprogram\\s+\\w+/i,\r\n      /\\bsubroutine\\s+\\w+/i,\r\n      /\\binteger\\s*::/i,\r\n      /\\bwrite\\s*\\(/i\r\n    ])) {\r\n      return 'fortran';\r\n    }\r\n\r\n    // R\r\n    if (this.hasPatterns(content, [\r\n      /\\blibrary\\s*\\(/,\r\n      /<-\\s*\\w+/,\r\n      /\\bprint\\s*\\(/,\r\n      /\\bdata\\.frame\\s*\\(/\r\n    ])) {\r\n      return 'r';\r\n    }\r\n\r\n    // MATLAB\r\n    if (this.hasPatterns(content, [\r\n      /\\bfunction\\s+.*=\\s*\\w+\\s*\\(/,\r\n      /\\bdisp\\s*\\(/,\r\n      /\\bplot\\s*\\(/,\r\n      /\\bend\\s*$/m\r\n    ])) {\r\n      return 'matlab';\r\n    }\r\n\r\n    // Dockerfile\r\n    if (this.hasPatterns(content, [\r\n      /^FROM\\s+\\w+/m,\r\n      /^RUN\\s+/m,\r\n      /^COPY\\s+/m,\r\n      /^WORKDIR\\s+/m\r\n    ])) {\r\n      return 'dockerfile';\r\n    }\r\n\r\n    // TOML\r\n    if (this.hasPatterns(content, [\r\n      /^\\[[\\w.-]+\\]/m,\r\n      /^[\\w-]+\\s*=\\s*\".*\"/m,\r\n      /^[\\w-]+\\s*=\\s*\\d+/m\r\n    ])) {\r\n      return 'toml';\r\n    }\r\n\r\n    return 'plain text';\r\n  }\r\n\r\n  private hasPatterns(content: string, patterns: RegExp[]): boolean {\r\n    return patterns.some(pattern => pattern.test(content));\r\n  }\r\n\r\n  private isValidJson(content: string): boolean {\r\n    try {\r\n      JSON.parse(content.trim());\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n}"],"version":3}