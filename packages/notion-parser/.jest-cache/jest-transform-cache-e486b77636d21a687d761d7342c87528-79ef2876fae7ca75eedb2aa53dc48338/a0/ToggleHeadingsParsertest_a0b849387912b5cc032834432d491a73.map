{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\parsers\\ToggleHeadingsParser.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\parsers\\ToggleHeadingsParser.test.ts"],"sourcesContent":["/**\r\n * Tests unitaires pour Toggle Headings - Nouvelle fonctionnalitÃ© v2.1\r\n * Couvre la propriÃ©tÃ© is_toggleable pour les headings selon le cahier des charges\r\n */\r\n\r\nimport { parseContent } from '../../../src/parseContent';\r\nimport type { NotionBlock } from '../../../src/types';\r\n\r\ndescribe('Toggle Headings Parser - Nouvelle fonctionnalitÃ© v2.1 â­', () => {\r\n    describe('Toggle Heading Detection (is_toggleable)', () => {\r\n        it('should parse toggle heading with content', () => {\r\n            const toggleMarkdown = `> # Section 1\r\n> This content is inside the toggle\r\n> \r\n> More content here`;\r\n\r\n            const result = parseContent(toggleMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            expect(result.blocks).toHaveLength(1);\r\n\r\n            const headingBlock = result.blocks[0] as any;\r\n            expect(headingBlock.type).toBe('heading_1');\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n            expect(headingBlock.children).toBeDefined();\r\n            expect(headingBlock.children.length).toBeGreaterThan(0);\r\n        });\r\n\r\n        it('should parse all heading levels as toggleable', () => {\r\n            const toggleMarkdown = `> # Heading 1\r\n> Content for H1\r\n\r\n> ## Heading 2  \r\n> Content for H2\r\n\r\n> ### Heading 3\r\n> Content for H3`;\r\n\r\n            const result = parseContent(toggleMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            expect(result.blocks).toHaveLength(3);\r\n\r\n            const [h1, h2, h3] = result.blocks as any[];\r\n\r\n            expect(h1.type).toBe('heading_1');\r\n            expect(h1.heading_1.is_toggleable).toBe(true);\r\n\r\n            expect(h2.type).toBe('heading_2');\r\n            expect(h2.heading_2.is_toggleable).toBe(true);\r\n\r\n            expect(h3.type).toBe('heading_3');\r\n            expect(h3.heading_3.is_toggleable).toBe(true);\r\n        });\r\n\r\n        it('should handle nested toggle headings', () => {\r\n            const nestedToggle = `> # Main Section\r\n> This is the main content\r\n> \r\n> ## Subsection\r\n> This is subsection content\r\n> \r\n> ### Sub-subsection\r\n> This is nested content`;\r\n\r\n            const result = parseContent(nestedToggle, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            const mainHeading = result.blocks[0] as any;\r\n            expect(mainHeading.type).toBe('heading_1');\r\n            expect(mainHeading.heading_1.is_toggleable).toBe(true);\r\n            expect(mainHeading.children).toBeDefined();\r\n\r\n            // Check for nested headings in children\r\n            const hasNestedHeadings = mainHeading.children.some((child: any) =>\r\n                child.type.startsWith('heading_')\r\n            );\r\n            expect(hasNestedHeadings).toBe(true);\r\n        });\r\n\r\n        it('should NOT mark regular headings as toggleable', () => {\r\n            const regularMarkdown = `# Regular Heading 1\r\n\r\nThis is normal content.\r\n\r\n## Regular Heading 2\r\n\r\nMore normal content.`;\r\n\r\n            const result = parseContent(regularMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            const headings = result.blocks.filter((block: any) =>\r\n                block.type.startsWith('heading_')\r\n            ) as any[];\r\n\r\n            headings.forEach(heading => {\r\n                const headingType = heading.type;\r\n                expect(heading[headingType].is_toggleable).toBe(false);\r\n            });\r\n        });\r\n    });\r\n\r\n    describe('Toggle Heading Syntax Validation', () => {\r\n        it('should require > prefix for toggle syntax', () => {\r\n            const nonToggleMarkdown = `# Not a toggle\r\nContent without > prefix`;\r\n\r\n            const result = parseContent(nonToggleMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            const headingBlock = result.blocks[0] as any;\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(false);\r\n        });\r\n\r\n        it('should handle mixed toggle and regular headings', () => {\r\n            const mixedMarkdown = `# Regular Heading\r\n\r\nNormal content.\r\n\r\n> # Toggle Heading\r\n> Toggle content.\r\n\r\n## Another Regular Heading\r\n\r\nMore normal content.`;\r\n\r\n            const result = parseContent(mixedMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            const headings = result.blocks.filter((block: any) =>\r\n                block.type.startsWith('heading_')\r\n            ) as any[];\r\n\r\n            expect(headings).toHaveLength(3);\r\n            expect(headings[0].heading_1.is_toggleable).toBe(false); // Regular\r\n            expect(headings[1].heading_1.is_toggleable).toBe(true);  // Toggle\r\n            expect(headings[2].heading_2.is_toggleable).toBe(false); // Regular\r\n        });\r\n\r\n        it('should handle toggle headings with various content types', () => {\r\n            const complexToggle = `> # Complex Toggle Section\r\n> \r\n> This section contains:\r\n> \r\n> - Bullet points\r\n> - **Bold text**\r\n> - \\`code snippets\\`\r\n> \r\n> 1. Numbered lists\r\n> 2. With multiple items\r\n> \r\n> > Nested blockquotes\r\n> \r\n> \\`\\`\\`javascript\r\n> function example() {\r\n>   return \"code blocks\";\r\n> }\r\n> \\`\\`\\``;\r\n\r\n            const result = parseContent(complexToggle, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            const toggleHeading = result.blocks[0] as any;\r\n            expect(toggleHeading.type).toBe('heading_1');\r\n            expect(toggleHeading.heading_1.is_toggleable).toBe(true);\r\n            expect(toggleHeading.children).toBeDefined();\r\n            expect(toggleHeading.children.length).toBeGreaterThan(1);\r\n\r\n            // Verify different content types in children\r\n            const childTypes = toggleHeading.children.map((child: any) => child.type);\r\n            expect(childTypes).toContain('paragraph');\r\n            expect(childTypes).toContain('bulleted_list_item');\r\n            expect(childTypes).toContain('numbered_list_item');\r\n        });\r\n\r\n        it('should handle empty toggle headings', () => {\r\n            const emptyToggle = `> # Empty Toggle`;\r\n\r\n            const result = parseContent(emptyToggle, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            const headingBlock = result.blocks[0] as any;\r\n            expect(headingBlock.type).toBe('heading_1');\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n            expect(headingBlock.children).toEqual([]);\r\n        });\r\n    });\r\n\r\n    describe('Toggle Heading Structure Validation', () => {\r\n        it('should create valid Notion heading structure with is_toggleable', () => {\r\n            const toggleMarkdown = `> ## Project Overview\r\n> This project includes multiple phases and deliverables.`;\r\n\r\n            const result = parseContent(toggleMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            const headingBlock = result.blocks[0] as any;\r\n\r\n            // Validate complete heading structure\r\n            expect(headingBlock).toMatchObject({\r\n                type: 'heading_2',\r\n                heading_2: {\r\n                    rich_text: expect.any(Array),\r\n                    color: expect.any(String),\r\n                    is_toggleable: true\r\n                },\r\n                children: expect.any(Array),\r\n                has_children: true\r\n            });\r\n\r\n            // Validate rich text content\r\n            expect(headingBlock.heading_2.rich_text).toHaveLength(1);\r\n            expect(headingBlock.heading_2.rich_text[0].text.content).toBe('Project Overview');\r\n        });\r\n\r\n        it('should preserve heading formatting in toggle headings', () => {\r\n            const formattedToggle = `> # **Bold** and *Italic* Toggle\r\n> Content with formatting`;\r\n\r\n            const result = parseContent(formattedToggle, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            const headingBlock = result.blocks[0] as any;\r\n\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n            expect(headingBlock.heading_1.rich_text.length).toBeGreaterThan(1);\r\n\r\n            // Check for formatting annotations\r\n            const richTextSegments = headingBlock.heading_1.rich_text;\r\n            const hasBold = richTextSegments.some((segment: any) =>\r\n                segment.annotations.bold\r\n            );\r\n            const hasItalic = richTextSegments.some((segment: any) =>\r\n                segment.annotations.italic\r\n            );\r\n\r\n            expect(hasBold).toBe(true);\r\n            expect(hasItalic).toBe(true);\r\n        });\r\n\r\n        it('should handle toggle headings with links', () => {\r\n            const toggleWithLink = `> # Check out [this link](https://example.com)\r\n> More information available at the link above.`;\r\n\r\n            const result = parseContent(toggleWithLink, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            const headingBlock = result.blocks[0] as any;\r\n\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n\r\n            // Check for link in rich text\r\n            const hasLink = headingBlock.heading_1.rich_text.some((segment: any) =>\r\n                segment.href !== null\r\n            );\r\n            expect(hasLink).toBe(true);\r\n        });\r\n    });\r\n\r\n    describe('Toggle Heading Options and Configuration', () => {\r\n        it('should handle toggle heading options', () => {\r\n            const toggleMarkdown = `> # Toggle Section\r\n> Content inside`;\r\n\r\n            const withToggle = parseContent(toggleMarkdown, {\r\n                contentType: 'markdown',\r\n                conversion: { convertLinks: true }\r\n            });\r\n\r\n            const withoutToggle = parseContent(toggleMarkdown, {\r\n                contentType: 'markdown',\r\n                conversion: { convertLinks: false }\r\n            });\r\n\r\n            expect(withToggle.success).toBe(true);\r\n            expect(withoutToggle.success).toBe(true);\r\n\r\n            const withToggleHeading = withToggle.blocks[0] as any;\r\n            const withoutToggleHeading = withoutToggle.blocks[0] as any;\r\n\r\n            expect(withToggleHeading.heading_1.is_toggleable).toBe(true);\r\n            expect(withoutToggleHeading.heading_1.is_toggleable).toBe(false);\r\n        });\r\n\r\n        it('should handle maxBlockDepth for nested toggles', () => {\r\n            const deeplyNested = `> # Level 1\r\n> Content 1\r\n> \r\n> ## Level 2\r\n> Content 2\r\n> \r\n> ### Level 3\r\n> Content 3\r\n> \r\n> #### Level 4 (should be limited)\r\n> Content 4`;\r\n\r\n            const result = parseContent(deeplyNested, {\r\n                contentType: 'markdown'\r\n            });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            // Should limit nesting depth\r\n            const mainHeading = result.blocks[0] as any;\r\n            expect(mainHeading.heading_1.is_toggleable).toBe(true);\r\n        });\r\n    });\r\n\r\n    describe('Toggle Heading Performance and Edge Cases', () => {\r\n        it('should handle large toggle sections efficiently', () => {\r\n            const largeContent = Array(1000).fill('> Line of content').join('\\n');\r\n            const largeToggle = `> # Large Toggle Section\\n${largeContent}`;\r\n\r\n            const startTime = Date.now();\r\n            const result = parseContent(largeToggle, { contentType: 'markdown' });\r\n            const processingTime = Date.now() - startTime;\r\n\r\n            expect(result.success).toBe(true);\r\n            expect(processingTime).toBeLessThan(1000); // Should be reasonably fast\r\n\r\n            const headingBlock = result.blocks[0] as any;\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n            expect(headingBlock.children.length).toBeGreaterThan(0);\r\n        });\r\n\r\n        it('should handle malformed toggle syntax gracefully', () => {\r\n            const malformedToggles = [\r\n                '># Malformed (no space after >)',\r\n                '> #Malformed (no space after #)',\r\n                '> # \\n> (empty heading)',\r\n                '> #### Too deep heading\\n> Content'\r\n            ];\r\n\r\n            malformedToggles.forEach(malformed => {\r\n                const result = parseContent(malformed, { contentType: 'markdown' });\r\n\r\n                expect(result.success).toBe(true);\r\n                // Should handle gracefully, may or may not create toggle\r\n                expect(result.blocks.length).toBeGreaterThanOrEqual(0);\r\n            });\r\n        });\r\n\r\n        it('should handle toggle headings with special characters', () => {\r\n            const specialCharToggle = `> # SpÃ©ciÃ¤l ChÃ racters & Ã‰mojis ðŸŽ¯\r\n> Content with Ã¼nÃ¯cÃ¶dÃ© characters`;\r\n\r\n            const result = parseContent(specialCharToggle, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            const headingBlock = result.blocks[0] as any;\r\n\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n            expect(headingBlock.heading_1.rich_text[0].text.content).toContain('ðŸŽ¯');\r\n        });\r\n\r\n        it('should handle multiple consecutive toggle headings', () => {\r\n            const multipleToggles = `> # First Toggle\r\n> First content\r\n\r\n> # Second Toggle  \r\n> Second content\r\n\r\n> # Third Toggle\r\n> Third content`;\r\n\r\n            const result = parseContent(multipleToggles, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            expect(result.blocks).toHaveLength(3);\r\n\r\n            result.blocks.forEach((block: any) => {\r\n                expect(block.type).toBe('heading_1');\r\n                expect(block.heading_1.is_toggleable).toBe(true);\r\n                expect(block.children.length).toBeGreaterThan(0);\r\n            });\r\n        });\r\n    });\r\n\r\n    describe('Toggle Heading Integration', () => {\r\n        it('should work with other markdown features', () => {\r\n            const complexMarkdown = `# Regular Heading\r\n\r\nSome regular content.\r\n\r\n> # Toggle Section\r\n> This toggle contains:\r\n> \r\n> - A list item\r\n> - Another item with **bold** text\r\n> \r\n> \\`\\`\\`javascript\r\n> const code = \"example\";\r\n> \\`\\`\\`\r\n> \r\n> | Table | In | Toggle |\r\n> |-------|----|----|\r\n> | Cell  | 1  | 2  |\r\n\r\n## Another Regular Heading\r\n\r\nMore content.`;\r\n\r\n            const result = parseContent(complexMarkdown, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n\r\n            const headings = result.blocks.filter((block: any) =>\r\n                block.type.startsWith('heading_')\r\n            ) as any[];\r\n\r\n            expect(headings).toHaveLength(3);\r\n            expect(headings[0].heading_1.is_toggleable).toBe(false); // Regular\r\n            expect(headings[1].heading_1.is_toggleable).toBe(true);  // Toggle\r\n            expect(headings[2].heading_2.is_toggleable).toBe(false); // Regular\r\n\r\n            // Verify toggle contains various content types\r\n            const toggleHeading = headings[1];\r\n            const childTypes = toggleHeading.children.map((child: any) => child.type);\r\n            expect(childTypes).toContain('paragraph');\r\n            expect(childTypes).toContain('bulleted_list_item');\r\n            expect(childTypes).toContain('code');\r\n        });\r\n\r\n        it('should preserve toggle structure during validation', () => {\r\n            const toggleMarkdown = `> # Validated Toggle\r\n> Content for validation`;\r\n\r\n            const result = parseContent(toggleMarkdown, {\r\n                contentType: 'markdown',\r\n                includeValidation: true\r\n            });\r\n\r\n            expect(result.success).toBe(true);\r\n            expect(result.validation).toBeDefined();\r\n            expect(result.validation?.isValid).toBe(true);\r\n\r\n            const headingBlock = result.blocks[0] as any;\r\n            expect(headingBlock.heading_1.is_toggleable).toBe(true);\r\n            expect(typeof headingBlock.heading_1.is_toggleable).toBe('boolean');\r\n        });\r\n\r\n        it('should handle toggle headings in mixed content detection', () => {\r\n            const mixedContent = `Some text before.\r\n\r\n> # Toggle in Mixed Content\r\n> Toggle content here.\r\n\r\nMore text after.`;\r\n\r\n            const result = parseContent(mixedContent); // Auto-detection\r\n\r\n            expect(result.success).toBe(true);\r\n            expect(result.metadata?.detectedType).toBe('markdown');\r\n\r\n            const toggleHeading = result.blocks.find((block: any) =>\r\n                block.type === 'heading_1'\r\n            ) as any;\r\n\r\n            expect(toggleHeading).toBeDefined();\r\n            expect(toggleHeading.heading_1.is_toggleable).toBe(true);\r\n        });\r\n    });\r\n\r\n    describe('Toggle Heading Error Handling', () => {\r\n        it('should handle incomplete toggle syntax', () => {\r\n            const incompleteToggle = `> # Incomplete\r\n> Some content\r\nRegular content without >`;\r\n\r\n            const result = parseContent(incompleteToggle, { contentType: 'markdown' });\r\n\r\n            expect(result.success).toBe(true);\r\n            // Should handle gracefully\r\n            expect(result.blocks.length).toBeGreaterThan(0);\r\n        });\r\n\r\n        it('should provide meaningful warnings for toggle issues', () => {\r\n            const problematicToggle = `> #### H4 Toggle (too deep)\r\n> Content that might cause issues`;\r\n\r\n            const result = parseContent(problematicToggle, {\r\n                contentType: 'markdown',\r\n                includeValidation: true\r\n            });\r\n\r\n            expect(result.success).toBe(true);\r\n            // Should convert H4 to H3 (Notion limit)\r\n            const headingBlock = result.blocks[0] as any;\r\n            expect(headingBlock.type).toBe('heading_3'); // Normalized\r\n        });\r\n    });\r\n});"],"version":3}