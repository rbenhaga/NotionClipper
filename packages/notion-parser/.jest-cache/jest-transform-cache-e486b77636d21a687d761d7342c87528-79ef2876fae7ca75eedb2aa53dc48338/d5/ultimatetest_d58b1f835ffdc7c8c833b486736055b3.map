{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\comprehensive\\ultimate.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\comprehensive\\ultimate.test.ts"],"sourcesContent":["/**\r\n * Test Ultimate Exhaustif - Version Jest Professionnelle\r\n * Suite complÃ¨te reprenant la logique du test original avec une structure Jest moderne\r\n */\r\n\r\nimport { parseContent } from '../../src/parseContent';\r\nimport { testHelpers, ContentGenerators } from '../helpers/test-helpers';\r\n\r\n// Types locaux\r\ntype TestBlock = {\r\n  type: string;\r\n  [key: string]: any;\r\n};\r\n\r\ntype ValidationTestCase = {\r\n  name: string;\r\n  input: string;\r\n  expectedSuccess: boolean;\r\n  description: string;\r\n  options?: any;\r\n};\r\n\r\ndescribe('Ultimate Exhaustive Test Suite', () => {\r\n  const globalStats = {\r\n    totalTests: 0,\r\n    passedTests: 0,\r\n    failedTests: 0,\r\n    startTime: Date.now(),\r\n    errors: [] as string[]\r\n  };\r\n\r\n  beforeAll(() => {\r\n    console.log('ðŸŽ¯ ========== DÃ‰MARRAGE TEST ULTIMATE EXHAUSTIF ==========');\r\n    globalStats.startTime = Date.now();\r\n  });\r\n\r\n  afterAll(() => {\r\n    const totalTime = Date.now() - globalStats.startTime;\r\n    const successRate = globalStats.totalTests > 0 \r\n      ? (globalStats.passedTests / globalStats.totalTests) * 100 \r\n      : 0;\r\n    \r\n    console.log('\\nðŸ ========== RÃ‰SULTATS FINAUX ==========');\r\n    console.log(`âœ… Tests rÃ©ussis: ${globalStats.passedTests}/${globalStats.totalTests}`);\r\n    console.log(`âŒ Tests Ã©chouÃ©s: ${globalStats.failedTests}`);\r\n    console.log(`ðŸ“ˆ Taux de rÃ©ussite: ${successRate.toFixed(2)}%`);\r\n    console.log(`â±ï¸ Temps total: ${totalTime}ms`);\r\n    \r\n    if (successRate >= 95) {\r\n      console.log('ðŸŽ‰ VALIDATION RÃ‰USSIE - Parser prÃªt pour production !');\r\n    } else {\r\n      console.log('âš ï¸ VALIDATION Ã‰CHOUÃ‰E - Corrections nÃ©cessaires');\r\n    }\r\n  });\r\n\r\n  describe('Phase 1: DÃ©tection Automatique (PrioritÃ© Critique)', () => {\r\n    const detectionTests: ValidationTestCase[] = [\r\n      {\r\n        name: 'URL Detection',\r\n        input: 'https://www.notion.so',\r\n        expectedSuccess: true,\r\n        description: 'Should detect URLs with high confidence (>0.90)',\r\n        options: { includeMetadata: true }\r\n      },\r\n      {\r\n        name: 'Code Detection',\r\n        input: 'function hello() {\\n  console.log(\"Hello World\");\\n  return true;\\n}',\r\n        expectedSuccess: true,\r\n        description: 'Should detect JavaScript code with good confidence (>0.70)',\r\n        options: { includeMetadata: true }\r\n      },\r\n      {\r\n        name: 'CSV Detection',\r\n        input: 'Name,Age,City\\nJohn,30,Paris\\nJane,25,London',\r\n        expectedSuccess: true,\r\n        description: 'Should detect CSV format with good confidence (>0.70)',\r\n        options: { includeMetadata: true }\r\n      },\r\n      {\r\n        name: 'JSON Detection',\r\n        input: '{\\n  \"name\": \"John\",\\n  \"age\": 30,\\n  \"city\": \"Paris\"\\n}',\r\n        expectedSuccess: true,\r\n        description: 'Should detect JSON with good confidence (>0.70)',\r\n        options: { includeMetadata: true }\r\n      },\r\n      {\r\n        name: 'Markdown Detection',\r\n        input: '# Title\\n**Bold** and *italic*\\n- List item',\r\n        expectedSuccess: true,\r\n        description: 'Should detect Markdown with moderate confidence (>0.40)',\r\n        options: { includeMetadata: true }\r\n      },\r\n      {\r\n        name: 'Text Fallback',\r\n        input: 'Just plain text without any special formatting',\r\n        expectedSuccess: true,\r\n        description: 'Should fallback to text with perfect confidence (1.0)',\r\n        options: { includeMetadata: true }\r\n      }\r\n    ];\r\n\r\n    detectionTests.forEach(test => {\r\n      it(`should handle ${test.name}`, () => {\r\n        globalStats.totalTests++;\r\n        \r\n        const result = parseContent(test.input, test.options);\r\n        \r\n        try {\r\n          testHelpers.expectValidResult(result);\r\n          expect(result.metadata).toBeDefined();\r\n          expect(result.metadata?.detectedType).toBeDefined();\r\n          expect(result.metadata?.confidence).toBeGreaterThan(0);\r\n          \r\n          globalStats.passedTests++;\r\n        } catch (error) {\r\n          globalStats.failedTests++;\r\n          globalStats.errors.push(`${test.name}: ${error}`);\r\n          throw error;\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Phase 2: Parsers SpÃ©cialisÃ©s (FonctionnalitÃ©s ComplÃ¨tes)', () => {\r\n    it('should parse all Markdown header levels', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = '# H1 Title\\n## H2 Subtitle\\n### H3 Section';\r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        testHelpers.expectBlockTypes(result.blocks as TestBlock[], ['heading_1', 'heading_2', 'heading_3']);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Headers: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n\r\n    it('should parse nested lists with proper hierarchy', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = `- Bullet 1\r\n- Bullet 2\r\n  - Nested 1\r\n    - Deep nested\r\n\r\n1. Numbered 1\r\n2. Numbered 2\r\n\r\n- [ ] Todo unchecked\r\n- [x] Todo checked`;\r\n      \r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        testHelpers.expectBlockTypes(result.blocks as TestBlock[], ['bulleted_list_item', 'numbered_list_item', 'to_do']);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Lists: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n\r\n    it('should parse callouts correctly', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = `> [!note] Note\\n> Content\\n\\n> [!info] Info\\n> Content\\n\\n> [!tip] Tip\\n> Content`;\r\n      \r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        const callouts = (result.blocks as TestBlock[]).filter(b => b.type === 'callout');\r\n        expect(callouts.length).toBeGreaterThanOrEqual(3);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Callouts: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Phase 3: Rich Text AvancÃ© (Formatage Complexe)', () => {\r\n    it('should handle nested formatting correctly', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = '**bold with `code` inside** *italic with `code` inside*';\r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        \r\n        let hasNestedFormatting = false;\r\n        (result.blocks as TestBlock[]).forEach(block => {\r\n          if (block.paragraph?.rich_text) {\r\n            block.paragraph.rich_text.forEach((segment: any) => {\r\n              const annotations = segment.annotations || {};\r\n              const annotationCount = Object.keys(annotations).filter(key => annotations[key]).length;\r\n              if (annotationCount > 1) {\r\n                hasNestedFormatting = true;\r\n              }\r\n            });\r\n          }\r\n        });\r\n        \r\n        expect(hasNestedFormatting).toBe(true);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Nested formatting: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n\r\n    it('should auto-detect URLs in text', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = 'Visit https://www.notion.so for more information.';\r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        \r\n        let hasAutoLink = false;\r\n        (result.blocks as TestBlock[]).forEach(block => {\r\n          if (block.paragraph?.rich_text) {\r\n            block.paragraph.rich_text.forEach((segment: any) => {\r\n              if (segment.href && segment.href.includes('notion.so')) {\r\n                hasAutoLink = true;\r\n              }\r\n            });\r\n          }\r\n        });\r\n        \r\n        expect(hasAutoLink).toBe(true);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Auto-link: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Phase 4: Blocs Notion Complets (25+ Types)', () => {\r\n    it('should create comprehensive block types', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = ContentGenerators.generateComplexContent();\r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        \r\n        const blockTypes = [...new Set((result.blocks as TestBlock[]).map(b => b.type))];\r\n        const expectedMinimumTypes = 8;\r\n        \r\n        expect(blockTypes.length).toBeGreaterThanOrEqual(expectedMinimumTypes);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Block types: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Phase 5: Configuration Options (FlexibilitÃ©)', () => {\r\n    it('should respect detection options', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const codeContent = 'function test() { console.log(\"hello\"); }';\r\n      \r\n      const withDetection = parseContent(codeContent, {\r\n        detection: { enableCodeDetection: true },\r\n        includeMetadata: true\r\n      });\r\n      \r\n      const withoutDetection = parseContent(codeContent, {\r\n        detection: { enableCodeDetection: false },\r\n        includeMetadata: true\r\n      });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(withDetection);\r\n        testHelpers.expectValidResult(withoutDetection);\r\n        \r\n        const differentResults = withDetection.metadata?.detectedType !== withoutDetection.metadata?.detectedType;\r\n        expect(differentResults).toBe(true);\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Detection options: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n\r\n    it('should include metadata when requested', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const result = parseContent('Test content', { includeMetadata: true });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        expect(result.metadata).toBeDefined();\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Metadata: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Phase 6: Edge Cases (Robustesse)', () => {\r\n    const edgeCases = [\r\n      { name: 'Empty content', content: '', shouldSucceed: true },\r\n      { name: 'Null content', content: null, shouldSucceed: true },\r\n      { name: 'Undefined content', content: undefined, shouldSucceed: true },\r\n      { name: 'Malformed markdown', content: '**unclosed bold', shouldSucceed: true },\r\n      { name: 'Very long line', content: 'a'.repeat(1000), shouldSucceed: true }\r\n    ];\r\n\r\n    edgeCases.forEach(testCase => {\r\n      it(`should handle ${testCase.name} gracefully`, () => {\r\n        globalStats.totalTests++;\r\n        \r\n        try {\r\n          const result = parseContent(testCase.content as any);\r\n          expect(result.success).toBe(testCase.shouldSucceed);\r\n          globalStats.passedTests++;\r\n        } catch (error) {\r\n          globalStats.failedTests++;\r\n          globalStats.errors.push(`Edge case ${testCase.name}: ${error}`);\r\n          throw error;\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Phase 7: Performance Validation', () => {\r\n    it('should process content efficiently', () => {\r\n      globalStats.totalTests++;\r\n      \r\n      const content = ContentGenerators.generateMarkdown('medium');\r\n      \r\n      const { result, metrics } = testHelpers.measurePerformance(() => {\r\n        return parseContent(content, { contentType: 'markdown' });\r\n      });\r\n      \r\n      try {\r\n        testHelpers.expectValidResult(result);\r\n        expect(metrics.duration).toBeLessThan(1000); // 1 second max\r\n        globalStats.passedTests++;\r\n      } catch (error) {\r\n        globalStats.failedTests++;\r\n        globalStats.errors.push(`Performance: ${error}`);\r\n        throw error;\r\n      }\r\n    });\r\n  });\r\n});"],"version":3}