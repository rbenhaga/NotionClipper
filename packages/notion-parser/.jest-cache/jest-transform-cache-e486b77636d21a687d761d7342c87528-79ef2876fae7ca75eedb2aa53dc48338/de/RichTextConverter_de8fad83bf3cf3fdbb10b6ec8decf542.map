{"version":3,"names":["cov_27sem404wr","actualCoverage","s","ContentSanitizer_1","require","RichTextConverter","parseRichText","text","options","f","b","sanitizedText","ContentSanitizer","sanitizeText","processedText","processEscapes","tokens","tokenizeText","tokensToRichText","escapeMap","Map","counter","escapedChars","result","forEach","char","escapedPattern","RegExp","replace","placeholder","set","_escapeMap","restoreEscapes","patterns","regex","type","priority","convertLinks","push","allMatches","pattern","match","source","exec","start","index","end","length","content","url","expression","sanitizeUrl","sort","a","map","m","originalText","segments","createSegments","segment","equation","annotations","bold","italic","code","strikethrough","underline","textContent","link","Object","keys","undefined","href","changePoints","Set","add","token","sortedPoints","Array","from","i","slice","applicableTokens","filter","equationToken","find","t","mergeAdjacentSegments","trim","merged","current","next","canMergeSegments","JSON","stringify","createSimpleRichText","createFormattedRichText","formatting","createLinkRichText","createEquationRichText","combineRichText","richTexts","flat","truncateRichText","richText","maxLength","currentLength","item","remainingLength","truncatedContent","substring","exports"],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\converters\\RichTextConverter.ts"],"sourcesContent":["import type { NotionRichText, NotionColor } from '../types';\r\nimport { ContentSanitizer } from '../security/ContentSanitizer';\r\n\r\ninterface TextToken {\r\n  type: 'text' | 'bold' | 'italic' | 'code' | 'strikethrough' | 'underline' | 'link' | 'auto-link' | 'equation' | 'bold-italic';\r\n  content: string;\r\n  start: number;\r\n  end: number;\r\n  url?: string;\r\n  expression?: string;\r\n}\r\n\r\n\r\n\r\nexport class RichTextConverter {\r\n  parseRichText(text: string, options?: { convertLinks?: boolean }): NotionRichText[] {\r\n    if (!text) return [];\r\n\r\n    // Sanitiser le contenu d'abord\r\n    const sanitizedText = ContentSanitizer.sanitizeText(text);\r\n\r\n    // Traiter les échappements d'abord\r\n    const processedText = this.processEscapes(sanitizedText);\r\n\r\n    // Nouvelle approche: tokenisation puis reconstruction\r\n    const tokens = this.tokenizeText(processedText, options);\r\n    return this.tokensToRichText(tokens, processedText);\r\n  }\r\n\r\n  private processEscapes(text: string): string {\r\n    // Remplacer les échappements par des placeholders temporaires\r\n    const escapeMap = new Map<string, string>();\r\n    let counter = 0;\r\n\r\n    // Traiter les échappements de caractères spéciaux\r\n    const escapedChars = ['*', '_', '`', '~', '[', ']', '(', ')', '$'];\r\n\r\n    let result = text;\r\n\r\n    escapedChars.forEach(char => {\r\n      const escapedPattern = new RegExp(`\\\\\\\\\\\\${char}`, 'g');\r\n      result = result.replace(escapedPattern, () => {\r\n        const placeholder = `§ESC${counter++}§`;\r\n        escapeMap.set(placeholder, char);\r\n        return placeholder;\r\n      });\r\n    });\r\n\r\n    // Stocker la map pour la restauration\r\n    (this as any)._escapeMap = escapeMap;\r\n\r\n    return result;\r\n  }\r\n\r\n  private restoreEscapes(text: string): string {\r\n    const escapeMap = (this as any)._escapeMap as Map<string, string>;\r\n    if (!escapeMap) return text;\r\n\r\n    let result = text;\r\n    escapeMap.forEach((char, placeholder) => {\r\n      result = result.replace(new RegExp(placeholder, 'g'), char);\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  private tokenizeText(text: string, options?: { convertLinks?: boolean }): TextToken[] {\r\n\r\n    // Définir tous les patterns avec leurs priorités\r\n    const patterns: Array<{ regex: RegExp; type: TextToken['type']; priority: number }> = [\r\n      // Équations (priorité la plus haute - pas d'imbrication)\r\n      { regex: /\\$([^$]+)\\$/g, type: 'equation', priority: 1 },\r\n\r\n      // Code inline (priorité haute - peut être imbriqué)\r\n      { regex: /`([^`]+)`/g, type: 'code', priority: 2 },\r\n\r\n      // Bold + Italic (***text***)\r\n      { regex: /\\*\\*\\*([^*]+)\\*\\*\\*/g, type: 'bold-italic', priority: 4 },\r\n\r\n      // Bold (**text**)\r\n      { regex: /\\*\\*([^*]+)\\*\\*/g, type: 'bold', priority: 5 },\r\n\r\n      // Underline (__text__)\r\n      { regex: /__([^_]+)__/g, type: 'underline', priority: 6 },\r\n\r\n      // Italic (*text* or _text_)\r\n      { regex: /\\*([^*]+)\\*/g, type: 'italic', priority: 7 },\r\n      { regex: /_([^_]+)_/g, type: 'italic', priority: 7 },\r\n\r\n      // Strikethrough (~~text~~)\r\n      { regex: /~~([^~]+)~~/g, type: 'strikethrough', priority: 8 }\r\n    ];\r\n\r\n    // Ajouter les patterns de liens seulement si convertLinks n'est pas false\r\n    if (options?.convertLinks !== false) {\r\n      patterns.push(\r\n        // Links (priorité haute - peut contenir du formatage)\r\n        { regex: /\\[([^\\]]+)\\]\\(([^)]+)\\)/g, type: 'link', priority: 3 },\r\n\r\n        // URLs auto-détectées (priorité haute)\r\n        { regex: /(https?:\\/\\/[^\\s<>\"{}|\\\\^`[\\]]+)/g, type: 'auto-link', priority: 3 }\r\n      );\r\n    }\r\n\r\n    // Trouver tous les matches avec leurs positions\r\n    const allMatches: Array<{\r\n      match: RegExpExecArray;\r\n      type: string;\r\n      priority: number;\r\n      start: number;\r\n      end: number;\r\n      content: string;\r\n      url?: string;\r\n      expression?: string;\r\n    }> = [];\r\n\r\n    patterns.forEach(pattern => {\r\n      let match;\r\n      const regex = new RegExp(pattern.regex.source, 'g');\r\n\r\n      while ((match = regex.exec(text)) !== null) {\r\n        const start = match.index;\r\n        const end = match.index + match[0].length;\r\n\r\n        let content = match[1];\r\n        let url: string | undefined;\r\n        let expression: string | undefined;\r\n\r\n        if (pattern.type === 'link') {\r\n          content = match[1];\r\n          url = ContentSanitizer.sanitizeUrl(match[2]);\r\n        } else if (pattern.type === 'auto-link') {\r\n          content = match[1];\r\n          url = ContentSanitizer.sanitizeUrl(match[1]);\r\n        } else if (pattern.type === 'equation') {\r\n          expression = match[1];\r\n          content = match[1];\r\n        } else if (pattern.type === 'bold-italic') {\r\n          // Traiter comme bold ET italic\r\n          allMatches.push({\r\n            match,\r\n            type: 'bold',\r\n            priority: pattern.priority,\r\n            start,\r\n            end,\r\n            content\r\n          });\r\n          allMatches.push({\r\n            match,\r\n            type: 'italic',\r\n            priority: pattern.priority,\r\n            start,\r\n            end,\r\n            content\r\n          });\r\n          continue;\r\n        }\r\n\r\n        allMatches.push({\r\n          match,\r\n          type: pattern.type,\r\n          priority: pattern.priority,\r\n          start,\r\n          end,\r\n          content,\r\n          url,\r\n          expression\r\n        });\r\n      }\r\n    });\r\n\r\n    // Trier par position puis par priorité\r\n    allMatches.sort((a, b) => {\r\n      if (a.start !== b.start) return a.start - b.start;\r\n      return a.priority - b.priority;\r\n    });\r\n\r\n    return allMatches.map(m => ({\r\n      type: m.type as TextToken['type'],\r\n      content: m.content,\r\n      start: m.start,\r\n      end: m.end,\r\n      url: m.url,\r\n      expression: m.expression\r\n    }));\r\n  }\r\n\r\n  private tokensToRichText(tokens: TextToken[], originalText: string): NotionRichText[] {\r\n    if (tokens.length === 0) {\r\n      return [{\r\n        type: 'text',\r\n        text: { content: this.restoreEscapes(originalText) }\r\n      }];\r\n    }\r\n\r\n    const result: NotionRichText[] = [];\r\n    const segments = this.createSegments(tokens, originalText);\r\n\r\n    segments.forEach(segment => {\r\n      if (segment.type === 'equation') {\r\n        result.push({\r\n          type: 'equation',\r\n          equation: { expression: segment.expression || segment.content }\r\n        });\r\n      } else {\r\n        const annotations: any = {};\r\n\r\n        // Appliquer toutes les annotations qui s'appliquent à ce segment\r\n        if (segment.bold) annotations.bold = true;\r\n        if (segment.italic) annotations.italic = true;\r\n        if (segment.code) annotations.code = true;\r\n        if (segment.strikethrough) annotations.strikethrough = true;\r\n        if (segment.underline) annotations.underline = true;\r\n\r\n        const textContent: any = { content: segment.content };\r\n        if (segment.link) {\r\n          textContent.link = { url: segment.link.url };\r\n        }\r\n\r\n        // Restaurer les échappements dans le contenu\r\n        textContent.content = this.restoreEscapes(textContent.content);\r\n\r\n        result.push({\r\n          type: 'text',\r\n          text: textContent,\r\n          annotations: Object.keys(annotations).length > 0 ? annotations : undefined,\r\n          href: segment.link ? segment.link.url : null\r\n        });\r\n      }\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  private createSegments(tokens: TextToken[], originalText: string): Array<{\r\n    content: string;\r\n    start: number;\r\n    end: number;\r\n    type: 'text' | 'equation';\r\n    bold?: boolean;\r\n    italic?: boolean;\r\n    code?: boolean;\r\n    strikethrough?: boolean;\r\n    underline?: boolean;\r\n    link?: { url: string };\r\n    expression?: string;\r\n  }> {\r\n    // Créer une liste de tous les points de changement\r\n    const changePoints = new Set<number>();\r\n    changePoints.add(0);\r\n    changePoints.add(originalText.length);\r\n\r\n    tokens.forEach(token => {\r\n      changePoints.add(token.start);\r\n      changePoints.add(token.end);\r\n    });\r\n\r\n    const sortedPoints = Array.from(changePoints).sort((a, b) => a - b);\r\n    const segments: Array<{\r\n      content: string;\r\n      start: number;\r\n      end: number;\r\n      type: 'text' | 'equation';\r\n      bold?: boolean;\r\n      italic?: boolean;\r\n      code?: boolean;\r\n      strikethrough?: boolean;\r\n      underline?: boolean;\r\n      link?: { url: string };\r\n      expression?: string;\r\n    }> = [];\r\n\r\n    // Créer des segments entre chaque point de changement\r\n    for (let i = 0; i < sortedPoints.length - 1; i++) {\r\n      const start = sortedPoints[i];\r\n      const end = sortedPoints[i + 1];\r\n\r\n      if (start === end) continue;\r\n\r\n      const content = originalText.slice(start, end);\r\n      if (!content) continue;\r\n\r\n      // Déterminer quels tokens s'appliquent à ce segment\r\n      const applicableTokens = tokens.filter(token => {\r\n        // Un token s'applique si le segment est complètement à l'intérieur du token\r\n        return token.start <= start && end <= token.end;\r\n      });\r\n\r\n      // Vérifier si c'est une équation (priorité absolue)\r\n      const equationToken = applicableTokens.find(t => t.type === 'equation');\r\n      if (equationToken) {\r\n        segments.push({\r\n          content: equationToken.content,\r\n          start,\r\n          end,\r\n          type: 'equation',\r\n          expression: equationToken.expression\r\n        });\r\n        continue;\r\n      }\r\n\r\n      // Construire les annotations pour ce segment\r\n      const segment: any = {\r\n        content,\r\n        start,\r\n        end,\r\n        type: 'text'\r\n      };\r\n\r\n      applicableTokens.forEach(token => {\r\n        switch (token.type) {\r\n          case 'bold':\r\n            segment.bold = true;\r\n            break;\r\n          case 'italic':\r\n            segment.italic = true;\r\n            break;\r\n          case 'code':\r\n            segment.code = true;\r\n            break;\r\n          case 'strikethrough':\r\n            segment.strikethrough = true;\r\n            break;\r\n          case 'underline':\r\n            segment.underline = true;\r\n            break;\r\n          case 'link':\r\n          case 'auto-link':\r\n            segment.link = { url: token.url! };\r\n            break;\r\n        }\r\n      });\r\n\r\n      segments.push(segment);\r\n    }\r\n\r\n    // Filtrer les segments vides et fusionner les segments adjacents identiques\r\n    return this.mergeAdjacentSegments(segments.filter(s => s.content.trim() || s.type === 'equation'));\r\n  }\r\n\r\n  private mergeAdjacentSegments(segments: any[]): any[] {\r\n    if (segments.length <= 1) return segments;\r\n\r\n    const merged: any[] = [];\r\n    let current = { ...segments[0] };\r\n\r\n    for (let i = 1; i < segments.length; i++) {\r\n      const next = segments[i];\r\n\r\n      // Vérifier si les segments peuvent être fusionnés\r\n      if (this.canMergeSegments(current, next)) {\r\n        current.content += next.content;\r\n        current.end = next.end;\r\n      } else {\r\n        merged.push(current);\r\n        current = { ...next };\r\n      }\r\n    }\r\n\r\n    merged.push(current);\r\n    return merged;\r\n  }\r\n\r\n  private canMergeSegments(a: any, b: any): boolean {\r\n    if (a.type !== b.type) return false;\r\n    if (a.type === 'equation') return false; // Ne jamais fusionner les équations\r\n\r\n    // Comparer toutes les propriétés de formatage\r\n    return a.bold === b.bold &&\r\n      a.italic === b.italic &&\r\n      a.code === b.code &&\r\n      a.strikethrough === b.strikethrough &&\r\n      a.underline === b.underline &&\r\n      JSON.stringify(a.link) === JSON.stringify(b.link);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Convertit du texte simple en rich text\r\n   */\r\n  createSimpleRichText(content: string): NotionRichText[] {\r\n    return [{\r\n      type: 'text',\r\n      text: { content }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Crée un rich text avec formatage spécifique\r\n   */\r\n  createFormattedRichText(\r\n    content: string,\r\n    formatting: {\r\n      bold?: boolean;\r\n      italic?: boolean;\r\n      strikethrough?: boolean;\r\n      underline?: boolean;\r\n      code?: boolean;\r\n      color?: NotionColor;\r\n    } = {}\r\n  ): NotionRichText[] {\r\n    return [{\r\n      type: 'text',\r\n      text: { content },\r\n      annotations: formatting\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Crée un rich text avec lien\r\n   */\r\n  createLinkRichText(content: string, url: string): NotionRichText[] {\r\n    return [{\r\n      type: 'text',\r\n      text: {\r\n        content,\r\n        link: { url }\r\n      }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Crée un rich text équation\r\n   */\r\n  createEquationRichText(expression: string): NotionRichText[] {\r\n    return [{\r\n      type: 'equation',\r\n      equation: { expression }\r\n    }];\r\n  }\r\n\r\n  /**\r\n   * Combine plusieurs rich text arrays\r\n   */\r\n  combineRichText(...richTexts: NotionRichText[][]): NotionRichText[] {\r\n    return richTexts.flat();\r\n  }\r\n\r\n  /**\r\n   * Tronque le rich text si nécessaire\r\n   */\r\n  truncateRichText(richText: NotionRichText[], maxLength: number): NotionRichText[] {\r\n    let currentLength = 0;\r\n    const result: NotionRichText[] = [];\r\n\r\n    for (const item of richText) {\r\n      const content = item.type === 'text'\r\n        ? item.text?.content || ''\r\n        : item.type === 'equation'\r\n          ? item.equation?.expression || ''\r\n          : '';\r\n\r\n      if (currentLength + content.length <= maxLength) {\r\n        result.push(item);\r\n        currentLength += content.length;\r\n      } else {\r\n        const remainingLength = maxLength - currentLength;\r\n        if (remainingLength > 10) {\r\n          const truncatedContent = content.substring(0, remainingLength - 10) + '...';\r\n\r\n          if (item.type === 'text') {\r\n            result.push({\r\n              ...item,\r\n              text: {\r\n                ...item.text,\r\n                content: truncatedContent\r\n              }\r\n            });\r\n          } else if (item.type === 'equation') {\r\n            result.push({\r\n              type: 'text',\r\n              text: { content: truncatedContent }\r\n            });\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA2BG;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;AA1BH,MAAAC,kBAAA;AAAA;AAAA,CAAAH,cAAA,GAAAE,CAAA,OAAAE,OAAA;AAaA,MAAaC,iBAAiB;EAC5BC,aAAaA,CAACC,IAAY,EAAEC,OAAoC;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAC9D,IAAI,CAACK,IAAI,EAAE;MAAA;MAAAP,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MAAA,OAAO,EAAE;IAAA,CAAC;IAAA;IAAA;MAAAF,cAAA,GAAAU,CAAA;IAAA;IAErB;IACA,MAAMC,aAAa;IAAA;IAAA,CAAAX,cAAA,GAAAE,CAAA,OAAGC,kBAAA,CAAAS,gBAAgB,CAACC,YAAY,CAACN,IAAI,CAAC;IAEzD;IACA,MAAMO,aAAa;IAAA;IAAA,CAAAd,cAAA,GAAAE,CAAA,OAAG,IAAI,CAACa,cAAc,CAACJ,aAAa,CAAC;IAExD;IACA,MAAMK,MAAM;IAAA;IAAA,CAAAhB,cAAA,GAAAE,CAAA,OAAG,IAAI,CAACe,YAAY,CAACH,aAAa,EAAEN,OAAO,CAAC;IAAC;IAAAR,cAAA,GAAAE,CAAA;IACzD,OAAO,IAAI,CAACgB,gBAAgB,CAACF,MAAM,EAAEF,aAAa,CAAC;EACrD;EAEQC,cAAcA,CAACR,IAAY;IAAA;IAAAP,cAAA,GAAAS,CAAA;IACjC;IACA,MAAMU,SAAS;IAAA;IAAA,CAAAnB,cAAA,GAAAE,CAAA,OAAG,IAAIkB,GAAG,EAAkB;IAC3C,IAAIC,OAAO;IAAA;IAAA,CAAArB,cAAA,GAAAE,CAAA,QAAG,CAAC;IAEf;IACA,MAAMoB,YAAY;IAAA;IAAA,CAAAtB,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAElE,IAAIqB,MAAM;IAAA;IAAA,CAAAvB,cAAA,GAAAE,CAAA,QAAGK,IAAI;IAAC;IAAAP,cAAA,GAAAE,CAAA;IAElBoB,YAAY,CAACE,OAAO,CAACC,IAAI,IAAG;MAAA;MAAAzB,cAAA,GAAAS,CAAA;MAC1B,MAAMiB,cAAc;MAAA;MAAA,CAAA1B,cAAA,GAAAE,CAAA,QAAG,IAAIyB,MAAM,CAAC,SAASF,IAAI,EAAE,EAAE,GAAG,CAAC;MAAC;MAAAzB,cAAA,GAAAE,CAAA;MACxDqB,MAAM,GAAGA,MAAM,CAACK,OAAO,CAACF,cAAc,EAAE,MAAK;QAAA;QAAA1B,cAAA,GAAAS,CAAA;QAC3C,MAAMoB,WAAW;QAAA;QAAA,CAAA7B,cAAA,GAAAE,CAAA,QAAG,OAAOmB,OAAO,EAAE,GAAG;QAAC;QAAArB,cAAA,GAAAE,CAAA;QACxCiB,SAAS,CAACW,GAAG,CAACD,WAAW,EAAEJ,IAAI,CAAC;QAAC;QAAAzB,cAAA,GAAAE,CAAA;QACjC,OAAO2B,WAAW;MACpB,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF;IAAA;IAAA7B,cAAA,GAAAE,CAAA;IACC,IAAY,CAAC6B,UAAU,GAAGZ,SAAS;IAAC;IAAAnB,cAAA,GAAAE,CAAA;IAErC,OAAOqB,MAAM;EACf;EAEQS,cAAcA,CAACzB,IAAY;IAAA;IAAAP,cAAA,GAAAS,CAAA;IACjC,MAAMU,SAAS;IAAA;IAAA,CAAAnB,cAAA,GAAAE,CAAA,QAAI,IAAY,CAAC6B,UAAiC;IAAC;IAAA/B,cAAA,GAAAE,CAAA;IAClE,IAAI,CAACiB,SAAS,EAAE;MAAA;MAAAnB,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MAAA,OAAOK,IAAI;IAAA,CAAC;IAAA;IAAA;MAAAP,cAAA,GAAAU,CAAA;IAAA;IAE5B,IAAIa,MAAM;IAAA;IAAA,CAAAvB,cAAA,GAAAE,CAAA,QAAGK,IAAI;IAAC;IAAAP,cAAA,GAAAE,CAAA;IAClBiB,SAAS,CAACK,OAAO,CAAC,CAACC,IAAI,EAAEI,WAAW,KAAI;MAAA;MAAA7B,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACtCqB,MAAM,GAAGA,MAAM,CAACK,OAAO,CAAC,IAAID,MAAM,CAACE,WAAW,EAAE,GAAG,CAAC,EAAEJ,IAAI,CAAC;IAC7D,CAAC,CAAC;IAAC;IAAAzB,cAAA,GAAAE,CAAA;IAEH,OAAOqB,MAAM;EACf;EAEQN,YAAYA,CAACV,IAAY,EAAEC,OAAoC;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAErE;IACA,MAAMwB,QAAQ;IAAA;IAAA,CAAAjC,cAAA,GAAAE,CAAA,QAAwE;IACpF;IACA;MAAEgC,KAAK,EAAE,cAAc;MAAEC,IAAI,EAAE,UAAU;MAAEC,QAAQ,EAAE;IAAC,CAAE;IAExD;IACA;MAAEF,KAAK,EAAE,YAAY;MAAEC,IAAI,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAC,CAAE;IAElD;IACA;MAAEF,KAAK,EAAE,sBAAsB;MAAEC,IAAI,EAAE,aAAa;MAAEC,QAAQ,EAAE;IAAC,CAAE;IAEnE;IACA;MAAEF,KAAK,EAAE,kBAAkB;MAAEC,IAAI,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAC,CAAE;IAExD;IACA;MAAEF,KAAK,EAAE,cAAc;MAAEC,IAAI,EAAE,WAAW;MAAEC,QAAQ,EAAE;IAAC,CAAE;IAEzD;IACA;MAAEF,KAAK,EAAE,cAAc;MAAEC,IAAI,EAAE,QAAQ;MAAEC,QAAQ,EAAE;IAAC,CAAE,EACtD;MAAEF,KAAK,EAAE,YAAY;MAAEC,IAAI,EAAE,QAAQ;MAAEC,QAAQ,EAAE;IAAC,CAAE;IAEpD;IACA;MAAEF,KAAK,EAAE,cAAc;MAAEC,IAAI,EAAE,eAAe;MAAEC,QAAQ,EAAE;IAAC,CAAE,CAC9D;IAED;IAAA;IAAApC,cAAA,GAAAE,CAAA;IACA,IAAIM,OAAO,EAAE6B,YAAY,KAAK,KAAK,EAAE;MAAA;MAAArC,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MACnC+B,QAAQ,CAACK,IAAI;MACX;MACA;QAAEJ,KAAK,EAAE,0BAA0B;QAAEC,IAAI,EAAE,MAAM;QAAEC,QAAQ,EAAE;MAAC,CAAE;MAEhE;MACA;QAAEF,KAAK,EAAE,mCAAmC;QAAEC,IAAI,EAAE,WAAW;QAAEC,QAAQ,EAAE;MAAC,CAAE,CAC/E;IACH,CAAC;IAAA;IAAA;MAAApC,cAAA,GAAAU,CAAA;IAAA;IAED;IACA,MAAM6B,UAAU;IAAA;IAAA,CAAAvC,cAAA,GAAAE,CAAA,QASX,EAAE;IAAC;IAAAF,cAAA,GAAAE,CAAA;IAER+B,QAAQ,CAACT,OAAO,CAACgB,OAAO,IAAG;MAAA;MAAAxC,cAAA,GAAAS,CAAA;MACzB,IAAIgC,KAAK;MACT,MAAMP,KAAK;MAAA;MAAA,CAAAlC,cAAA,GAAAE,CAAA,QAAG,IAAIyB,MAAM,CAACa,OAAO,CAACN,KAAK,CAACQ,MAAM,EAAE,GAAG,CAAC;MAAC;MAAA1C,cAAA,GAAAE,CAAA;MAEpD,OAAO,CAACuC,KAAK,GAAGP,KAAK,CAACS,IAAI,CAACpC,IAAI,CAAC,MAAM,IAAI,EAAE;QAC1C,MAAMqC,KAAK;QAAA;QAAA,CAAA5C,cAAA,GAAAE,CAAA,QAAGuC,KAAK,CAACI,KAAK;QACzB,MAAMC,GAAG;QAAA;QAAA,CAAA9C,cAAA,GAAAE,CAAA,QAAGuC,KAAK,CAACI,KAAK,GAAGJ,KAAK,CAAC,CAAC,CAAC,CAACM,MAAM;QAEzC,IAAIC,OAAO;QAAA;QAAA,CAAAhD,cAAA,GAAAE,CAAA,QAAGuC,KAAK,CAAC,CAAC,CAAC;QACtB,IAAIQ,GAAuB;QAC3B,IAAIC,UAA8B;QAAC;QAAAlD,cAAA,GAAAE,CAAA;QAEnC,IAAIsC,OAAO,CAACL,IAAI,KAAK,MAAM,EAAE;UAAA;UAAAnC,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAC3B8C,OAAO,GAAGP,KAAK,CAAC,CAAC,CAAC;UAAC;UAAAzC,cAAA,GAAAE,CAAA;UACnB+C,GAAG,GAAG9C,kBAAA,CAAAS,gBAAgB,CAACuC,WAAW,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC,MAAM;UAAA;UAAAzC,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAAA,IAAIsC,OAAO,CAACL,IAAI,KAAK,WAAW,EAAE;YAAA;YAAAnC,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACvC8C,OAAO,GAAGP,KAAK,CAAC,CAAC,CAAC;YAAC;YAAAzC,cAAA,GAAAE,CAAA;YACnB+C,GAAG,GAAG9C,kBAAA,CAAAS,gBAAgB,CAACuC,WAAW,CAACV,KAAK,CAAC,CAAC,CAAC,CAAC;UAC9C,CAAC,MAAM;YAAA;YAAAzC,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YAAA,IAAIsC,OAAO,CAACL,IAAI,KAAK,UAAU,EAAE;cAAA;cAAAnC,cAAA,GAAAU,CAAA;cAAAV,cAAA,GAAAE,CAAA;cACtCgD,UAAU,GAAGT,KAAK,CAAC,CAAC,CAAC;cAAC;cAAAzC,cAAA,GAAAE,CAAA;cACtB8C,OAAO,GAAGP,KAAK,CAAC,CAAC,CAAC;YACpB,CAAC,MAAM;cAAA;cAAAzC,cAAA,GAAAU,CAAA;cAAAV,cAAA,GAAAE,CAAA;cAAA,IAAIsC,OAAO,CAACL,IAAI,KAAK,aAAa,EAAE;gBAAA;gBAAAnC,cAAA,GAAAU,CAAA;gBAAAV,cAAA,GAAAE,CAAA;gBACzC;gBACAqC,UAAU,CAACD,IAAI,CAAC;kBACdG,KAAK;kBACLN,IAAI,EAAE,MAAM;kBACZC,QAAQ,EAAEI,OAAO,CAACJ,QAAQ;kBAC1BQ,KAAK;kBACLE,GAAG;kBACHE;iBACD,CAAC;gBAAC;gBAAAhD,cAAA,GAAAE,CAAA;gBACHqC,UAAU,CAACD,IAAI,CAAC;kBACdG,KAAK;kBACLN,IAAI,EAAE,QAAQ;kBACdC,QAAQ,EAAEI,OAAO,CAACJ,QAAQ;kBAC1BQ,KAAK;kBACLE,GAAG;kBACHE;iBACD,CAAC;gBAAC;gBAAAhD,cAAA,GAAAE,CAAA;gBACH;cACF,CAAC;cAAA;cAAA;gBAAAF,cAAA,GAAAU,CAAA;cAAA;YAAD;UAAA;QAAA;QAAC;QAAAV,cAAA,GAAAE,CAAA;QAEDqC,UAAU,CAACD,IAAI,CAAC;UACdG,KAAK;UACLN,IAAI,EAAEK,OAAO,CAACL,IAAI;UAClBC,QAAQ,EAAEI,OAAO,CAACJ,QAAQ;UAC1BQ,KAAK;UACLE,GAAG;UACHE,OAAO;UACPC,GAAG;UACHC;SACD,CAAC;MACJ;IACF,CAAC,CAAC;IAEF;IAAA;IAAAlD,cAAA,GAAAE,CAAA;IACAqC,UAAU,CAACa,IAAI,CAAC,CAACC,CAAC,EAAE3C,CAAC,KAAI;MAAA;MAAAV,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACvB,IAAImD,CAAC,CAACT,KAAK,KAAKlC,CAAC,CAACkC,KAAK,EAAE;QAAA;QAAA5C,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QAAA,OAAOmD,CAAC,CAACT,KAAK,GAAGlC,CAAC,CAACkC,KAAK;MAAA,CAAC;MAAA;MAAA;QAAA5C,cAAA,GAAAU,CAAA;MAAA;MAAAV,cAAA,GAAAE,CAAA;MAClD,OAAOmD,CAAC,CAACjB,QAAQ,GAAG1B,CAAC,CAAC0B,QAAQ;IAChC,CAAC,CAAC;IAAC;IAAApC,cAAA,GAAAE,CAAA;IAEH,OAAOqC,UAAU,CAACe,GAAG,CAACC,CAAC,IAAK;MAAA;MAAAvD,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MAAA;QAC1BiC,IAAI,EAAEoB,CAAC,CAACpB,IAAyB;QACjCa,OAAO,EAAEO,CAAC,CAACP,OAAO;QAClBJ,KAAK,EAAEW,CAAC,CAACX,KAAK;QACdE,GAAG,EAAES,CAAC,CAACT,GAAG;QACVG,GAAG,EAAEM,CAAC,CAACN,GAAG;QACVC,UAAU,EAAEK,CAAC,CAACL;OACf;KAAC,CAAC;EACL;EAEQhC,gBAAgBA,CAACF,MAAmB,EAAEwC,YAAoB;IAAA;IAAAxD,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAChE,IAAIc,MAAM,CAAC+B,MAAM,KAAK,CAAC,EAAE;MAAA;MAAA/C,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MACvB,OAAO,CAAC;QACNiC,IAAI,EAAE,MAAM;QACZ5B,IAAI,EAAE;UAAEyC,OAAO,EAAE,IAAI,CAAChB,cAAc,CAACwB,YAAY;QAAC;OACnD,CAAC;IACJ,CAAC;IAAA;IAAA;MAAAxD,cAAA,GAAAU,CAAA;IAAA;IAED,MAAMa,MAAM;IAAA;IAAA,CAAAvB,cAAA,GAAAE,CAAA,QAAqB,EAAE;IACnC,MAAMuD,QAAQ;IAAA;IAAA,CAAAzD,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACwD,cAAc,CAAC1C,MAAM,EAAEwC,YAAY,CAAC;IAAC;IAAAxD,cAAA,GAAAE,CAAA;IAE3DuD,QAAQ,CAACjC,OAAO,CAACmC,OAAO,IAAG;MAAA;MAAA3D,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACzB,IAAIyD,OAAO,CAACxB,IAAI,KAAK,UAAU,EAAE;QAAA;QAAAnC,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QAC/BqB,MAAM,CAACe,IAAI,CAAC;UACVH,IAAI,EAAE,UAAU;UAChByB,QAAQ,EAAE;YAAEV,UAAU;YAAE;YAAA,CAAAlD,cAAA,GAAAU,CAAA,WAAAiD,OAAO,CAACT,UAAU;YAAA;YAAA,CAAAlD,cAAA,GAAAU,CAAA,WAAIiD,OAAO,CAACX,OAAO;UAAA;SAC9D,CAAC;MACJ,CAAC,MAAM;QAAA;QAAAhD,cAAA,GAAAU,CAAA;QACL,MAAMmD,WAAW;QAAA;QAAA,CAAA7D,cAAA,GAAAE,CAAA,QAAQ,EAAE;QAE3B;QAAA;QAAAF,cAAA,GAAAE,CAAA;QACA,IAAIyD,OAAO,CAACG,IAAI,EAAE;UAAA;UAAA9D,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAAA2D,WAAW,CAACC,IAAI,GAAG,IAAI;QAAA,CAAC;QAAA;QAAA;UAAA9D,cAAA,GAAAU,CAAA;QAAA;QAAAV,cAAA,GAAAE,CAAA;QAC1C,IAAIyD,OAAO,CAACI,MAAM,EAAE;UAAA;UAAA/D,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAAA2D,WAAW,CAACE,MAAM,GAAG,IAAI;QAAA,CAAC;QAAA;QAAA;UAAA/D,cAAA,GAAAU,CAAA;QAAA;QAAAV,cAAA,GAAAE,CAAA;QAC9C,IAAIyD,OAAO,CAACK,IAAI,EAAE;UAAA;UAAAhE,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAAA2D,WAAW,CAACG,IAAI,GAAG,IAAI;QAAA,CAAC;QAAA;QAAA;UAAAhE,cAAA,GAAAU,CAAA;QAAA;QAAAV,cAAA,GAAAE,CAAA;QAC1C,IAAIyD,OAAO,CAACM,aAAa,EAAE;UAAA;UAAAjE,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAAA2D,WAAW,CAACI,aAAa,GAAG,IAAI;QAAA,CAAC;QAAA;QAAA;UAAAjE,cAAA,GAAAU,CAAA;QAAA;QAAAV,cAAA,GAAAE,CAAA;QAC5D,IAAIyD,OAAO,CAACO,SAAS,EAAE;UAAA;UAAAlE,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAAA2D,WAAW,CAACK,SAAS,GAAG,IAAI;QAAA,CAAC;QAAA;QAAA;UAAAlE,cAAA,GAAAU,CAAA;QAAA;QAEpD,MAAMyD,WAAW;QAAA;QAAA,CAAAnE,cAAA,GAAAE,CAAA,QAAQ;UAAE8C,OAAO,EAAEW,OAAO,CAACX;QAAO,CAAE;QAAC;QAAAhD,cAAA,GAAAE,CAAA;QACtD,IAAIyD,OAAO,CAACS,IAAI,EAAE;UAAA;UAAApE,cAAA,GAAAU,CAAA;UAAAV,cAAA,GAAAE,CAAA;UAChBiE,WAAW,CAACC,IAAI,GAAG;YAAEnB,GAAG,EAAEU,OAAO,CAACS,IAAI,CAACnB;UAAG,CAAE;QAC9C,CAAC;QAAA;QAAA;UAAAjD,cAAA,GAAAU,CAAA;QAAA;QAED;QAAAV,cAAA,GAAAE,CAAA;QACAiE,WAAW,CAACnB,OAAO,GAAG,IAAI,CAAChB,cAAc,CAACmC,WAAW,CAACnB,OAAO,CAAC;QAAC;QAAAhD,cAAA,GAAAE,CAAA;QAE/DqB,MAAM,CAACe,IAAI,CAAC;UACVH,IAAI,EAAE,MAAM;UACZ5B,IAAI,EAAE4D,WAAW;UACjBN,WAAW,EAAEQ,MAAM,CAACC,IAAI,CAACT,WAAW,CAAC,CAACd,MAAM,GAAG,CAAC;UAAA;UAAA,CAAA/C,cAAA,GAAAU,CAAA,WAAGmD,WAAW;UAAA;UAAA,CAAA7D,cAAA,GAAAU,CAAA,WAAG6D,SAAS;UAC1EC,IAAI,EAAEb,OAAO,CAACS,IAAI;UAAA;UAAA,CAAApE,cAAA,GAAAU,CAAA,WAAGiD,OAAO,CAACS,IAAI,CAACnB,GAAG;UAAA;UAAA,CAAAjD,cAAA,GAAAU,CAAA,WAAG,IAAI;SAC7C,CAAC;MACJ;IACF,CAAC,CAAC;IAAC;IAAAV,cAAA,GAAAE,CAAA;IAEH,OAAOqB,MAAM;EACf;EAEQmC,cAAcA,CAAC1C,MAAmB,EAAEwC,YAAoB;IAAA;IAAAxD,cAAA,GAAAS,CAAA;IAa9D;IACA,MAAMgE,YAAY;IAAA;IAAA,CAAAzE,cAAA,GAAAE,CAAA,QAAG,IAAIwE,GAAG,EAAU;IAAC;IAAA1E,cAAA,GAAAE,CAAA;IACvCuE,YAAY,CAACE,GAAG,CAAC,CAAC,CAAC;IAAC;IAAA3E,cAAA,GAAAE,CAAA;IACpBuE,YAAY,CAACE,GAAG,CAACnB,YAAY,CAACT,MAAM,CAAC;IAAC;IAAA/C,cAAA,GAAAE,CAAA;IAEtCc,MAAM,CAACQ,OAAO,CAACoD,KAAK,IAAG;MAAA;MAAA5E,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MACrBuE,YAAY,CAACE,GAAG,CAACC,KAAK,CAAChC,KAAK,CAAC;MAAC;MAAA5C,cAAA,GAAAE,CAAA;MAC9BuE,YAAY,CAACE,GAAG,CAACC,KAAK,CAAC9B,GAAG,CAAC;IAC7B,CAAC,CAAC;IAEF,MAAM+B,YAAY;IAAA;IAAA,CAAA7E,cAAA,GAAAE,CAAA,QAAG4E,KAAK,CAACC,IAAI,CAACN,YAAY,CAAC,CAACrB,IAAI,CAAC,CAACC,CAAC,EAAE3C,CAAC,KAAK;MAAA;MAAAV,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MAAA,OAAAmD,CAAC,GAAG3C,CAAC;IAAD,CAAC,CAAC;IACnE,MAAM+C,QAAQ;IAAA;IAAA,CAAAzD,cAAA,GAAAE,CAAA,QAYT,EAAE;IAEP;IAAA;IAAAF,cAAA,GAAAE,CAAA;IACA,KAAK,IAAI8E,CAAC;IAAA;IAAA,CAAAhF,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAE8E,CAAC,GAAGH,YAAY,CAAC9B,MAAM,GAAG,CAAC,EAAEiC,CAAC,EAAE,EAAE;MAChD,MAAMpC,KAAK;MAAA;MAAA,CAAA5C,cAAA,GAAAE,CAAA,QAAG2E,YAAY,CAACG,CAAC,CAAC;MAC7B,MAAMlC,GAAG;MAAA;MAAA,CAAA9C,cAAA,GAAAE,CAAA,QAAG2E,YAAY,CAACG,CAAC,GAAG,CAAC,CAAC;MAAC;MAAAhF,cAAA,GAAAE,CAAA;MAEhC,IAAI0C,KAAK,KAAKE,GAAG,EAAE;QAAA;QAAA9C,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QAAA;MAAA,CAAS;MAAA;MAAA;QAAAF,cAAA,GAAAU,CAAA;MAAA;MAE5B,MAAMsC,OAAO;MAAA;MAAA,CAAAhD,cAAA,GAAAE,CAAA,QAAGsD,YAAY,CAACyB,KAAK,CAACrC,KAAK,EAAEE,GAAG,CAAC;MAAC;MAAA9C,cAAA,GAAAE,CAAA;MAC/C,IAAI,CAAC8C,OAAO,EAAE;QAAA;QAAAhD,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QAAA;MAAA,CAAS;MAAA;MAAA;QAAAF,cAAA,GAAAU,CAAA;MAAA;MAEvB;MACA,MAAMwE,gBAAgB;MAAA;MAAA,CAAAlF,cAAA,GAAAE,CAAA,SAAGc,MAAM,CAACmE,MAAM,CAACP,KAAK,IAAG;QAAA;QAAA5E,cAAA,GAAAS,CAAA;QAAAT,cAAA,GAAAE,CAAA;QAC7C;QACA,OAAO,2BAAAF,cAAA,GAAAU,CAAA,WAAAkE,KAAK,CAAChC,KAAK,IAAIA,KAAK;QAAA;QAAA,CAAA5C,cAAA,GAAAU,CAAA,WAAIoC,GAAG,IAAI8B,KAAK,CAAC9B,GAAG;MACjD,CAAC,CAAC;MAEF;MACA,MAAMsC,aAAa;MAAA;MAAA,CAAApF,cAAA,GAAAE,CAAA,SAAGgF,gBAAgB,CAACG,IAAI,CAACC,CAAC,IAAI;QAAA;QAAAtF,cAAA,GAAAS,CAAA;QAAAT,cAAA,GAAAE,CAAA;QAAA,OAAAoF,CAAC,CAACnD,IAAI,KAAK,UAAU;MAAV,CAAU,CAAC;MAAC;MAAAnC,cAAA,GAAAE,CAAA;MACxE,IAAIkF,aAAa,EAAE;QAAA;QAAApF,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QACjBuD,QAAQ,CAACnB,IAAI,CAAC;UACZU,OAAO,EAAEoC,aAAa,CAACpC,OAAO;UAC9BJ,KAAK;UACLE,GAAG;UACHX,IAAI,EAAE,UAAU;UAChBe,UAAU,EAAEkC,aAAa,CAAClC;SAC3B,CAAC;QAAC;QAAAlD,cAAA,GAAAE,CAAA;QACH;MACF,CAAC;MAAA;MAAA;QAAAF,cAAA,GAAAU,CAAA;MAAA;MAED;MACA,MAAMiD,OAAO;MAAA;MAAA,CAAA3D,cAAA,GAAAE,CAAA,SAAQ;QACnB8C,OAAO;QACPJ,KAAK;QACLE,GAAG;QACHX,IAAI,EAAE;OACP;MAAC;MAAAnC,cAAA,GAAAE,CAAA;MAEFgF,gBAAgB,CAAC1D,OAAO,CAACoD,KAAK,IAAG;QAAA;QAAA5E,cAAA,GAAAS,CAAA;QAAAT,cAAA,GAAAE,CAAA;QAC/B,QAAQ0E,KAAK,CAACzC,IAAI;UAChB,KAAK,MAAM;YAAA;YAAAnC,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACTyD,OAAO,CAACG,IAAI,GAAG,IAAI;YAAC;YAAA9D,cAAA,GAAAE,CAAA;YACpB;UACF,KAAK,QAAQ;YAAA;YAAAF,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACXyD,OAAO,CAACI,MAAM,GAAG,IAAI;YAAC;YAAA/D,cAAA,GAAAE,CAAA;YACtB;UACF,KAAK,MAAM;YAAA;YAAAF,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACTyD,OAAO,CAACK,IAAI,GAAG,IAAI;YAAC;YAAAhE,cAAA,GAAAE,CAAA;YACpB;UACF,KAAK,eAAe;YAAA;YAAAF,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YAClByD,OAAO,CAACM,aAAa,GAAG,IAAI;YAAC;YAAAjE,cAAA,GAAAE,CAAA;YAC7B;UACF,KAAK,WAAW;YAAA;YAAAF,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACdyD,OAAO,CAACO,SAAS,GAAG,IAAI;YAAC;YAAAlE,cAAA,GAAAE,CAAA;YACzB;UACF,KAAK,MAAM;YAAA;YAAAF,cAAA,GAAAU,CAAA;UACX,KAAK,WAAW;YAAA;YAAAV,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACdyD,OAAO,CAACS,IAAI,GAAG;cAAEnB,GAAG,EAAE2B,KAAK,CAAC3B;YAAI,CAAE;YAAC;YAAAjD,cAAA,GAAAE,CAAA;YACnC;QACJ;MACF,CAAC,CAAC;MAAC;MAAAF,cAAA,GAAAE,CAAA;MAEHuD,QAAQ,CAACnB,IAAI,CAACqB,OAAO,CAAC;IACxB;IAEA;IAAA;IAAA3D,cAAA,GAAAE,CAAA;IACA,OAAO,IAAI,CAACqF,qBAAqB,CAAC9B,QAAQ,CAAC0B,MAAM,CAACjF,CAAC,IAAI;MAAA;MAAAF,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAE,CAAA;MAAA,kCAAAF,cAAA,GAAAU,CAAA,WAAAR,CAAC,CAAC8C,OAAO,CAACwC,IAAI,EAAE;MAAA;MAAA,CAAAxF,cAAA,GAAAU,CAAA,WAAIR,CAAC,CAACiC,IAAI,KAAK,UAAU;IAAV,CAAU,CAAC,CAAC;EACpG;EAEQoD,qBAAqBA,CAAC9B,QAAe;IAAA;IAAAzD,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAC3C,IAAIuD,QAAQ,CAACV,MAAM,IAAI,CAAC,EAAE;MAAA;MAAA/C,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MAAA,OAAOuD,QAAQ;IAAA,CAAC;IAAA;IAAA;MAAAzD,cAAA,GAAAU,CAAA;IAAA;IAE1C,MAAM+E,MAAM;IAAA;IAAA,CAAAzF,cAAA,GAAAE,CAAA,SAAU,EAAE;IACxB,IAAIwF,OAAO;IAAA;IAAA,CAAA1F,cAAA,GAAAE,CAAA,SAAG;MAAE,GAAGuD,QAAQ,CAAC,CAAC;IAAC,CAAE;IAAC;IAAAzD,cAAA,GAAAE,CAAA;IAEjC,KAAK,IAAI8E,CAAC;IAAA;IAAA,CAAAhF,cAAA,GAAAE,CAAA,SAAG,CAAC,GAAE8E,CAAC,GAAGvB,QAAQ,CAACV,MAAM,EAAEiC,CAAC,EAAE,EAAE;MACxC,MAAMW,IAAI;MAAA;MAAA,CAAA3F,cAAA,GAAAE,CAAA,SAAGuD,QAAQ,CAACuB,CAAC,CAAC;MAExB;MAAA;MAAAhF,cAAA,GAAAE,CAAA;MACA,IAAI,IAAI,CAAC0F,gBAAgB,CAACF,OAAO,EAAEC,IAAI,CAAC,EAAE;QAAA;QAAA3F,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QACxCwF,OAAO,CAAC1C,OAAO,IAAI2C,IAAI,CAAC3C,OAAO;QAAC;QAAAhD,cAAA,GAAAE,CAAA;QAChCwF,OAAO,CAAC5C,GAAG,GAAG6C,IAAI,CAAC7C,GAAG;MACxB,CAAC,MAAM;QAAA;QAAA9C,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QACLuF,MAAM,CAACnD,IAAI,CAACoD,OAAO,CAAC;QAAC;QAAA1F,cAAA,GAAAE,CAAA;QACrBwF,OAAO,GAAG;UAAE,GAAGC;QAAI,CAAE;MACvB;IACF;IAAC;IAAA3F,cAAA,GAAAE,CAAA;IAEDuF,MAAM,CAACnD,IAAI,CAACoD,OAAO,CAAC;IAAC;IAAA1F,cAAA,GAAAE,CAAA;IACrB,OAAOuF,MAAM;EACf;EAEQG,gBAAgBA,CAACvC,CAAM,EAAE3C,CAAM;IAAA;IAAAV,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IACrC,IAAImD,CAAC,CAAClB,IAAI,KAAKzB,CAAC,CAACyB,IAAI,EAAE;MAAA;MAAAnC,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MAAA,OAAO,KAAK;IAAA,CAAC;IAAA;IAAA;MAAAF,cAAA,GAAAU,CAAA;IAAA;IAAAV,cAAA,GAAAE,CAAA;IACpC,IAAImD,CAAC,CAAClB,IAAI,KAAK,UAAU,EAAE;MAAA;MAAAnC,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAE,CAAA;MAAA,OAAO,KAAK;IAAA,CAAC;IAAA;IAAA;MAAAF,cAAA,GAAAU,CAAA;IAAA,EAAC;IAEzC;IAAAV,cAAA,GAAAE,CAAA;IACA,OAAO,2BAAAF,cAAA,GAAAU,CAAA,WAAA2C,CAAC,CAACS,IAAI,KAAKpD,CAAC,CAACoD,IAAI;IAAA;IAAA,CAAA9D,cAAA,GAAAU,CAAA,WACtB2C,CAAC,CAACU,MAAM,KAAKrD,CAAC,CAACqD,MAAM;IAAA;IAAA,CAAA/D,cAAA,GAAAU,CAAA,WACrB2C,CAAC,CAACW,IAAI,KAAKtD,CAAC,CAACsD,IAAI;IAAA;IAAA,CAAAhE,cAAA,GAAAU,CAAA,WACjB2C,CAAC,CAACY,aAAa,KAAKvD,CAAC,CAACuD,aAAa;IAAA;IAAA,CAAAjE,cAAA,GAAAU,CAAA,WACnC2C,CAAC,CAACa,SAAS,KAAKxD,CAAC,CAACwD,SAAS;IAAA;IAAA,CAAAlE,cAAA,GAAAU,CAAA,WAC3BmF,IAAI,CAACC,SAAS,CAACzC,CAAC,CAACe,IAAI,CAAC,KAAKyB,IAAI,CAACC,SAAS,CAACpF,CAAC,CAAC0D,IAAI,CAAC;EACrD;EAIA;;;EAGA2B,oBAAoBA,CAAC/C,OAAe;IAAA;IAAAhD,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAClC,OAAO,CAAC;MACNiC,IAAI,EAAE,MAAM;MACZ5B,IAAI,EAAE;QAAEyC;MAAO;KAChB,CAAC;EACJ;EAEA;;;EAGAgD,uBAAuBA,CACrBhD,OAAe,EACfiD,UAAA;EAAA;EAAA,CAAAjG,cAAA,GAAAU,CAAA,WAOI,EAAE;IAAA;IAAAV,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAEN,OAAO,CAAC;MACNiC,IAAI,EAAE,MAAM;MACZ5B,IAAI,EAAE;QAAEyC;MAAO,CAAE;MACjBa,WAAW,EAAEoC;KACd,CAAC;EACJ;EAEA;;;EAGAC,kBAAkBA,CAAClD,OAAe,EAAEC,GAAW;IAAA;IAAAjD,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAC7C,OAAO,CAAC;MACNiC,IAAI,EAAE,MAAM;MACZ5B,IAAI,EAAE;QACJyC,OAAO;QACPoB,IAAI,EAAE;UAAEnB;QAAG;;KAEd,CAAC;EACJ;EAEA;;;EAGAkD,sBAAsBA,CAACjD,UAAkB;IAAA;IAAAlD,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IACvC,OAAO,CAAC;MACNiC,IAAI,EAAE,UAAU;MAChByB,QAAQ,EAAE;QAAEV;MAAU;KACvB,CAAC;EACJ;EAEA;;;EAGAkD,eAAeA,CAAC,GAAGC,SAA6B;IAAA;IAAArG,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAE,CAAA;IAC9C,OAAOmG,SAAS,CAACC,IAAI,EAAE;EACzB;EAEA;;;EAGAC,gBAAgBA,CAACC,QAA0B,EAAEC,SAAiB;IAAA;IAAAzG,cAAA,GAAAS,CAAA;IAC5D,IAAIiG,aAAa;IAAA;IAAA,CAAA1G,cAAA,GAAAE,CAAA,SAAG,CAAC;IACrB,MAAMqB,MAAM;IAAA;IAAA,CAAAvB,cAAA,GAAAE,CAAA,SAAqB,EAAE;IAAC;IAAAF,cAAA,GAAAE,CAAA;IAEpC,KAAK,MAAMyG,IAAI,IAAIH,QAAQ,EAAE;MAC3B,MAAMxD,OAAO;MAAA;MAAA,CAAAhD,cAAA,GAAAE,CAAA,SAAGyG,IAAI,CAACxE,IAAI,KAAK,MAAM;MAAA;MAAA,CAAAnC,cAAA,GAAAU,CAAA;MAChC;MAAA,CAAAV,cAAA,GAAAU,CAAA,WAAAiG,IAAI,CAACpG,IAAI,EAAEyC,OAAO;MAAA;MAAA,CAAAhD,cAAA,GAAAU,CAAA,WAAI,EAAE;MAAA;MAAA,CAAAV,cAAA,GAAAU,CAAA,WACxBiG,IAAI,CAACxE,IAAI,KAAK,UAAU;MAAA;MAAA,CAAAnC,cAAA,GAAAU,CAAA;MACtB;MAAA,CAAAV,cAAA,GAAAU,CAAA,WAAAiG,IAAI,CAAC/C,QAAQ,EAAEV,UAAU;MAAA;MAAA,CAAAlD,cAAA,GAAAU,CAAA,WAAI,EAAE;MAAA;MAAA,CAAAV,cAAA,GAAAU,CAAA,WAC/B,EAAE;MAAC;MAAAV,cAAA,GAAAE,CAAA;MAET,IAAIwG,aAAa,GAAG1D,OAAO,CAACD,MAAM,IAAI0D,SAAS,EAAE;QAAA;QAAAzG,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAE,CAAA;QAC/CqB,MAAM,CAACe,IAAI,CAACqE,IAAI,CAAC;QAAC;QAAA3G,cAAA,GAAAE,CAAA;QAClBwG,aAAa,IAAI1D,OAAO,CAACD,MAAM;MACjC,CAAC,MAAM;QAAA;QAAA/C,cAAA,GAAAU,CAAA;QACL,MAAMkG,eAAe;QAAA;QAAA,CAAA5G,cAAA,GAAAE,CAAA,SAAGuG,SAAS,GAAGC,aAAa;QAAC;QAAA1G,cAAA,GAAAE,CAAA;QAClD,IAAI0G,eAAe,GAAG,EAAE,EAAE;UAAA;UAAA5G,cAAA,GAAAU,CAAA;UACxB,MAAMmG,gBAAgB;UAAA;UAAA,CAAA7G,cAAA,GAAAE,CAAA,SAAG8C,OAAO,CAAC8D,SAAS,CAAC,CAAC,EAAEF,eAAe,GAAG,EAAE,CAAC,GAAG,KAAK;UAAC;UAAA5G,cAAA,GAAAE,CAAA;UAE5E,IAAIyG,IAAI,CAACxE,IAAI,KAAK,MAAM,EAAE;YAAA;YAAAnC,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YACxBqB,MAAM,CAACe,IAAI,CAAC;cACV,GAAGqE,IAAI;cACPpG,IAAI,EAAE;gBACJ,GAAGoG,IAAI,CAACpG,IAAI;gBACZyC,OAAO,EAAE6D;;aAEZ,CAAC;UACJ,CAAC,MAAM;YAAA;YAAA7G,cAAA,GAAAU,CAAA;YAAAV,cAAA,GAAAE,CAAA;YAAA,IAAIyG,IAAI,CAACxE,IAAI,KAAK,UAAU,EAAE;cAAA;cAAAnC,cAAA,GAAAU,CAAA;cAAAV,cAAA,GAAAE,CAAA;cACnCqB,MAAM,CAACe,IAAI,CAAC;gBACVH,IAAI,EAAE,MAAM;gBACZ5B,IAAI,EAAE;kBAAEyC,OAAO,EAAE6D;gBAAgB;eAClC,CAAC;YACJ,CAAC;YAAA;YAAA;cAAA7G,cAAA,GAAAU,CAAA;YAAA;UAAD;QACF,CAAC;QAAA;QAAA;UAAAV,cAAA,GAAAU,CAAA;QAAA;QAAAV,cAAA,GAAAE,CAAA;QACD;MACF;IACF;IAAC;IAAAF,cAAA,GAAAE,CAAA;IAED,OAAOqB,MAAM;EACf;;AACD;AAAAvB,cAAA,GAAAE,CAAA;AApdD6G,OAAA,CAAA1G,iBAAA,GAAAA,iBAAA","ignoreList":[]}