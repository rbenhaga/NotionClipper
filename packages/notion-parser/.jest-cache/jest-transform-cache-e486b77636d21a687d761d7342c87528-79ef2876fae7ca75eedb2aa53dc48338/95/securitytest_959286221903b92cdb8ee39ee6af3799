183248b7a9382c3e82ae250d3a532e2f
"use strict";
/**
 * Tests de sécurité complets - Conformes au Cahier des Charges v2.1 ⭐
 * Couvre la protection XSS, injection, DoS et validation de sécurité
 */
Object.defineProperty(exports, "__esModule", { value: true });
const parseContent_1 = require("../../src/parseContent");
const test_helpers_1 = require("../helpers/test-helpers");
// Constantes locales
const TEST_CONSTANTS = {
    SECURITY_PATTERNS: {
        MALICIOUS_URLS: [
            'javascript:void(0)',
            'data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==',
            'vbscript:msgbox(1)',
            'file:///etc/passwd'
        ]
    }
};
describe('Security Tests - Cahier des Charges v2.1 ⭐', () => {
    describe('XSS Protection', () => {
        const xssTestCases = [
            {
                name: 'Script tag injection',
                input: '<div><script>alert("XSS")</script><p>Normal content</p></div>',
                expectedBlocked: true,
                description: 'Should block script tags in HTML content',
                severity: 'critical'
            },
            {
                name: 'Event handler injection',
                input: '<div onclick="alert(\'XSS\')" onload="malicious()"><p onmouseover="steal()">Content</p></div>',
                expectedBlocked: true,
                description: 'Should remove event handlers from HTML',
                severity: 'critical'
            },
            {
                name: 'SVG with embedded scripts',
                input: '<svg onload="alert(\'XSS\')"><script>malicious()</script></svg>',
                expectedBlocked: true,
                description: 'Should block SVG with embedded scripts',
                severity: 'critical'
            },
            {
                name: 'Iframe injection',
                input: '<iframe src="javascript:alert(\'XSS\')"></iframe>',
                expectedBlocked: true,
                description: 'Should block malicious iframes',
                severity: 'high'
            }
        ];
        xssTestCases.forEach(testCase => {
            it(`should handle ${testCase.name}`, () => {
                const result = (0, parseContent_1.parseContent)(testCase.input, { contentType: 'html' });
                test_helpers_1.testHelpers.expectValidResult(result);
                const resultString = JSON.stringify(result.blocks);
                const hasScript = resultString.toLowerCase().includes('<script');
                const hasEventHandlers = /on\w+\s*=/i.test(resultString);
                if (testCase.expectedBlocked) {
                    expect(hasScript).toBe(false);
                    expect(hasEventHandlers).toBe(false);
                }
            });
        });
    });
    describe('URL Protocol Security', () => {
        const maliciousUrls = TEST_CONSTANTS.SECURITY_PATTERNS.MALICIOUS_URLS;
        maliciousUrls.forEach(url => {
            it(`should block malicious URL: ${url.substring(0, 20)}...`, () => {
                const content = `[Click me](${url})`;
                const result = (0, parseContent_1.parseContent)(content, { contentType: 'markdown' });
                test_helpers_1.testHelpers.expectValidResult(result);
                const resultString = JSON.stringify(result.blocks);
                // Check that dangerous protocols are blocked (URLs should be empty)
                if (url.startsWith('javascript:') || url.startsWith('vbscript:')) {
                    expect(resultString).toContain('"url":""'); // URL should be sanitized to empty string
                }
                // Data URLs with HTML/JS should be blocked
                if (url.includes('data:text/html') && url.includes('script')) {
                    expect(resultString).not.toMatch(/data:text\/html.*<script/i);
                }
            });
        });
        it('should validate internal network URLs', () => {
            const internalUrls = [
                'http://localhost:3000/admin',
                'http://127.0.0.1/secret',
                'http://192.168.1.1/config',
                'http://10.0.0.1/internal'
            ];
            internalUrls.forEach(url => {
                const result = (0, parseContent_1.parseContent)(`[Link](${url})`, { contentType: 'markdown' });
                test_helpers_1.testHelpers.expectValidResult(result);
                // Internal URLs should be handled appropriately
                // (Implementation dependent - may block or allow with warning)
                expect(result.success).toBe(true);
            });
        });
    });
    describe('Content Sanitization', () => {
        it('should detect and handle null bytes', () => {
            const contentWithNullBytes = `Normal text\x00hidden content`;
            const result = (0, parseContent_1.parseContent)(contentWithNullBytes);
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toMatch(/\x00/);
        });
        it('should sanitize control characters', () => {
            const contentWithControlChars = `Text with\x01\x02\x03control chars`;
            const result = (0, parseContent_1.parseContent)(contentWithControlChars);
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toMatch(/[\x01-\x08\x0B\x0C\x0E-\x1F]/);
        });
        it('should safely decode HTML entities', () => {
            const contentWithEntities = `&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;`;
            const result = (0, parseContent_1.parseContent)(contentWithEntities, { contentType: 'html' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toMatch(/<script.*>.*alert.*<\/script>/i);
        });
    });
    describe('Input Validation', () => {
        it('should handle extremely long URLs safely', () => {
            const longUrl = 'https://example.com/' + 'a'.repeat(10000);
            const result = (0, parseContent_1.parseContent)(longUrl);
            expect(result.success).toBeDefined();
            if (!result.success) {
                expect(result.error).toBeDefined();
            }
        });
        it('should validate URL formats strictly', () => {
            const malformedUrls = [
                'ht tp://example.com',
                'https://exam ple.com',
                'https://example.com/<script>',
                'ftp://example.com\x00hidden'
            ];
            malformedUrls.forEach(url => {
                const result = (0, parseContent_1.parseContent)(url);
                test_helpers_1.testHelpers.expectValidResult(result);
                const hasValidLink = result.blocks.some((block) => block.paragraph?.rich_text?.some((segment) => segment.href === url));
                expect(hasValidLink).toBe(false);
            });
        });
        it('should prevent ReDoS attacks with complex regex', () => {
            const redosContent = 'a'.repeat(1000) + '!';
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(redosContent);
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(5000);
            expect(result.success).toBeDefined();
        });
    });
    // ⭐ NOUVEAU : Tests de sécurité pour les nouvelles fonctionnalités v2.1
    describe('Audio URL Security (⭐ NOUVEAU v2.1)', () => {
        it('should block malicious audio URLs', () => {
            const maliciousAudioUrls = [
                'javascript:alert("xss").mp3',
                'data:audio/mp3;base64,malicious_payload',
                'file:///etc/passwd.mp3',
                'ftp://malicious.com/audio.mp3'
            ];
            maliciousAudioUrls.forEach(url => {
                const result = (0, parseContent_1.parseContent)(url);
                test_helpers_1.testHelpers.expectValidResult(result);
                // Should not create audio blocks for malicious URLs
                const audioBlocks = result.blocks.filter((block) => block.type === 'audio');
                expect(audioBlocks.length).toBe(0);
            });
        });
        it('should validate audio URL length limits', () => {
            const longAudioUrl = 'https://example.com/' + 'a'.repeat(5000) + '.mp3';
            const result = (0, parseContent_1.parseContent)(longAudioUrl);
            test_helpers_1.testHelpers.expectValidResult(result);
            // Should handle gracefully without creating invalid blocks
            expect(result.success).toBe(true);
        });
        it('should sanitize audio URLs with special characters', () => {
            const specialCharUrls = [
                'https://example.com/audio<script>.mp3',
                'https://example.com/audio"onclick="alert().mp3',
                'https://example.com/audio\x00hidden.mp3'
            ];
            specialCharUrls.forEach(url => {
                const result = (0, parseContent_1.parseContent)(url);
                test_helpers_1.testHelpers.expectValidResult(result);
                const resultString = JSON.stringify(result.blocks);
                expect(resultString).not.toContain('<script>');
                expect(resultString).not.toContain('onclick=');
                expect(resultString).not.toMatch(/\x00/);
            });
        });
    });
    describe('File Upload Security (⭐ NOUVEAU v2.1)', () => {
        it('should validate file upload parameters', () => {
            // Mock file upload scenarios
            const maliciousFilenames = [
                '../../../etc/passwd',
                'file<script>alert()</script>.jpg',
                'file\x00hidden.exe.jpg',
                'file"onclick="alert().jpg'
            ];
            maliciousFilenames.forEach(filename => {
                // Test filename validation
                expect(() => {
                    // This would be tested with actual FileUploadHandler
                    const sanitized = filename.replace(/[<>"'&\x00-\x1f]/g, '');
                    expect(sanitized).not.toContain('<script>');
                    expect(sanitized).not.toContain('\x00');
                }).not.toThrow();
            });
        });
        it('should prevent path traversal in filenames', () => {
            const pathTraversalNames = [
                '../../../etc/passwd',
                '..\\..\\windows\\system32\\config',
                '/etc/shadow',
                'C:\\Windows\\System32\\config'
            ];
            pathTraversalNames.forEach(filename => {
                // Should sanitize path traversal attempts
                const sanitized = filename.replace(/[./\\]/g, '_');
                expect(sanitized).not.toContain('../');
                expect(sanitized).not.toContain('..\\');
            });
        });
        it('should validate MIME type consistency', () => {
            const inconsistentFiles = [
                { filename: 'image.jpg', mimeType: 'application/javascript' },
                { filename: 'document.pdf', mimeType: 'text/html' },
                { filename: 'audio.mp3', mimeType: 'application/x-executable' }
            ];
            inconsistentFiles.forEach(file => {
                // Should detect MIME type inconsistencies
                const expectedMime = file.filename.endsWith('.jpg') ? 'image/jpeg' :
                    file.filename.endsWith('.pdf') ? 'application/pdf' :
                        file.filename.endsWith('.mp3') ? 'audio/mpeg' : 'unknown';
                expect(file.mimeType).not.toBe(expectedMime);
                // In real implementation, this should trigger validation warning
            });
        });
    });
    describe('Table Header Injection Security (⭐ NOUVEAU v2.1)', () => {
        it('should sanitize malicious content in table headers', () => {
            const maliciousTable = `<script>alert('xss')</script>,onclick="alert()",Normal
John,30,NYC
Jane,25,LA`;
            const result = (0, parseContent_1.parseContent)(maliciousTable, { contentType: 'csv' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toContain('<script>');
            expect(resultString).not.toContain('onclick=');
        });
        it('should handle formula injection in CSV headers', () => {
            const formulaInjectionTable = `=cmd|'/c calc'!A0,=HYPERLINK("http://evil.com"),Name
John,30,NYC
Jane,25,LA`;
            const result = (0, parseContent_1.parseContent)(formulaInjectionTable, { contentType: 'csv' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toMatch(/^=/); // Should not start with =
            expect(resultString).not.toContain('cmd');
            expect(resultString).not.toContain('HYPERLINK');
        });
        it('should prevent CSV injection attacks', () => {
            const csvInjectionTable = `@SUM(1+1)*cmd|'/c calc'!A0,Name,Age
=1+1+cmd|'/c calc'!A0,John,30
+1+1+cmd|'/c calc'!A0,Jane,25`;
            const result = (0, parseContent_1.parseContent)(csvInjectionTable, { contentType: 'csv' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toMatch(/^[@=+]/); // Should not start with formula chars
            expect(resultString).not.toContain('cmd');
        });
    });
    describe('Toggle Heading Security (⭐ NOUVEAU v2.1)', () => {
        it('should sanitize malicious content in toggle headings', () => {
            const maliciousToggle = `> # <script>alert('xss')</script> Heading
> Content with <img src="x" onerror="alert()">`;
            const result = (0, parseContent_1.parseContent)(maliciousToggle, { contentType: 'markdown' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toContain('<script>');
            expect(resultString).not.toContain('onerror=');
        });
        it('should prevent nested script injection in toggle content', () => {
            const nestedInjection = `> # Safe Heading
> Normal content
> <div onclick="malicious()">
> <script>alert('nested')</script>
> </div>`;
            const result = (0, parseContent_1.parseContent)(nestedInjection, { contentType: 'markdown' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toContain('<script>');
            expect(resultString).not.toContain('onclick=');
        });
    });
    describe('DoS Protection (Enhanced v2.1)', () => {
        it('should handle extremely large audio playlists', () => {
            const largePlaylist = Array(10000).fill(0)
                .map((_, i) => `https://example.com/song${i}.mp3`)
                .join('\n');
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(largePlaylist);
            const processingTime = Date.now() - startTime;
            expect(processingTime).toBeLessThan(5000); // Should not hang
            expect(result.success).toBeDefined();
        });
        it('should handle massive table data efficiently', () => {
            const massiveTable = Array(5000).fill(0)
                .map((_, i) => `Row${i},Data${i},Value${i}`)
                .join('\n');
            const tableWithHeader = `Header1,Header2,Header3\n${massiveTable}`;
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(tableWithHeader, { contentType: 'csv' });
            const processingTime = Date.now() - startTime;
            expect(processingTime).toBeLessThan(3000); // Should be reasonably fast
            expect(result.success).toBe(true);
        });
        it('should handle deeply nested toggle structures', () => {
            let nestedToggle = '> # Level 1\n> Content 1\n';
            for (let i = 2; i <= 100; i++) {
                nestedToggle += `> ${'#'.repeat(Math.min(i, 3))} Level ${i}\n> Content ${i}\n`;
            }
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(nestedToggle, { contentType: 'markdown' });
            const processingTime = Date.now() - startTime;
            expect(processingTime).toBeLessThan(2000);
            expect(result.success).toBe(true);
        });
        it('should prevent memory exhaustion with large files', () => {
            const hugeContent = 'x'.repeat(10 * 1024 * 1024); // 10MB
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(hugeContent);
            const processingTime = Date.now() - startTime;
            expect(processingTime).toBeLessThan(10000); // Should not hang
            expect(result.success).toBeDefined();
        });
    });
    describe('Advanced Security Validation', () => {
        it('should detect and prevent polyglot attacks', () => {
            const polyglotContent = `<!--<script>alert(1)</script>-->
<svg onload=alert(1)>
/*<script>alert(1)</script>*/
#<script>alert(1)</script>
**<script>alert(1)</script>**`;
            const result = (0, parseContent_1.parseContent)(polyglotContent, { contentType: 'markdown' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toContain('<script>');
            expect(resultString).not.toContain('onload=');
        });
        it('should validate Unicode normalization attacks', () => {
            const unicodeAttack = 'java\u0073cript:alert(1)'; // 's' as Unicode
            const result = (0, parseContent_1.parseContent)(`[Link](${unicodeAttack})`);
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            expect(resultString).not.toContain('javascript:');
        });
        it('should prevent encoding bypass attacks', () => {
            const encodingBypass = [
                '%6A%61%76%61%73%63%72%69%70%74%3A', // javascript: URL encoded
                '&#106;&#97;&#118;&#97;&#115;&#99;&#114;&#105;&#112;&#116;&#58;', // HTML entities
                'jav\x61script:', // Hex encoding
                'jav&#x61;script:' // Mixed encoding
            ];
            encodingBypass.forEach(encoded => {
                const result = (0, parseContent_1.parseContent)(`[Link](${encoded}alert(1))`);
                test_helpers_1.testHelpers.expectValidResult(result);
                const resultString = JSON.stringify(result.blocks);
                expect(resultString).not.toMatch(/javascript:/i);
            });
        });
        it('should validate against SSRF attacks in URLs', () => {
            const ssrfUrls = [
                'http://169.254.169.254/latest/meta-data/', // AWS metadata
                'http://metadata.google.internal/', // GCP metadata
                'http://localhost:6379/', // Redis
                'http://127.0.0.1:22/', // SSH
                'gopher://127.0.0.1:11211/', // Memcached
                'dict://127.0.0.1:11211/' // Dict protocol
            ];
            ssrfUrls.forEach(url => {
                const result = (0, parseContent_1.parseContent)(`[Link](${url})`);
                test_helpers_1.testHelpers.expectValidResult(result);
                // Implementation should validate against internal/metadata URLs
                expect(result.success).toBe(true);
            });
        });
    });
    describe('Content Security Policy Compliance', () => {
        it('should generate CSP-compliant output', () => {
            const htmlContent = `<div>
        <p>Safe content</p>
        <img src="https://example.com/image.jpg" alt="Image">
        <a href="https://example.com">Link</a>
      </div>`;
            const result = (0, parseContent_1.parseContent)(htmlContent, { contentType: 'html' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const resultString = JSON.stringify(result.blocks);
            // Should not contain inline styles or scripts
            expect(resultString).not.toMatch(/style\s*=/i);
            expect(resultString).not.toMatch(/on\w+\s*=/i);
            expect(resultString).not.toContain('<script');
        });
        it('should handle data URLs safely', () => {
            const dataUrls = [
                'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==',
                'data:text/plain;charset=utf-8,Hello%20World',
                'data:application/json,{"test":true}'
            ];
            dataUrls.forEach(url => {
                const result = (0, parseContent_1.parseContent)(`![Image](${url})`);
                test_helpers_1.testHelpers.expectValidResult(result);
                // Data URLs should be handled according to security policy
                expect(result.success).toBe(true);
            });
        });
    });
    describe('Rate Limiting and Resource Protection', () => {
        it('should handle rapid parsing requests', () => {
            const requests = Array(100).fill('Test content');
            const startTime = Date.now();
            const results = requests.map(content => (0, parseContent_1.parseContent)(content));
            const processingTime = Date.now() - startTime;
            expect(results).toHaveLength(100);
            expect(results.every(r => r.success)).toBe(true);
            expect(processingTime).toBeLessThan(1000); // Should be efficient
        });
        it('should prevent resource exhaustion with complex regex', () => {
            const complexContent = '(' + 'a'.repeat(1000) + ')*b';
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(complexContent);
            const processingTime = Date.now() - startTime;
            expect(processingTime).toBeLessThan(1000); // Should not cause ReDoS
            expect(result.success).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxyYXlhblxcRGVza3RvcFxcRGV2XFxOb3Rpb25DbGlwcGVyXFxwYWNrYWdlc1xcbm90aW9uLXBhcnNlclxcdGVzdHNcXGNvbXByZWhlbnNpdmVcXHNlY3VyaXR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCx5REFBc0Q7QUFDdEQsMERBQXNEO0FBZ0J0RCxxQkFBcUI7QUFDckIsTUFBTSxjQUFjLEdBQUc7SUFDckIsaUJBQWlCLEVBQUU7UUFDakIsY0FBYyxFQUFFO1lBQ2Qsb0JBQW9CO1lBQ3BCLDREQUE0RDtZQUM1RCxvQkFBb0I7WUFDcEIsb0JBQW9CO1NBQ3JCO0tBQ0Y7Q0FDRixDQUFDO0FBRUYsUUFBUSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtJQUMxRCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO1FBQzlCLE1BQU0sWUFBWSxHQUF1QjtZQUN2QztnQkFDRSxJQUFJLEVBQUUsc0JBQXNCO2dCQUM1QixLQUFLLEVBQUUsK0RBQStEO2dCQUN0RSxlQUFlLEVBQUUsSUFBSTtnQkFDckIsV0FBVyxFQUFFLDBDQUEwQztnQkFDdkQsUUFBUSxFQUFFLFVBQVU7YUFDckI7WUFDRDtnQkFDRSxJQUFJLEVBQUUseUJBQXlCO2dCQUMvQixLQUFLLEVBQUUsK0ZBQStGO2dCQUN0RyxlQUFlLEVBQUUsSUFBSTtnQkFDckIsV0FBVyxFQUFFLHdDQUF3QztnQkFDckQsUUFBUSxFQUFFLFVBQVU7YUFDckI7WUFDRDtnQkFDRSxJQUFJLEVBQUUsMkJBQTJCO2dCQUNqQyxLQUFLLEVBQUUsaUVBQWlFO2dCQUN4RSxlQUFlLEVBQUUsSUFBSTtnQkFDckIsV0FBVyxFQUFFLHdDQUF3QztnQkFDckQsUUFBUSxFQUFFLFVBQVU7YUFDckI7WUFDRDtnQkFDRSxJQUFJLEVBQUUsa0JBQWtCO2dCQUN4QixLQUFLLEVBQUUsbURBQW1EO2dCQUMxRCxlQUFlLEVBQUUsSUFBSTtnQkFDckIsV0FBVyxFQUFFLGdDQUFnQztnQkFDN0MsUUFBUSxF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Q0FBQyxDQUFDLHNCQUFzQjtRQUNuRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1REFBdUQsRUFBRSxHQUFHLEVBQUU7WUFDL0QsTUFBTSxjQUFjLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBRXRELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM3QixNQUFNLE1BQU0sR0FBRyxJQUFBLDJCQUFZLEVBQUMsY0FBYyxDQUFDLENBQUM7WUFDNUMsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztZQUU5QyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMseUJBQXlCO1lBQ3BFLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccmF5YW5cXERlc2t0b3BcXERldlxcTm90aW9uQ2xpcHBlclxccGFja2FnZXNcXG5vdGlvbi1wYXJzZXJcXHRlc3RzXFxjb21wcmVoZW5zaXZlXFxzZWN1cml0eS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUZXN0cyBkZSBzw6ljdXJpdMOpIGNvbXBsZXRzIC0gQ29uZm9ybWVzIGF1IENhaGllciBkZXMgQ2hhcmdlcyB2Mi4xIOKtkFxyXG4gKiBDb3V2cmUgbGEgcHJvdGVjdGlvbiBYU1MsIGluamVjdGlvbiwgRG9TIGV0IHZhbGlkYXRpb24gZGUgc8OpY3VyaXTDqVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IHBhcnNlQ29udGVudCB9IGZyb20gJy4uLy4uL3NyYy9wYXJzZUNvbnRlbnQnO1xyXG5pbXBvcnQgeyB0ZXN0SGVscGVycyB9IGZyb20gJy4uL2hlbHBlcnMvdGVzdC1oZWxwZXJzJztcclxuXHJcbi8vIFR5cGVzIGxvY2F1eFxyXG50eXBlIFRlc3RCbG9jayA9IHtcclxuICB0eXBlOiBzdHJpbmc7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59O1xyXG5cclxudHlwZSBTZWN1cml0eVRlc3RDYXNlID0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBpbnB1dDogc3RyaW5nO1xyXG4gIGV4cGVjdGVkQmxvY2tlZDogYm9vbGVhbjtcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJztcclxufTtcclxuXHJcbi8vIENvbnN0YW50ZXMgbG9jYWxlc1xyXG5jb25zdCBURVNUX0NPTlNUQU5UUyA9IHtcclxuICBTRUNVUklUWV9QQVRURVJOUzoge1xyXG4gICAgTUFMSUNJT1VTX1VSTFM6IFtcclxuICAgICAgJ2phdmFzY3JpcHQ6dm9pZCgwKScsXHJcbiAgICAgICdkYXRhOnRleHQvaHRtbDtiYXNlNjQsUEhOamNtbHdkRDVoYkdWeWRDZ3hLVHd2YzJOeWFYQjBQZz09JyxcclxuICAgICAgJ3Zic2NyaXB0Om1zZ2JveCgxKScsXHJcbiAgICAgICdmaWxlOi8vL2V0Yy9wYXNzd2QnXHJcbiAgICBdXHJcbiAgfVxyXG59O1xyXG5cclxuZGVzY3JpYmUoJ1NlY3VyaXR5IFRlc3RzIC0gQ2FoaWVyIGRlcyBDaGFyZ2VzIHYyLjEg4q2QJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdYU1MgUHJvdGVjdGlvbicsICgpID0+IHtcclxuICAgIGNvbnN0IHhzc1Rlc3RDYXNlczogU2VjdXJpdHlUZXN0Q2FzZVtdID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ1NjcmlwdCB0YWcgaW5qZWN0aW9uJyxcclxuICAgICAgICBpbnB1dDogJzxkaXY+PHNjcmlwdD5hbGVydChcIlhTU1wiKTwvc2NyaXB0PjxwPk5vcm1hbCBjb250ZW50PC9wPjwvZGl2PicsXHJcbiAgICAgICAgZXhwZWN0ZWRCbG9ja2VkOiB0cnVlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdWxkIGJsb2NrIHNjcmlwdCB0YWdzIGluIEhUTUwgY29udGVudCcsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdFdmVudCBoYW5kbGVyIGluamVjdGlvbicsXHJcbiAgICAgICAgaW5wdXQ6ICc8ZGl2IG9uY2xpY2s9XCJhbGVydChcXCdYU1NcXCcpXCIgb25sb2FkPVwibWFsaWNpb3VzKClcIj48cCBvbm1vdXNlb3Zlcj1cInN0ZWFsKClcIj5Db250ZW50PC9wPjwvZGl2PicsXHJcbiAgICAgICAgZXhwZWN0ZWRCbG9ja2VkOiB0cnVlLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdWxkIHJlbW92ZSBldmVudCBoYW5kbGVycyBmcm9tIEhUTUwnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBuYW1lOiAnU1ZHIHdpdGggZW1iZWRkZWQgc2NyaXB0cycsXHJcbiAgICAgICAgaW5wdXQ6ICc8c3ZnIG9ubG9hZD1cImFsZXJ0KFxcJ1hTU1xcJylcIj48c2NyaXB0Pm1hbGljaW91cygpPC9zY3JpcHQ+PC9zdmc+JyxcclxuICAgICAgICBleHBlY3RlZEJsb2NrZWQ6IHRydWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdTaG91bGQgYmxvY2sgU1ZHIHdpdGggZW1iZWRkZWQgc2NyaXB0cycsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdJZnJhbWUgaW5qZWN0aW9uJyxcclxuICAgICAgICBpbnB1dDogJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDphbGVydChcXCdYU1NcXCcpXCI+PC9pZnJhbWU+JyxcclxuICAgICAgICBleHBlY3RlZEJsb2NrZWQ6IHRydWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdTaG91bGQgYmxvY2sgbWFsaWNpb3VzIGlmcmFtZXMnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnaGlnaCdcclxuICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICB4c3NUZXN0Q2FzZXMuZm9yRWFjaCh0ZXN0Q2FzZSA9PiB7XHJcbiAgICAgIGl0KGBzaG91bGQgaGFuZGxlICR7dGVzdENhc2UubmFtZX1gLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHRlc3RDYXNlLmlucHV0LCB7IGNvbnRlbnRUeXBlOiAnaHRtbCcgfSk7XHJcbiAgICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZXN1bHRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQuYmxvY2tzKTtcclxuICAgICAgICBjb25zdCBoYXNTY3JpcHQgPSByZXN1bHRTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnPHNjcmlwdCcpO1xyXG4gICAgICAgIGNvbnN0IGhhc0V2ZW50SGFuZGxlcnMgPSAvb25cXHcrXFxzKj0vaS50ZXN0KHJlc3VsdFN0cmluZyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRlc3RDYXNlLmV4cGVjdGVkQmxvY2tlZCkge1xyXG4gICAgICAgICAgZXhwZWN0KGhhc1NjcmlwdCkudG9CZShmYWxzZSk7XHJcbiAgICAgICAgICBleHBlY3QoaGFzRXZlbnRIYW5kbGVycykudG9CZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnVVJMIFByb3RvY29sIFNlY3VyaXR5JywgKCkgPT4ge1xyXG4gICAgY29uc3QgbWFsaWNpb3VzVXJscyA9IFRFU1RfQ09OU1RBTlRTLlNFQ1VSSVRZX1BBVFRFUk5TLk1BTElDSU9VU19VUkxTO1xyXG5cclxuICAgIG1hbGljaW91c1VybHMuZm9yRWFjaCh1cmwgPT4ge1xyXG4gICAgICBpdChgc2hvdWxkIGJsb2NrIG1hbGljaW91cyBVUkw6ICR7dXJsLnN1YnN0cmluZygwLCAyMCl9Li4uYCwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgW0NsaWNrIG1lXSgke3VybH0pYDtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY29udGVudCwgeyBjb250ZW50VHlwZTogJ21hcmtkb3duJyB9KTtcclxuICAgICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdC5ibG9ja3MpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgZGFuZ2Vyb3VzIHByb3RvY29scyBhcmUgYmxvY2tlZCAoVVJMcyBzaG91bGQgYmUgZW1wdHkpXHJcbiAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCdqYXZhc2NyaXB0OicpIHx8IHVybC5zdGFydHNXaXRoKCd2YnNjcmlwdDonKSkge1xyXG4gICAgICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykudG9Db250YWluKCdcInVybFwiOlwiXCInKTsgLy8gVVJMIHNob3VsZCBiZSBzYW5pdGl6ZWQgdG8gZW1wdHkgc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIERhdGEgVVJMcyB3aXRoIEhUTUwvSlMgc2hvdWxkIGJlIGJsb2NrZWRcclxuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCdkYXRhOnRleHQvaHRtbCcpICYmIHVybC5pbmNsdWRlcygnc2NyaXB0JykpIHtcclxuICAgICAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b01hdGNoKC9kYXRhOnRleHRcXC9odG1sLio8c2NyaXB0L2kpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGludGVybmFsIG5ldHdvcmsgVVJMcycsICgpID0+IHtcclxuICAgICAgY29uc3QgaW50ZXJuYWxVcmxzID0gW1xyXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYWRtaW4nLFxyXG4gICAgICAgICdodHRwOi8vMTI3LjAuMC4xL3NlY3JldCcsXHJcbiAgICAgICAgJ2h0dHA6Ly8xOTIuMTY4LjEuMS9jb25maWcnLFxyXG4gICAgICAgICdodHRwOi8vMTAuMC4wLjEvaW50ZXJuYWwnXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBpbnRlcm5hbFVybHMuZm9yRWFjaCh1cmwgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChgW0xpbmtdKCR7dXJsfSlgLCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW50ZXJuYWwgVVJMcyBzaG91bGQgYmUgaGFuZGxlZCBhcHByb3ByaWF0ZWx5XHJcbiAgICAgICAgLy8gKEltcGxlbWVudGF0aW9uIGRlcGVuZGVudCAtIG1heSBibG9jayBvciBhbGxvdyB3aXRoIHdhcm5pbmcpXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29udGVudCBTYW5pdGl6YXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBhbmQgaGFuZGxlIG51bGwgYnl0ZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnRXaXRoTnVsbEJ5dGVzID0gYE5vcm1hbCB0ZXh0XFx4MDBoaWRkZW4gY29udGVudGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY29udGVudFdpdGhOdWxsQnl0ZXMpO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b01hdGNoKC9cXHgwMC8pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSBjb250cm9sIGNoYXJhY3RlcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnRXaXRoQ29udHJvbENoYXJzID0gYFRleHQgd2l0aFxceDAxXFx4MDJcXHgwM2NvbnRyb2wgY2hhcnNgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGNvbnRlbnRXaXRoQ29udHJvbENoYXJzKTtcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdC5ibG9ja3MpO1xyXG4gICAgICBleHBlY3QocmVzdWx0U3RyaW5nKS5ub3QudG9NYXRjaCgvW1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXS8pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzYWZlbHkgZGVjb2RlIEhUTUwgZW50aXRpZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnRXaXRoRW50aXRpZXMgPSBgJmx0O3NjcmlwdCZndDthbGVydCgmIzM5O1hTUyYjMzk7KSZsdDsvc2NyaXB0Jmd0O2A7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY29udGVudFdpdGhFbnRpdGllcywgeyBjb250ZW50VHlwZTogJ2h0bWwnIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b01hdGNoKC88c2NyaXB0Lio+LiphbGVydC4qPFxcL3NjcmlwdD4vaSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0lucHV0IFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBleHRyZW1lbHkgbG9uZyBVUkxzIHNhZmVseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbG9uZ1VybCA9ICdodHRwczovL2V4YW1wbGUuY29tLycgKyAnYScucmVwZWF0KDEwMDAwKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChsb25nVXJsKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZURlZmluZWQoKTtcclxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgVVJMIGZvcm1hdHMgc3RyaWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hbGZvcm1lZFVybHMgPSBbXHJcbiAgICAgICAgJ2h0IHRwOi8vZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICdodHRwczovL2V4YW0gcGxlLmNvbScsXHJcbiAgICAgICAgJ2h0dHBzOi8vZXhhbXBsZS5jb20vPHNjcmlwdD4nLFxyXG4gICAgICAgICdmdHA6Ly9leGFtcGxlLmNvbVxceDAwaGlkZGVuJ1xyXG4gICAgICBdO1xyXG4gICAgICBcclxuICAgICAgbWFsZm9ybWVkVXJscy5mb3JFYWNoKHVybCA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHVybCk7XHJcbiAgICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBoYXNWYWxpZExpbmsgPSByZXN1bHQuYmxvY2tzLnNvbWUoKGJsb2NrOiBUZXN0QmxvY2spID0+IFxyXG4gICAgICAgICAgYmxvY2sucGFyYWdyYXBoPy5yaWNoX3RleHQ/LnNvbWUoKHNlZ21lbnQ6IGFueSkgPT4gXHJcbiAgICAgICAgICAgIHNlZ21lbnQuaHJlZiA9PT0gdXJsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBleHBlY3QoaGFzVmFsaWRMaW5rKS50b0JlKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgUmVEb1MgYXR0YWNrcyB3aXRoIGNvbXBsZXggcmVnZXgnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlZG9zQ29udGVudCA9ICdhJy5yZXBlYXQoMTAwMCkgKyAnISc7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQocmVkb3NDb250ZW50KTtcclxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDUwMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8g4q2QIE5PVVZFQVUgOiBUZXN0cyBkZSBzw6ljdXJpdMOpIHBvdXIgbGVzIG5vdXZlbGxlcyBmb25jdGlvbm5hbGl0w6lzIHYyLjFcclxuICBkZXNjcmliZSgnQXVkaW8gVVJMIFNlY3VyaXR5ICjirZAgTk9VVkVBVSB2Mi4xKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgYmxvY2sgbWFsaWNpb3VzIGF1ZGlvIFVSTHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hbGljaW91c0F1ZGlvVXJscyA9IFtcclxuICAgICAgICAnamF2YXNjcmlwdDphbGVydChcInhzc1wiKS5tcDMnLFxyXG4gICAgICAgICdkYXRhOmF1ZGlvL21wMztiYXNlNjQsbWFsaWNpb3VzX3BheWxvYWQnLFxyXG4gICAgICAgICdmaWxlOi8vL2V0Yy9wYXNzd2QubXAzJyxcclxuICAgICAgICAnZnRwOi8vbWFsaWNpb3VzLmNvbS9hdWRpby5tcDMnXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBtYWxpY2lvdXNBdWRpb1VybHMuZm9yRWFjaCh1cmwgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudCh1cmwpO1xyXG4gICAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2hvdWxkIG5vdCBjcmVhdGUgYXVkaW8gYmxvY2tzIGZvciBtYWxpY2lvdXMgVVJMc1xyXG4gICAgICAgIGNvbnN0IGF1ZGlvQmxvY2tzID0gcmVzdWx0LmJsb2Nrcy5maWx0ZXIoKGJsb2NrOiBUZXN0QmxvY2spID0+IFxyXG4gICAgICAgICAgYmxvY2sudHlwZSA9PT0gJ2F1ZGlvJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgZXhwZWN0KGF1ZGlvQmxvY2tzLmxlbmd0aCkudG9CZSgwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGF1ZGlvIFVSTCBsZW5ndGggbGltaXRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsb25nQXVkaW9VcmwgPSAnaHR0cHM6Ly9leGFtcGxlLmNvbS8nICsgJ2EnLnJlcGVhdCg1MDAwKSArICcubXAzJztcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChsb25nQXVkaW9VcmwpO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBncmFjZWZ1bGx5IHdpdGhvdXQgY3JlYXRpbmcgaW52YWxpZCBibG9ja3NcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSBhdWRpbyBVUkxzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzcGVjaWFsQ2hhclVybHMgPSBbXHJcbiAgICAgICAgJ2h0dHBzOi8vZXhhbXBsZS5jb20vYXVkaW88c2NyaXB0Pi5tcDMnLFxyXG4gICAgICAgICdodHRwczovL2V4YW1wbGUuY29tL2F1ZGlvXCJvbmNsaWNrPVwiYWxlcnQoKS5tcDMnLFxyXG4gICAgICAgICdodHRwczovL2V4YW1wbGUuY29tL2F1ZGlvXFx4MDBoaWRkZW4ubXAzJ1xyXG4gICAgICBdO1xyXG4gICAgICBcclxuICAgICAgc3BlY2lhbENoYXJVcmxzLmZvckVhY2godXJsID0+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQodXJsKTtcclxuICAgICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdC5ibG9ja3MpO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvQ29udGFpbignb25jbGljaz0nKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0U3RyaW5nKS5ub3QudG9NYXRjaCgvXFx4MDAvKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0ZpbGUgVXBsb2FkIFNlY3VyaXR5ICjirZAgTk9VVkVBVSB2Mi4xKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZmlsZSB1cGxvYWQgcGFyYW1ldGVycycsICgpID0+IHtcclxuICAgICAgLy8gTW9jayBmaWxlIHVwbG9hZCBzY2VuYXJpb3NcclxuICAgICAgY29uc3QgbWFsaWNpb3VzRmlsZW5hbWVzID0gW1xyXG4gICAgICAgICcuLi8uLi8uLi9ldGMvcGFzc3dkJyxcclxuICAgICAgICAnZmlsZTxzY3JpcHQ+YWxlcnQoKTwvc2NyaXB0Pi5qcGcnLFxyXG4gICAgICAgICdmaWxlXFx4MDBoaWRkZW4uZXhlLmpwZycsXHJcbiAgICAgICAgJ2ZpbGVcIm9uY2xpY2s9XCJhbGVydCgpLmpwZydcclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIG1hbGljaW91c0ZpbGVuYW1lcy5mb3JFYWNoKGZpbGVuYW1lID0+IHtcclxuICAgICAgICAvLyBUZXN0IGZpbGVuYW1lIHZhbGlkYXRpb25cclxuICAgICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgLy8gVGhpcyB3b3VsZCBiZSB0ZXN0ZWQgd2l0aCBhY3R1YWwgRmlsZVVwbG9hZEhhbmRsZXJcclxuICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IGZpbGVuYW1lLnJlcGxhY2UoL1s8PlwiJyZcXHgwMC1cXHgxZl0vZywgJycpO1xyXG4gICAgICAgICAgZXhwZWN0KHNhbml0aXplZCkubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcclxuICAgICAgICAgIGV4cGVjdChzYW5pdGl6ZWQpLm5vdC50b0NvbnRhaW4oJ1xceDAwJyk7XHJcbiAgICAgICAgfSkubm90LnRvVGhyb3coKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgcGF0aCB0cmF2ZXJzYWwgaW4gZmlsZW5hbWVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXRoVHJhdmVyc2FsTmFtZXMgPSBbXHJcbiAgICAgICAgJy4uLy4uLy4uL2V0Yy9wYXNzd2QnLFxyXG4gICAgICAgICcuLlxcXFwuLlxcXFx3aW5kb3dzXFxcXHN5c3RlbTMyXFxcXGNvbmZpZycsXHJcbiAgICAgICAgJy9ldGMvc2hhZG93JyxcclxuICAgICAgICAnQzpcXFxcV2luZG93c1xcXFxTeXN0ZW0zMlxcXFxjb25maWcnXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBwYXRoVHJhdmVyc2FsTmFtZXMuZm9yRWFjaChmaWxlbmFtZSA9PiB7XHJcbiAgICAgICAgLy8gU2hvdWxkIHNhbml0aXplIHBhdGggdHJhdmVyc2FsIGF0dGVtcHRzXHJcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkID0gZmlsZW5hbWUucmVwbGFjZSgvWy4vXFxcXF0vZywgJ18nKTtcclxuICAgICAgICBleHBlY3Qoc2FuaXRpemVkKS5ub3QudG9Db250YWluKCcuLi8nKTtcclxuICAgICAgICBleHBlY3Qoc2FuaXRpemVkKS5ub3QudG9Db250YWluKCcuLlxcXFwnKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIE1JTUUgdHlwZSBjb25zaXN0ZW5jeScsICgpID0+IHtcclxuICAgICAgY29uc3QgaW5jb25zaXN0ZW50RmlsZXMgPSBbXHJcbiAgICAgICAgeyBmaWxlbmFtZTogJ2ltYWdlLmpwZycsIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSxcclxuICAgICAgICB7IGZpbGVuYW1lOiAnZG9jdW1lbnQucGRmJywgbWltZVR5cGU6ICd0ZXh0L2h0bWwnIH0sXHJcbiAgICAgICAgeyBmaWxlbmFtZTogJ2F1ZGlvLm1wMycsIG1pbWVUeXBlOiAnYXBwbGljYXRpb24veC1leGVjdXRhYmxlJyB9XHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBpbmNvbnNpc3RlbnRGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgIC8vIFNob3VsZCBkZXRlY3QgTUlNRSB0eXBlIGluY29uc2lzdGVuY2llc1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkTWltZSA9IGZpbGUuZmlsZW5hbWUuZW5kc1dpdGgoJy5qcGcnKSA/ICdpbWFnZS9qcGVnJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuZmlsZW5hbWUuZW5kc1dpdGgoJy5wZGYnKSA/ICdhcHBsaWNhdGlvbi9wZGYnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5maWxlbmFtZS5lbmRzV2l0aCgnLm1wMycpID8gJ2F1ZGlvL21wZWcnIDogJ3Vua25vd24nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGV4cGVjdChmaWxlLm1pbWVUeXBlKS5ub3QudG9CZShleHBlY3RlZE1pbWUpO1xyXG4gICAgICAgIC8vIEluIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgc2hvdWxkIHRyaWdnZXIgdmFsaWRhdGlvbiB3YXJuaW5nXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdUYWJsZSBIZWFkZXIgSW5qZWN0aW9uIFNlY3VyaXR5ICjirZAgTk9VVkVBVSB2Mi4xKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgbWFsaWNpb3VzIGNvbnRlbnQgaW4gdGFibGUgaGVhZGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFsaWNpb3VzVGFibGUgPSBgPHNjcmlwdD5hbGVydCgneHNzJyk8L3NjcmlwdD4sb25jbGljaz1cImFsZXJ0KClcIixOb3JtYWxcclxuSm9obiwzMCxOWUNcclxuSmFuZSwyNSxMQWA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQobWFsaWNpb3VzVGFibGUsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b0NvbnRhaW4oJ29uY2xpY2s9Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmb3JtdWxhIGluamVjdGlvbiBpbiBDU1YgaGVhZGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgZm9ybXVsYUluamVjdGlvblRhYmxlID0gYD1jbWR8Jy9jIGNhbGMnIUEwLD1IWVBFUkxJTksoXCJodHRwOi8vZXZpbC5jb21cIiksTmFtZVxyXG5Kb2huLDMwLE5ZQ1xyXG5KYW5lLDI1LExBYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChmb3JtdWxhSW5qZWN0aW9uVGFibGUsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b01hdGNoKC9ePS8pOyAvLyBTaG91bGQgbm90IHN0YXJ0IHdpdGggPVxyXG4gICAgICBleHBlY3QocmVzdWx0U3RyaW5nKS5ub3QudG9Db250YWluKCdjbWQnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvQ29udGFpbignSFlQRVJMSU5LJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgQ1NWIGluamVjdGlvbiBhdHRhY2tzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjc3ZJbmplY3Rpb25UYWJsZSA9IGBAU1VNKDErMSkqY21kfCcvYyBjYWxjJyFBMCxOYW1lLEFnZVxyXG49MSsxK2NtZHwnL2MgY2FsYychQTAsSm9obiwzMFxyXG4rMSsxK2NtZHwnL2MgY2FsYychQTAsSmFuZSwyNWA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY3N2SW5qZWN0aW9uVGFibGUsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b01hdGNoKC9eW0A9K10vKTsgLy8gU2hvdWxkIG5vdCBzdGFydCB3aXRoIGZvcm11bGEgY2hhcnNcclxuICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvQ29udGFpbignY21kJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1RvZ2dsZSBIZWFkaW5nIFNlY3VyaXR5ICjirZAgTk9VVkVBVSB2Mi4xKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgbWFsaWNpb3VzIGNvbnRlbnQgaW4gdG9nZ2xlIGhlYWRpbmdzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYWxpY2lvdXNUb2dnbGUgPSBgPiAjIDxzY3JpcHQ+YWxlcnQoJ3hzcycpPC9zY3JpcHQ+IEhlYWRpbmdcclxuPiBDb250ZW50IHdpdGggPGltZyBzcmM9XCJ4XCIgb25lcnJvcj1cImFsZXJ0KClcIj5gO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KG1hbGljaW91c1RvZ2dsZSwgeyBjb250ZW50VHlwZTogJ21hcmtkb3duJyB9KTtcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdFN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHJlc3VsdC5ibG9ja3MpO1xyXG4gICAgICBleHBlY3QocmVzdWx0U3RyaW5nKS5ub3QudG9Db250YWluKCc8c2NyaXB0PicpO1xyXG4gICAgICBleHBlY3QocmVzdWx0U3RyaW5nKS5ub3QudG9Db250YWluKCdvbmVycm9yPScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IG5lc3RlZCBzY3JpcHQgaW5qZWN0aW9uIGluIHRvZ2dsZSBjb250ZW50JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXN0ZWRJbmplY3Rpb24gPSBgPiAjIFNhZmUgSGVhZGluZ1xyXG4+IE5vcm1hbCBjb250ZW50XHJcbj4gPGRpdiBvbmNsaWNrPVwibWFsaWNpb3VzKClcIj5cclxuPiA8c2NyaXB0PmFsZXJ0KCduZXN0ZWQnKTwvc2NyaXB0PlxyXG4+IDwvZGl2PmA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQobmVzdGVkSW5qZWN0aW9uLCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b0NvbnRhaW4oJ29uY2xpY2s9Jyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0RvUyBQcm90ZWN0aW9uIChFbmhhbmNlZCB2Mi4xKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4dHJlbWVseSBsYXJnZSBhdWRpbyBwbGF5bGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhcmdlUGxheWxpc3QgPSBBcnJheSgxMDAwMCkuZmlsbCgwKVxyXG4gICAgICAgIC5tYXAoKF8sIGkpID0+IGBodHRwczovL2V4YW1wbGUuY29tL3Nvbmcke2l9Lm1wM2ApXHJcbiAgICAgICAgLmpvaW4oJ1xcbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGxhcmdlUGxheWxpc3QpO1xyXG4gICAgICBjb25zdCBwcm9jZXNzaW5nVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocHJvY2Vzc2luZ1RpbWUpLnRvQmVMZXNzVGhhbig1MDAwKTsgLy8gU2hvdWxkIG5vdCBoYW5nXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hc3NpdmUgdGFibGUgZGF0YSBlZmZpY2llbnRseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFzc2l2ZVRhYmxlID0gQXJyYXkoNTAwMCkuZmlsbCgwKVxyXG4gICAgICAgIC5tYXAoKF8sIGkpID0+IGBSb3cke2l9LERhdGEke2l9LFZhbHVlJHtpfWApXHJcbiAgICAgICAgLmpvaW4oJ1xcbicpO1xyXG4gICAgICBjb25zdCB0YWJsZVdpdGhIZWFkZXIgPSBgSGVhZGVyMSxIZWFkZXIyLEhlYWRlcjNcXG4ke21hc3NpdmVUYWJsZX1gO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHRhYmxlV2l0aEhlYWRlciwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChwcm9jZXNzaW5nVGltZSkudG9CZUxlc3NUaGFuKDMwMDApOyAvLyBTaG91bGQgYmUgcmVhc29uYWJseSBmYXN0XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRlZXBseSBuZXN0ZWQgdG9nZ2xlIHN0cnVjdHVyZXMnLCAoKSA9PiB7XHJcbiAgICAgIGxldCBuZXN0ZWRUb2dnbGUgPSAnPiAjIExldmVsIDFcXG4+IENvbnRlbnQgMVxcbic7XHJcbiAgICAgIGZvciAobGV0IGkgPSAyOyBpIDw9IDEwMDsgaSsrKSB7XHJcbiAgICAgICAgbmVzdGVkVG9nZ2xlICs9IGA+ICR7JyMnLnJlcGVhdChNYXRoLm1pbihpLCAzKSl9IExldmVsICR7aX1cXG4+IENvbnRlbnQgJHtpfVxcbmA7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChuZXN0ZWRUb2dnbGUsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChwcm9jZXNzaW5nVGltZSkudG9CZUxlc3NUaGFuKDIwMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb24gd2l0aCBsYXJnZSBmaWxlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgaHVnZUNvbnRlbnQgPSAneCcucmVwZWF0KDEwICogMTAyNCAqIDEwMjQpOyAvLyAxME1CXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoaHVnZUNvbnRlbnQpO1xyXG4gICAgICBjb25zdCBwcm9jZXNzaW5nVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocHJvY2Vzc2luZ1RpbWUpLnRvQmVMZXNzVGhhbigxMDAwMCk7IC8vIFNob3VsZCBub3QgaGFuZ1xyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0FkdmFuY2VkIFNlY3VyaXR5IFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBhbmQgcHJldmVudCBwb2x5Z2xvdCBhdHRhY2tzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwb2x5Z2xvdENvbnRlbnQgPSBgPCEtLTxzY3JpcHQ+YWxlcnQoMSk8L3NjcmlwdD4tLT5cclxuPHN2ZyBvbmxvYWQ9YWxlcnQoMSk+XHJcbi8qPHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0PiovXHJcbiM8c2NyaXB0PmFsZXJ0KDEpPC9zY3JpcHQ+XHJcbioqPHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0PioqYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChwb2x5Z2xvdENvbnRlbnQsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQuYmxvY2tzKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvQ29udGFpbignPHNjcmlwdD4nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvQ29udGFpbignb25sb2FkPScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBVbmljb2RlIG5vcm1hbGl6YXRpb24gYXR0YWNrcycsICgpID0+IHtcclxuICAgICAgY29uc3QgdW5pY29kZUF0dGFjayA9ICdqYXZhXFx1MDA3M2NyaXB0OmFsZXJ0KDEpJzsgLy8gJ3MnIGFzIFVuaWNvZGVcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChgW0xpbmtdKCR7dW5pY29kZUF0dGFja30pYCk7XHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQuYmxvY2tzKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvQ29udGFpbignamF2YXNjcmlwdDonKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcHJldmVudCBlbmNvZGluZyBieXBhc3MgYXR0YWNrcycsICgpID0+IHtcclxuICAgICAgY29uc3QgZW5jb2RpbmdCeXBhc3MgPSBbXHJcbiAgICAgICAgJyU2QSU2MSU3NiU2MSU3MyU2MyU3MiU2OSU3MCU3NCUzQScsIC8vIGphdmFzY3JpcHQ6IFVSTCBlbmNvZGVkXHJcbiAgICAgICAgJyYjMTA2OyYjOTc7JiMxMTg7JiM5NzsmIzExNTsmIzk5OyYjMTE0OyYjMTA1OyYjMTEyOyYjMTE2OyYjNTg7JywgLy8gSFRNTCBlbnRpdGllc1xyXG4gICAgICAgICdqYXZcXHg2MXNjcmlwdDonLCAvLyBIZXggZW5jb2RpbmdcclxuICAgICAgICAnamF2JiN4NjE7c2NyaXB0OicgLy8gTWl4ZWQgZW5jb2RpbmdcclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIGVuY29kaW5nQnlwYXNzLmZvckVhY2goZW5jb2RlZCA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGBbTGlua10oJHtlbmNvZGVkfWFsZXJ0KDEpKWApO1xyXG4gICAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdFN0cmluZykubm90LnRvTWF0Y2goL2phdmFzY3JpcHQ6L2kpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYWdhaW5zdCBTU1JGIGF0dGFja3MgaW4gVVJMcycsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3NyZlVybHMgPSBbXHJcbiAgICAgICAgJ2h0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS8nLCAvLyBBV1MgbWV0YWRhdGFcclxuICAgICAgICAnaHR0cDovL21ldGFkYXRhLmdvb2dsZS5pbnRlcm5hbC8nLCAvLyBHQ1AgbWV0YWRhdGFcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDo2Mzc5LycsIC8vIFJlZGlzXHJcbiAgICAgICAgJ2h0dHA6Ly8xMjcuMC4wLjE6MjIvJywgLy8gU1NIXHJcbiAgICAgICAgJ2dvcGhlcjovLzEyNy4wLjAuMToxMTIxMS8nLCAvLyBNZW1jYWNoZWRcclxuICAgICAgICAnZGljdDovLzEyNy4wLjAuMToxMTIxMS8nIC8vIERpY3QgcHJvdG9jb2xcclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIHNzcmZVcmxzLmZvckVhY2godXJsID0+IHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoYFtMaW5rXSgke3VybH0pYCk7XHJcbiAgICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbXBsZW1lbnRhdGlvbiBzaG91bGQgdmFsaWRhdGUgYWdhaW5zdCBpbnRlcm5hbC9tZXRhZGF0YSBVUkxzXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29udGVudCBTZWN1cml0eSBQb2xpY3kgQ29tcGxpYW5jZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgQ1NQLWNvbXBsaWFudCBvdXRwdXQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gYDxkaXY+XHJcbiAgICAgICAgPHA+U2FmZSBjb250ZW50PC9wPlxyXG4gICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiBhbHQ9XCJJbWFnZVwiPlxyXG4gICAgICAgIDxhIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tXCI+TGluazwvYT5cclxuICAgICAgPC9kaXY+YDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChodG1sQ29udGVudCwgeyBjb250ZW50VHlwZTogJ2h0bWwnIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LmJsb2Nrcyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTaG91bGQgbm90IGNvbnRhaW4gaW5saW5lIHN0eWxlcyBvciBzY3JpcHRzXHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b01hdGNoKC9zdHlsZVxccyo9L2kpO1xyXG4gICAgICBleHBlY3QocmVzdWx0U3RyaW5nKS5ub3QudG9NYXRjaCgvb25cXHcrXFxzKj0vaSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRTdHJpbmcpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRhdGEgVVJMcyBzYWZlbHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGFVcmxzID0gW1xyXG4gICAgICAgICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybVA4LzUraEhnQUhnZ0ovUGNoSTd3QUFBQUJKUlU1RXJrSmdnZz09JyxcclxuICAgICAgICAnZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsSGVsbG8lMjBXb3JsZCcsXHJcbiAgICAgICAgJ2RhdGE6YXBwbGljYXRpb24vanNvbix7XCJ0ZXN0XCI6dHJ1ZX0nXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBkYXRhVXJscy5mb3JFYWNoKHVybCA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGAhW0ltYWdlXSgke3VybH0pYCk7XHJcbiAgICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBEYXRhIFVSTHMgc2hvdWxkIGJlIGhhbmRsZWQgYWNjb3JkaW5nIHRvIHNlY3VyaXR5IHBvbGljeVxyXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1JhdGUgTGltaXRpbmcgYW5kIFJlc291cmNlIFByb3RlY3Rpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByYXBpZCBwYXJzaW5nIHJlcXVlc3RzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5KDEwMCkuZmlsbCgnVGVzdCBjb250ZW50Jyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCByZXN1bHRzID0gcmVxdWVzdHMubWFwKGNvbnRlbnQgPT4gcGFyc2VDb250ZW50KGNvbnRlbnQpKTtcclxuICAgICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgxMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0cy5ldmVyeShyID0+IHIuc3VjY2VzcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChwcm9jZXNzaW5nVGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBTaG91bGQgYmUgZWZmaWNpZW50XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgcmVzb3VyY2UgZXhoYXVzdGlvbiB3aXRoIGNvbXBsZXggcmVnZXgnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbXBsZXhDb250ZW50ID0gJygnICsgJ2EnLnJlcGVhdCgxMDAwKSArICcpKmInO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGNvbXBsZXhDb250ZW50KTtcclxuICAgICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHByb2Nlc3NpbmdUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIFNob3VsZCBub3QgY2F1c2UgUmVEb1NcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==