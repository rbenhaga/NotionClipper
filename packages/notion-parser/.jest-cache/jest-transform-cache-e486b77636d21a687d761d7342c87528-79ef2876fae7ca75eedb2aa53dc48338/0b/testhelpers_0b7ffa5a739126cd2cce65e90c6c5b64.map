{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\helpers\\test-helpers.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\helpers\\test-helpers.ts"],"sourcesContent":["/**\r\n * Helpers centralis√©s pour les tests\r\n */\r\n\r\n// Types locaux pour √©viter les probl√®mes d'import\r\ntype TestBlock = {\r\n  type: string;\r\n  [key: string]: any;\r\n  children?: TestBlock[];\r\n  has_children?: boolean;\r\n};\r\n\r\ntype TestResult = {\r\n  success: boolean;\r\n  blocks: TestBlock[];\r\n  error?: string;\r\n  validation?: any;\r\n  metadata?: {\r\n    detectedType: string;\r\n    confidence: number;\r\n    originalLength: number;\r\n    blockCount: number;\r\n    processingTime: number;\r\n    contentType?: string;\r\n    detectionConfidence?: number;\r\n  };\r\n};\r\n\r\ntype PerformanceMetrics = {\r\n  startTime: number;\r\n  endTime: number;\r\n  duration: number;\r\n  memoryBefore: number;\r\n  memoryAfter: number;\r\n  memoryDelta: number;\r\n};\r\n\r\ninterface TestHelpers {\r\n  expectValidResult(result: TestResult): void;\r\n  expectBlockTypes(blocks: TestBlock[], expectedTypes: string[]): void;\r\n  expectRichTextContent(block: TestBlock, expectedContent: string): void;\r\n  measurePerformance<T>(fn: () => T): { result: T; metrics: PerformanceMetrics };\r\n}\r\n\r\nexport class TestHelpersImpl implements TestHelpers {\r\n  expectValidResult(result: TestResult): void {\r\n    expect(result).toBeDefined();\r\n    expect(result.success).toBe(true);\r\n    expect(result.blocks).toBeDefined();\r\n    expect(Array.isArray(result.blocks)).toBe(true);\r\n    expect(result.error).toBeUndefined();\r\n  }\r\n\r\n  expectBlockTypes(blocks: TestBlock[], expectedTypes: string[]): void {\r\n    const actualTypes = blocks.map(b => b.type);\r\n    expectedTypes.forEach(expectedType => {\r\n      expect(actualTypes).toContain(expectedType);\r\n    });\r\n  }\r\n\r\n  expectRichTextContent(block: TestBlock, expectedContent: string): void {\r\n    const richText = this.extractRichText(block);\r\n    const content = richText.map(rt => rt.text?.content || rt.plain_text || '').join('');\r\n    expect(content).toBe(expectedContent);\r\n  }\r\n\r\n  measurePerformance<T>(fn: () => T): { result: T; metrics: PerformanceMetrics } {\r\n    const memoryBefore = process.memoryUsage().heapUsed;\r\n    const startTime = performance.now();\r\n    \r\n    const result = fn();\r\n    \r\n    const endTime = performance.now();\r\n    const memoryAfter = process.memoryUsage().heapUsed;\r\n    \r\n    return {\r\n      result,\r\n      metrics: {\r\n        startTime,\r\n        endTime,\r\n        duration: endTime - startTime,\r\n        memoryBefore,\r\n        memoryAfter,\r\n        memoryDelta: (memoryAfter - memoryBefore) / 1024 / 1024 // MB\r\n      }\r\n    };\r\n  }\r\n\r\n  private extractRichText(block: TestBlock): any[] {\r\n    // Essayer diff√©rents chemins pour trouver le rich_text\r\n    if (block.paragraph?.rich_text) return block.paragraph.rich_text;\r\n    if (block.heading_1?.rich_text) return block.heading_1.rich_text;\r\n    if (block.heading_2?.rich_text) return block.heading_2.rich_text;\r\n    if (block.heading_3?.rich_text) return block.heading_3.rich_text;\r\n    if (block.callout?.rich_text) return block.callout.rich_text;\r\n    if (block.quote?.rich_text) return block.quote.rich_text;\r\n    if (block.rich_text) return block.rich_text;\r\n    return [];\r\n  }\r\n}\r\n\r\n// Instance globale des helpers\r\nexport const testHelpers = new TestHelpersImpl();\r\n\r\n// G√©n√©rateurs de contenu de test\r\nexport class ContentGenerators {\r\n  static generateMarkdown(size: 'small' | 'medium' | 'large'): string {\r\n    const baseContent = `# Test Header\r\nThis is a paragraph with **bold** and *italic* text.\r\n\r\n## Subsection\r\n- List item 1\r\n- List item 2 with [link](https://example.com)\r\n\r\n### Code Example\r\n\\`\\`\\`javascript\r\nfunction test() {\r\n  return \"hello world\";\r\n}\r\n\\`\\`\\`\r\n\r\n> This is a blockquote\r\n\r\n| Column 1 | Column 2 |\r\n|----------|----------|\r\n| Cell 1   | Cell 2   |\r\n`;\r\n\r\n    switch (size) {\r\n      case 'small':\r\n        return baseContent;\r\n      case 'medium':\r\n        return Array(10).fill(baseContent).join('\\n\\n');\r\n      case 'large':\r\n        return Array(100).fill(baseContent).join('\\n\\n');\r\n      default:\r\n        return baseContent;\r\n    }\r\n  }\r\n\r\n  static generateCode(language: string, size: 'small' | 'medium' | 'large'): string {\r\n    const templates = {\r\n      javascript: `function example() {\r\n  console.log(\"Hello World\");\r\n  return true;\r\n}`,\r\n      python: `def example():\r\n    print(\"Hello World\")\r\n    return True`,\r\n      java: `public class Example {\r\n    public static void main(String[] args) {\r\n        System.out.println(\"Hello World\");\r\n    }\r\n}`,\r\n      css: `.example {\r\n  color: red;\r\n  font-size: 16px;\r\n}`\r\n    };\r\n\r\n    const baseCode = templates[language as keyof typeof templates] || templates.javascript;\r\n\r\n    switch (size) {\r\n      case 'small':\r\n        return baseCode;\r\n      case 'medium':\r\n        return Array(50).fill(0).map((_, i) => \r\n          baseCode.replace(/example/g, `example${i}`)\r\n        ).join('\\n\\n');\r\n      case 'large':\r\n        return Array(500).fill(0).map((_, i) => \r\n          baseCode.replace(/example/g, `example${i}`)\r\n        ).join('\\n\\n');\r\n      default:\r\n        return baseCode;\r\n    }\r\n  }\r\n\r\n  static generateTable(format: 'csv' | 'tsv' | 'markdown', rows: number = 10): string {\r\n    const headers = ['Name', 'Age', 'City', 'Country'];\r\n    const data = Array(rows).fill(0).map((_, i) => [\r\n      `Person${i}`,\r\n      `${20 + i}`,\r\n      `City${i}`,\r\n      `Country${i}`\r\n    ]);\r\n\r\n    switch (format) {\r\n      case 'csv':\r\n        return [headers.join(','), ...data.map(row => row.join(','))].join('\\n');\r\n      case 'tsv':\r\n        return [headers.join('\\t'), ...data.map(row => row.join('\\t'))].join('\\n');\r\n      case 'markdown':\r\n        const separator = headers.map(() => '---').join('|');\r\n        return [\r\n          `|${headers.join('|')}|`,\r\n          `|${separator}|`,\r\n          ...data.map(row => `|${row.join('|')}|`)\r\n        ].join('\\n');\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  static generateComplexContent(): string {\r\n    return `# Complex Document Test\r\n\r\nThis document contains various types of content to test comprehensive parsing.\r\n\r\n## Rich Text Formatting\r\n\r\nHere we have **bold text**, *italic text*, ***bold and italic***, ~~strikethrough~~, \\`inline code\\`, and [links](https://example.com).\r\n\r\n### Nested Formatting\r\n\r\n**Bold with \\`code\\` inside** and *italic with [link](https://example.com) inside*.\r\n\r\n## Lists\r\n\r\n### Bulleted Lists\r\n- Item 1\r\n- Item 2\r\n  - Nested item 1\r\n  - Nested item 2\r\n    - Deep nested item\r\n\r\n### Numbered Lists\r\n1. First item\r\n2. Second item\r\n   1. Nested numbered\r\n   2. Another nested\r\n\r\n### Todo Lists\r\n- [ ] Unchecked task\r\n- [x] Completed task\r\n- [ ] Another task\r\n\r\n## Code Blocks\r\n\r\n\\`\\`\\`javascript\r\nfunction complexFunction(param1, param2) {\r\n  const result = param1 + param2;\r\n  console.log(\\`Result: \\${result}\\`);\r\n  return result;\r\n}\r\n\r\n// Usage\r\nconst value = complexFunction(10, 20);\r\n\\`\\`\\`\r\n\r\n\\`\\`\\`python\r\ndef complex_function(param1, param2):\r\n    result = param1 + param2\r\n    print(f\"Result: {result}\")\r\n    return result\r\n\r\n# Usage\r\nvalue = complex_function(10, 20)\r\n\\`\\`\\`\r\n\r\n## Tables\r\n\r\n| Feature | Status | Priority | Notes |\r\n|---------|--------|----------|-------|\r\n| Parsing | ‚úÖ Done | High | Core functionality |\r\n| Testing | üîÑ In Progress | High | Comprehensive coverage |\r\n| Docs | ‚ùå Todo | Medium | User documentation |\r\n\r\n## Callouts\r\n\r\n> [!note] Important Note\r\n> This is a note callout with **formatting**.\r\n\r\n> [!warning] Warning\r\n> This is a warning callout.\r\n\r\n> [!tip] Pro Tip\r\n> This is a tip callout with \\`code\\`.\r\n\r\n## Quotes\r\n\r\n> This is a simple quote.\r\n> \r\n> It can span multiple lines.\r\n\r\n> > This is a nested quote.\r\n\r\n## Mathematical Expressions\r\n\r\nThe formula $E = mc^2$ is famous.\r\n\r\nBlock equation:\r\n$$\r\n\\\\int_{a}^{b} f(x) \\\\, dx = F(b) - F(a)\r\n$$\r\n\r\n## Media Links\r\n\r\nImage: ![Test Image](https://example.com/image.jpg)\r\nVideo: https://youtube.com/watch?v=dQw4w9WgXcQ\r\nAudio: https://example.com/audio.mp3\r\n\r\n## Dividers\r\n\r\n---\r\n\r\n## Unicode and Special Characters\r\n\r\nEmojis: üöÄ üéØ ‚úÖ ‚ùå üî• üí°\r\nAccents: caf√©, na√Øve, r√©sum√©\r\nMath symbols: Œ± Œ≤ Œ≥ Œ¥ ‚àë ‚à´ ‚àû\r\nArrows: ‚Üí ‚Üê ‚Üë ‚Üì ‚áí ‚áê\r\n\r\n## Edge Cases\r\n\r\nEmpty lines:\r\n\r\n\r\n\r\nMultiple spaces:    test    with    spaces\r\n\r\nSpecial characters: @#$%^&*()_+-={}[]|\\\\:\";'<>?,./ \r\n\r\nVery long line: ${'a'.repeat(1000)}\r\n\r\n## End of Document`;\r\n  }\r\n}\r\n\r\n// Utilitaires de validation\r\nexport class ValidationUtils {\r\n  static isValidNotionBlock(block: any): boolean {\r\n    return (\r\n      block &&\r\n      typeof block === 'object' &&\r\n      typeof block.type === 'string' &&\r\n      block[block.type] !== undefined\r\n    );\r\n  }\r\n\r\n  static hasRichText(block: TestBlock): boolean {\r\n    const richTextPaths = [\r\n      'paragraph.rich_text',\r\n      'heading_1.rich_text',\r\n      'heading_2.rich_text',\r\n      'heading_3.rich_text',\r\n      'callout.rich_text',\r\n      'quote.rich_text'\r\n    ];\r\n\r\n    return richTextPaths.some(path => {\r\n      const value = this.getNestedProperty(block, path);\r\n      return Array.isArray(value) && value.length > 0;\r\n    });\r\n  }\r\n\r\n  static getNestedProperty(obj: any, path: string): any {\r\n    return path.split('.').reduce((current, key) => current?.[key], obj);\r\n  }\r\n\r\n  static countBlocks(blocks: TestBlock[]): Record<string, number> {\r\n    const counts: Record<string, number> = {};\r\n    \r\n    const countRecursive = (blockList: TestBlock[]) => {\r\n      blockList.forEach(block => {\r\n        counts[block.type] = (counts[block.type] || 0) + 1;\r\n        if (block.children) {\r\n          countRecursive(block.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    countRecursive(blocks);\r\n    return counts;\r\n  }\r\n}\r\n\r\n// Mocks et stubs\r\nexport class TestMocks {\r\n  static createMockFile(name: string, type: string, size: number = 1024): File {\r\n    const content = 'x'.repeat(size);\r\n    return new File([content], name, { type, lastModified: Date.now() });\r\n  }\r\n\r\n  static createMockFetch(response: any, shouldFail: boolean = false) {\r\n    return jest.fn().mockImplementation(() => {\r\n      if (shouldFail) {\r\n        return Promise.reject(new Error('Mock fetch error'));\r\n      }\r\n      return Promise.resolve({\r\n        ok: true,\r\n        json: () => Promise.resolve(response),\r\n        text: () => Promise.resolve(JSON.stringify(response))\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n// Assertions personnalis√©es\r\nexport const customMatchers = {\r\n  toBeValidNotionBlock(received: any) {\r\n    const pass = ValidationUtils.isValidNotionBlock(received);\r\n    return {\r\n      message: () => pass \r\n        ? `expected ${JSON.stringify(received)} not to be a valid Notion block`\r\n        : `expected ${JSON.stringify(received)} to be a valid Notion block`,\r\n      pass\r\n    };\r\n  },\r\n\r\n  toHaveRichTextContent(received: any, expected: string) {\r\n    const richText = new TestHelpersImpl()['extractRichText'](received);\r\n    const content = richText.map((rt: any) => rt.text?.content || rt.plain_text || '').join('');\r\n    const pass = content === expected;\r\n    \r\n    return {\r\n      message: () => pass\r\n        ? `expected rich text content not to be \"${expected}\"`\r\n        : `expected rich text content \"${content}\" to be \"${expected}\"`,\r\n      pass\r\n    };\r\n  },\r\n\r\n  toHaveBlockTypes(received: TestBlock[], expected: string[]) {\r\n    const actualTypes = received.map(b => b.type);\r\n    const missingTypes = expected.filter(type => !actualTypes.includes(type));\r\n    const pass = missingTypes.length === 0;\r\n\r\n    return {\r\n      message: () => pass\r\n        ? `expected blocks not to have types ${expected.join(', ')}`\r\n        : `expected blocks to have types ${expected.join(', ')}, missing: ${missingTypes.join(', ')}`,\r\n      pass\r\n    };\r\n  },\r\n\r\n  toBeWithinPerformanceThreshold(received: number, threshold: number) {\r\n    const pass = received <= threshold;\r\n    return {\r\n      message: () => pass\r\n        ? `expected ${received}ms not to be within threshold ${threshold}ms`\r\n        : `expected ${received}ms to be within threshold ${threshold}ms`,\r\n      pass\r\n    };\r\n  }\r\n};"],"version":3}