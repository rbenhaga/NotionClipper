4d6d6e436616c252729a137884770fb3
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const parseContent_1 = require("../../../src/parseContent");
describe('Content Parsing Integration', () => {
    describe('Basic Parsing', () => {
        it('should parse simple content successfully', () => {
            const content = 'Hello world';
            const result = (0, parseContent_1.parseContent)(content);
            expect(result.success).toBe(true);
            expect(result.blocks).toHaveLength(1);
            expect(result.blocks[0].type).toBe('paragraph');
        });
        it('should handle empty content', () => {
            const result = (0, parseContent_1.parseContent)('');
            expect(result.success).toBe(true);
            expect(result.blocks).toEqual([]);
        });
        it('should handle null content gracefully', () => {
            const result = (0, parseContent_1.parseContent)(null);
            expect(result.success).toBe(true);
            expect(result.blocks).toEqual([]);
        });
        it('should handle undefined content gracefully', () => {
            const result = (0, parseContent_1.parseContent)(undefined);
            expect(result.success).toBe(true);
            expect(result.blocks).toEqual([]);
        });
    });
    describe('Options Handling', () => {
        it('should merge options correctly', () => {
            const options = {
                includeMetadata: true,
                includeValidation: true
            };
            const result = (0, parseContent_1.parseContent)('test content', options);
            expect(result.success).toBe(true);
            expect(result.metadata).toBeDefined();
            expect(result.validation).toBeDefined();
        });
        it('should include metadata when requested', () => {
            const result = (0, parseContent_1.parseContent)('test', { includeMetadata: true });
            expect(result.metadata).toBeDefined();
        });
    });
    describe('Error Handling', () => {
        it('should handle malformed content gracefully', () => {
            const malformedContent = '**unclosed bold *nested';
            const result = (0, parseContent_1.parseContent)(malformedContent);
            expect(result.success).toBe(true);
            expect(result.blocks).toBeDefined();
        });
    });
    describe('Validation', () => {
        it('should include validation when requested', () => {
            const result = (0, parseContent_1.parseContent)('test content', { includeValidation: true });
            expect(result.validation).toBeDefined();
        });
        it('should include basic validation by default', () => {
            const result = (0, parseContent_1.parseContent)('test content');
            expect(result.validation).toBeDefined();
        });
    });
    describe('Metadata', () => {
        it('should include metadata when requested', () => {
            const result = (0, parseContent_1.parseContent)('test content', { includeMetadata: true });
            expect(result.metadata).toBeDefined();
            expect(result.metadata?.detectedType).toBeDefined();
            expect(result.metadata?.blockCount).toBeGreaterThan(0);
            expect(result.metadata?.processingTime).toBeGreaterThanOrEqual(0);
        });
        it('should include basic metadata by default', () => {
            const result = (0, parseContent_1.parseContent)('test content');
            expect(result.metadata).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxyYXlhblxcRGVza3RvcFxcRGV2XFxOb3Rpb25DbGlwcGVyXFxwYWNrYWdlc1xcbm90aW9uLXBhcnNlclxcdGVzdHNcXHVuaXRcXHBhcnNlcnNcXEJhc2VQYXJzZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDREQUF5RDtBQVV6RCxRQUFRLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO0lBQzNDLFFBQVEsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1FBQzdCLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsTUFBTSxPQUFPLEdBQUcsYUFBYSxDQUFDO1lBQzlCLE1BQU0sTUFBTSxHQUFHLElBQUEsMkJBQVksRUFBQyxPQUFPLENBQUMsQ0FBQztZQUVyQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO1lBQ3JDLE1BQU0sTUFBTSxHQUFHLElBQUEsMkJBQVksRUFBQyxFQUFFLENBQUMsQ0FBQztZQUVoQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDL0MsTUFBTSxNQUFNLEdBQUcsSUFBQSwyQkFBWSxF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QyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtRQUN4QixFQUFFLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1lBQ2hELE1BQU0sTUFBTSxHQUFHLElBQUEsMkJBQVksRUFBQyxjQUFjLEVBQUUsRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUV2RSxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3RDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxjQUFjLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsTUFBTSxNQUFNLEdBQUcsSUFBQSwyQkFBWSxFQUFDLGNBQWMsQ0FBQyxDQUFDO1lBRTVDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccmF5YW5cXERlc2t0b3BcXERldlxcTm90aW9uQ2xpcHBlclxccGFja2FnZXNcXG5vdGlvbi1wYXJzZXJcXHRlc3RzXFx1bml0XFxwYXJzZXJzXFxCYXNlUGFyc2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vc3JjL3BhcnNlQ29udGVudCc7XHJcbmltcG9ydCB0eXBlIHsgUGFyc2VDb250ZW50T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3NyYy9wYXJzZUNvbnRlbnQnO1xyXG5cclxuLy8gVHlwZXMgZmxleGlibGVzIHBvdXIgbGVzIHRlc3RzXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcclxudHlwZSBUZXN0QmxvY2sgPSB7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG4gIFtrZXk6IHN0cmluZ106IGFueTtcclxufTtcclxuXHJcbmRlc2NyaWJlKCdDb250ZW50IFBhcnNpbmcgSW50ZWdyYXRpb24nLCAoKSA9PiB7XHJcbiAgZGVzY3JpYmUoJ0Jhc2ljIFBhcnNpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHBhcnNlIHNpbXBsZSBjb250ZW50IHN1Y2Nlc3NmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgY29udGVudCA9ICdIZWxsbyB3b3JsZCc7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChjb250ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3NbMF0udHlwZSkudG9CZSgncGFyYWdyYXBoJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBjb250ZW50JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoJycpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmJsb2NrcykudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsIGNvbnRlbnQgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KG51bGwgYXMgYW55KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvRXF1YWwoW10pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5kZWZpbmVkIGNvbnRlbnQgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHVuZGVmaW5lZCBhcyBhbnkpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmJsb2NrcykudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ09wdGlvbnMgSGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIG1lcmdlIG9wdGlvbnMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvcHRpb25zOiBQYXJzZUNvbnRlbnRPcHRpb25zID0ge1xyXG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YTogdHJ1ZSxcclxuICAgICAgICBpbmNsdWRlVmFsaWRhdGlvbjogdHJ1ZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KCd0ZXN0IGNvbnRlbnQnLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhZGF0YSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZGF0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIG1ldGFkYXRhIHdoZW4gcmVxdWVzdGVkJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoJ3Rlc3QnLCB7IGluY2x1ZGVNZXRhZGF0YTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YWRhdGEpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIGNvbnRlbnQgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFsZm9ybWVkQ29udGVudCA9ICcqKnVuY2xvc2VkIGJvbGQgKm5lc3RlZCc7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChtYWxmb3JtZWRDb250ZW50KTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdmFsaWRhdGlvbiB3aGVuIHJlcXVlc3RlZCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KCd0ZXN0IGNvbnRlbnQnLCB7IGluY2x1ZGVWYWxpZGF0aW9uOiB0cnVlIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZGF0aW9uKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGJhc2ljIHZhbGlkYXRpb24gYnkgZGVmYXVsdCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KCd0ZXN0IGNvbnRlbnQnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWRhdGlvbikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTWV0YWRhdGEnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgbWV0YWRhdGEgd2hlbiByZXF1ZXN0ZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudCgndGVzdCBjb250ZW50JywgeyBpbmNsdWRlTWV0YWRhdGE6IHRydWUgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhPy5kZXRlY3RlZFR5cGUpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YWRhdGE/LmJsb2NrQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhZGF0YT8ucHJvY2Vzc2luZ1RpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgYmFzaWMgbWV0YWRhdGEgYnkgZGVmYXVsdCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KCd0ZXN0IGNvbnRlbnQnKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YWRhdGEpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9