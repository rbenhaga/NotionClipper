{"version":3,"names":["cov_xfukd8abt","actualCoverage","s","BaseParser_1","require","LatexParser","BaseParser","constructor","options","b","f","maxEquationLength","parse","content","trim","nodes","lines","split","i","length","line","startsWith","node","consumed","parseBlockEquation","push","match","parseLatexEnvironment","lineNodes","parseLineWithInlineEquations","slice","maxBlocks","startIdx","startLine","equationContent","endsWith","createEquationNode","equationLines","createTextNode","join","truncatedExpression","truncateContent","envMatch","envName","envLines","includes","parseLatexList","parseLatexTable","parseLatexFloat","createCodeNode","parts","splitInlineEquations","part","isEquation","current","inEquation","char","nextChar","envType","items","contentMatch","listContent","itemMatches","itemContent","replace","createListItemNode","listType","createListNode","tableContent","map","filter","rows","cleaned","cell","row","headers","dataRows","createTableNode","_envType","floatContent","captionMatch","caption","includeMatch","imagePath","createMediaNode","cleanContent","validateLatex","errors","braceCount","beginMatches","endMatches","singleDollarCount","isValid","extractEquations","equations","blockMatches","inlineMatches","envMatches","exports"],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\parsers\\LatexParser.ts"],"sourcesContent":["import { BaseParser } from './BaseParser';\r\nimport type { ASTNode, ParseOptions } from '../types';\r\n\r\nexport class LatexParser extends BaseParser {\r\n  private readonly maxEquationLength = 1000;\r\n\r\n  constructor(options: ParseOptions = {}) {\r\n    super(options);\r\n  }\r\n\r\n  parse(content: string): ASTNode[] {\r\n    if (!content?.trim()) return [];\r\n\r\n    const nodes: ASTNode[] = [];\r\n    const lines = content.split('\\n');\r\n    let i = 0;\r\n\r\n    while (i < lines.length) {\r\n      const line = lines[i].trim();\r\n\r\n      // Block equations ($$...$$)\r\n      if (line.startsWith('$$')) {\r\n        const { node, consumed } = this.parseBlockEquation(lines, i);\r\n        if (node) nodes.push(node);\r\n        i += consumed;\r\n        continue;\r\n      }\r\n\r\n      // LaTeX environments\r\n      if (line.match(/\\\\begin\\{(\\w+)\\}/)) {\r\n        const { node, consumed } = this.parseLatexEnvironment(lines, i);\r\n        if (node) nodes.push(node);\r\n        i += consumed;\r\n        continue;\r\n      }\r\n\r\n      // Inline equations and text\r\n      const lineNodes = this.parseLineWithInlineEquations(line);\r\n      nodes.push(...lineNodes);\r\n\r\n      i++;\r\n    }\r\n\r\n    return nodes.slice(0, this.options.maxBlocks || 100);\r\n  }\r\n\r\n  private parseBlockEquation(lines: string[], startIdx: number): { node: ASTNode | null; consumed: number } {\r\n    const startLine = lines[startIdx];\r\n    let equationContent = '';\r\n    let i = startIdx;\r\n\r\n    // Handle single line $$equation$$\r\n    if (startLine.startsWith('$$') && startLine.endsWith('$$') && startLine.length > 4) {\r\n      equationContent = startLine.slice(2, -2).trim();\r\n      return {\r\n        node: this.createEquationNode(equationContent, true),\r\n        consumed: 1\r\n      };\r\n    }\r\n\r\n    // Handle multi-line $$...$$\r\n    if (startLine === '$$') {\r\n      i++;\r\n      const equationLines: string[] = [];\r\n      \r\n      while (i < lines.length && lines[i].trim() !== '$$') {\r\n        equationLines.push(lines[i]);\r\n        i++;\r\n      }\r\n\r\n      if (i >= lines.length) {\r\n        // No closing $$, treat as text\r\n        return { node: this.createTextNode(lines[startIdx]), consumed: 1 };\r\n      }\r\n\r\n      equationContent = equationLines.join('\\n').trim();\r\n    } else {\r\n      // Single line starting with $$\r\n      equationContent = startLine.slice(2).trim();\r\n    }\r\n\r\n    if (!equationContent) {\r\n      return { node: null, consumed: i - startIdx + 1 };\r\n    }\r\n\r\n    const truncatedExpression = this.truncateContent(equationContent, this.maxEquationLength);\r\n    \r\n    return {\r\n      node: this.createEquationNode(truncatedExpression, true),\r\n      consumed: i - startIdx + 1\r\n    };\r\n  }\r\n\r\n  private parseLatexEnvironment(lines: string[], startIdx: number): { node: ASTNode | null; consumed: number } {\r\n    const startLine = lines[startIdx];\r\n    const envMatch = startLine.match(/\\\\begin\\{(\\w+)\\}/);\r\n    \r\n    if (!envMatch) {\r\n      return { node: this.createTextNode(startLine), consumed: 1 };\r\n    }\r\n\r\n    const envName = envMatch[1];\r\n    const envLines: string[] = [startLine];\r\n    let i = startIdx + 1;\r\n\r\n    // Find matching \\end{environment}\r\n    while (i < lines.length) {\r\n      envLines.push(lines[i]);\r\n      if (lines[i].includes(`\\\\end{${envName}}`)) {\r\n        break;\r\n      }\r\n      i++;\r\n    }\r\n\r\n    if (i >= lines.length) {\r\n      // No matching \\end found\r\n      return { node: this.createTextNode(startLine), consumed: 1 };\r\n    }\r\n\r\n    const content = envLines.join('\\n');\r\n\r\n    // Handle different LaTeX environments\r\n    switch (envName) {\r\n      case 'equation':\r\n      case 'align':\r\n      case 'gather':\r\n      case 'multline':\r\n      case 'eqnarray':\r\n      case 'alignat':\r\n        return {\r\n          node: this.createEquationNode(content, true),\r\n          consumed: i - startIdx + 1\r\n        };\r\n\r\n      case 'itemize':\r\n      case 'enumerate':\r\n        return {\r\n          node: this.parseLatexList(content, envName),\r\n          consumed: i - startIdx + 1\r\n        };\r\n\r\n      case 'tabular':\r\n      case 'array':\r\n      case 'matrix':\r\n      case 'pmatrix':\r\n      case 'bmatrix':\r\n        return {\r\n          node: this.parseLatexTable(content),\r\n          consumed: i - startIdx + 1\r\n        };\r\n\r\n      case 'figure':\r\n      case 'table':\r\n        return {\r\n          node: this.parseLatexFloat(content, envName),\r\n          consumed: i - startIdx + 1\r\n        };\r\n\r\n      default:\r\n        // Unknown environment, treat as code\r\n        return {\r\n          node: this.createCodeNode(content, 'latex', true),\r\n          consumed: i - startIdx + 1\r\n        };\r\n    }\r\n  }\r\n\r\n  private parseLineWithInlineEquations(line: string): ASTNode[] {\r\n    if (!line.includes('$')) {\r\n      return line.trim() ? [this.createTextNode(line)] : [];\r\n    }\r\n\r\n    const nodes: ASTNode[] = [];\r\n    const parts = this.splitInlineEquations(line);\r\n\r\n    for (const part of parts) {\r\n      if (part.isEquation) {\r\n        const truncatedExpression = this.truncateContent(part.content, this.maxEquationLength);\r\n        nodes.push(this.createEquationNode(truncatedExpression, false));\r\n      } else if (part.content.trim()) {\r\n        nodes.push(this.createTextNode(part.content));\r\n      }\r\n    }\r\n\r\n    return nodes;\r\n  }\r\n\r\n  private splitInlineEquations(line: string): Array<{ content: string; isEquation: boolean }> {\r\n    const parts: Array<{ content: string; isEquation: boolean }> = [];\r\n    let current = '';\r\n    let inEquation = false;\r\n    let i = 0;\r\n\r\n    while (i < line.length) {\r\n      const char = line[i];\r\n      const nextChar = line[i + 1];\r\n\r\n      if (char === '$') {\r\n        if (nextChar === '$') {\r\n          // Double $ - skip for now (should be handled as block)\r\n          current += '$$';\r\n          i += 2;\r\n        } else {\r\n          // Single $ - inline equation delimiter\r\n          if (current) {\r\n            parts.push({ content: current, isEquation: inEquation });\r\n            current = '';\r\n          }\r\n          inEquation = !inEquation;\r\n          i++;\r\n        }\r\n      } else {\r\n        current += char;\r\n        i++;\r\n      }\r\n    }\r\n\r\n    if (current) {\r\n      parts.push({ content: current, isEquation: inEquation });\r\n    }\r\n\r\n    return parts;\r\n  }\r\n\r\n  private parseLatexList(content: string, envType: string): ASTNode {\r\n    const items: ASTNode[] = [];\r\n    \r\n    // Extract content between \\begin and \\end\r\n    const contentMatch = content.match(/\\\\begin\\{\\w+\\}([\\s\\S]*?)\\\\end\\{\\w+\\}/);\r\n    const listContent = contentMatch ? contentMatch[1] : content;\r\n    \r\n    // Find all \\item entries\r\n    const itemMatches = listContent.match(/\\\\item\\s*([^\\n\\\\]*(?:\\n(?!\\\\item)[^\\n\\\\]*)*)/g);\r\n\r\n    if (itemMatches) {\r\n      for (const match of itemMatches) {\r\n        const itemContent = match.replace(/\\\\item\\s*/, '').trim();\r\n        if (itemContent) {\r\n          items.push(this.createListItemNode(itemContent));\r\n        }\r\n      }\r\n    }\r\n\r\n    const listType = envType === 'enumerate' ? 'numbered' : 'bulleted';\r\n    return this.createListNode(items, listType);\r\n  }\r\n\r\n  private parseLatexTable(content: string): ASTNode {\r\n    // Extract content between \\begin and \\end\r\n    const contentMatch = content.match(/\\\\begin\\{\\w+\\}(?:\\{[^}]*\\})?([\\s\\S]*?)\\\\end\\{\\w+\\}/);\r\n    const tableContent = contentMatch ? contentMatch[1] : content;\r\n    \r\n    // Split by lines and filter out LaTeX commands\r\n    const lines = tableContent.split('\\n')\r\n      .map(line => line.trim())\r\n      .filter(line => \r\n        line && \r\n        !line.startsWith('\\\\hline') && \r\n        !line.startsWith('\\\\cline') &&\r\n        !line.startsWith('\\\\toprule') &&\r\n        !line.startsWith('\\\\midrule') &&\r\n        !line.startsWith('\\\\bottomrule')\r\n      );\r\n\r\n    if (lines.length === 0) {\r\n      return this.createTextNode(content);\r\n    }\r\n\r\n    // Parse table rows (split by &, end with \\\\)\r\n    const rows = lines.map(line => {\r\n      const cleaned = line.replace(/\\\\\\\\/g, '').trim();\r\n      return cleaned.split('&').map(cell => cell.trim());\r\n    }).filter(row => row.length > 1);\r\n\r\n    if (rows.length === 0) {\r\n      return this.createTextNode(content);\r\n    }\r\n\r\n    // Use first row as headers\r\n    const headers = rows[0];\r\n    const dataRows = rows.slice(1);\r\n\r\n    return this.createTableNode(headers, dataRows);\r\n  }\r\n\r\n  private parseLatexFloat(content: string, _envType: string): ASTNode {\r\n    // Extract content between \\begin and \\end\r\n    const contentMatch = content.match(/\\\\begin\\{\\w+\\}([\\s\\S]*?)\\\\end\\{\\w+\\}/);\r\n    const floatContent = contentMatch ? contentMatch[1] : content;\r\n    \r\n    // Look for \\caption\r\n    const captionMatch = floatContent.match(/\\\\caption\\{([^}]*)\\}/);\r\n    const caption = captionMatch ? captionMatch[1] : '';\r\n    \r\n    // Look for \\includegraphics or \\centering content\r\n    const includeMatch = floatContent.match(/\\\\includegraphics(?:\\[[^\\]]*\\])?\\{([^}]*)\\}/);\r\n    \r\n    if (includeMatch) {\r\n      const imagePath = includeMatch[1];\r\n      return this.createMediaNode('image', imagePath, caption);\r\n    }\r\n    \r\n    // If no specific content found, treat as text block\r\n    const cleanContent = floatContent\r\n      .replace(/\\\\caption\\{[^}]*\\}/g, '')\r\n      .replace(/\\\\centering/g, '')\r\n      .replace(/\\\\label\\{[^}]*\\}/g, '')\r\n      .trim();\r\n    \r\n    if (cleanContent) {\r\n      return this.createTextNode(cleanContent + (caption ? `\\n\\n${caption}` : ''));\r\n    }\r\n    \r\n    return this.createTextNode(caption || content);\r\n  }\r\n\r\n  /**\r\n   * Validate LaTeX syntax (basic validation)\r\n   */\r\n  static validateLatex(content: string): { isValid: boolean; errors: string[] } {\r\n    const errors: string[] = [];\r\n\r\n    // Check for balanced braces\r\n    let braceCount = 0;\r\n    for (const char of content) {\r\n      if (char === '{') braceCount++;\r\n      if (char === '}') braceCount--;\r\n      if (braceCount < 0) {\r\n        errors.push('Unmatched closing brace');\r\n        break;\r\n      }\r\n    }\r\n    if (braceCount > 0) {\r\n      errors.push('Unmatched opening brace');\r\n    }\r\n\r\n    // Check for balanced environments\r\n    const beginMatches = content.match(/\\\\begin\\{(\\w+)\\}/g) || [];\r\n    const endMatches = content.match(/\\\\end\\{(\\w+)\\}/g) || [];\r\n    \r\n    if (beginMatches.length !== endMatches.length) {\r\n      errors.push('Unmatched LaTeX environments');\r\n    }\r\n\r\n    // Check for balanced equation delimiters\r\n    const singleDollarCount = (content.match(/(?<!\\$)\\$(?!\\$)/g) || []).length;\r\n    if (singleDollarCount % 2 !== 0) {\r\n      errors.push('Unmatched equation delimiters ($)');\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Extract all equations from LaTeX content\r\n   */\r\n  static extractEquations(content: string): string[] {\r\n    const equations: string[] = [];\r\n    \r\n    // Block equations $$...$$\r\n    const blockMatches = content.match(/\\$\\$([\\s\\S]*?)\\$\\$/g);\r\n    if (blockMatches) {\r\n      equations.push(...blockMatches.map(match => match.slice(2, -2).trim()));\r\n    }\r\n    \r\n    // Inline equations $...$\r\n    const inlineMatches = content.match(/(?<!\\$)\\$([^$]+)\\$(?!\\$)/g);\r\n    if (inlineMatches) {\r\n      equations.push(...inlineMatches.map(match => match.slice(1, -1).trim()));\r\n    }\r\n    \r\n    // Environment equations\r\n    const envMatches = content.match(/\\\\begin\\{(equation|align|gather|multline)\\}([\\s\\S]*?)\\\\end\\{\\1\\}/g);\r\n    if (envMatches) {\r\n      equations.push(...envMatches);\r\n    }\r\n    \r\n    return equations;\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}