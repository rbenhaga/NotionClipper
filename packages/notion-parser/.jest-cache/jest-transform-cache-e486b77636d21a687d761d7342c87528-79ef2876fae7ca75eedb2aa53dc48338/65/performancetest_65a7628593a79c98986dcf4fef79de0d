ee7a67689bf332ee52a01e7dbc7df459
"use strict";
/**
 * Tests de performance complets - Conformes au Cahier des Charges v2.1 ⭐
 * Valide les benchmarks de performance selon les spécifications
 */
Object.defineProperty(exports, "__esModule", { value: true });
const parseContent_1 = require("../../src/parseContent");
const test_helpers_1 = require("../helpers/test-helpers");
// Constantes conformes au Cahier des Charges v2.1
const PERFORMANCE_BENCHMARKS_V21 = {
    // Benchmarks cibles selon le cahier des charges
    DETECTION_1000_LINES: 5, // <5ms (P50)
    PARSE_MARKDOWN_1000: 30, // <30ms (P50)
    PARSE_CODE_1000: 20, // <20ms (P50)
    PARSE_TABLE_100_ROWS: 15, // <15ms (P50)
    PARSE_AUDIO_URL: 1, // <1ms (P50)
    CONVERT_100_BLOCKS: 20, // <20ms (P50)
    VALIDATE_100_BLOCKS: 10, // <10ms (P50)
    PIPELINE_TOTAL_1000: 80, // <80ms (P50)
    FILE_UPLOAD_5MB: 2000, // <2s (P50)
    // P95 thresholds (plus permissifs)
    P95_MULTIPLIER: 1.5
};
describe('Performance Tests - Cahier des Charges v2.1 ⭐', () => {
    // ⭐ Tests conformes aux benchmarks du Cahier des Charges v2.1
    describe('Detection Performance (Cahier des Charges)', () => {
        it('should detect content type in <5ms for 1000 lines (P50)', () => {
            const content = Array(1000).fill('Line of content').join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(content, { includeMetadata: true });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.DETECTION_1000_LINES);
            expect(result.metadata?.detectedType).toBeDefined();
        });
        it('should detect audio URLs in <1ms (P50)', () => {
            const audioUrl = 'https://example.com/podcast.mp3';
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(audioUrl, { includeMetadata: true });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.PARSE_AUDIO_URL);
            expect(result.metadata?.detectedType).toBe('url');
        });
    });
    describe('Parsing Performance (Cahier des Charges)', () => {
        it('should parse Markdown 1000 lines in <30ms (P50)', () => {
            const content = Array(1000).fill(0).map((_, i) => `# Header ${i}\n\nParagraph with **bold** and *italic* text.\n\n- List item ${i}`).join('\n\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(content, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.PARSE_MARKDOWN_1000);
            expect(result.blocks.length).toBeGreaterThan(1000);
        });
        it('should parse code 1000 lines in <20ms (P50)', () => {
            const codeContent = Array(1000).fill(0).map((_, i) => `function test${i}() {\n  return ${i};\n}`).join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(codeContent, { contentType: 'code' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.PARSE_CODE_1000);
        });
        it('should parse table 100 rows in <15ms (P50)', () => {
            const tableRows = Array(100).fill(0).map((_, i) => `Row${i},Value${i},Data${i}`);
            const csvContent = `Header1,Header2,Header3\n${tableRows.join('\n')}`;
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(csvContent, { contentType: 'csv' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.PARSE_TABLE_100_ROWS);
            const tableBlock = result.blocks.find((b) => b.type === 'table');
            expect(tableBlock).toBeDefined();
        });
    });
    describe('Conversion Performance (Cahier des Charges)', () => {
        it('should convert 100 blocks in <20ms (P50)', () => {
            const content = Array(100).fill(0).map((_, i) => `## Section ${i}\n\nContent for section ${i} with some **formatting**.`).join('\n\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(content, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.CONVERT_100_BLOCKS);
            expect(result.blocks.length).toBeGreaterThanOrEqual(100);
        });
    });
    describe('Validation Performance (Cahier des Charges)', () => {
        it('should validate 100 blocks in <10ms (P50)', () => {
            const content = Array(100).fill(0).map((_, i) => `Paragraph ${i} with valid content.`).join('\n\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(content, {
                    contentType: 'markdown',
                    includeValidation: true
                });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.VALIDATE_100_BLOCKS);
            expect(result.validation?.isValid).toBe(true);
        });
    });
    describe('Pipeline Total Performance (Cahier des Charges)', () => {
        it('should complete full pipeline for 1000 lines in <80ms (P50)', () => {
            const content = Array(1000).fill(0).map((_, i) => `Line ${i} with various **formatting** and [links](https://example.com).`).join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(content, {
                    includeMetadata: true,
                    includeValidation: true
                });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(PERFORMANCE_BENCHMARKS_V21.PIPELINE_TOTAL_1000);
            expect(result.metadata).toBeDefined();
            expect(result.validation).toBeDefined();
        });
    });
    // ⭐ NOUVEAU : Tests de performance pour les nouvelles fonctionnalités v2.1
    describe('Audio Performance (⭐ NOUVEAU v2.1)', () => {
        it('should parse multiple audio URLs efficiently', () => {
            const audioUrls = Array(100).fill(0).map((_, i) => `https://example.com/audio${i}.mp3`).join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(audioUrls);
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(100); // Should be very fast
            expect(result.blocks).toHaveLength(100);
        });
        it('should handle large audio playlists without performance degradation', () => {
            const largePlaylist = Array(1000).fill(0).map((_, i) => `https://example.com/song${i}.mp3`).join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(largePlaylist);
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(500); // Should scale well
        });
    });
    describe('Table Headers Performance (⭐ NOUVEAU v2.1)', () => {
        it('should detect headers in large tables efficiently', () => {
            const largeTable = Array(1000).fill(0).map((_, i) => `Row${i},Data${i},Value${i},Info${i}`);
            const csvWithHeaders = `Name,Age,City,Country\n${largeTable.join('\n')}`;
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(csvWithHeaders, {
                    contentType: 'csv',
                    conversion: { convertTables: true }
                });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(200); // Header detection should be fast
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
        it('should handle complex header detection without performance impact', () => {
            const complexTable = Array(500).fill(0).map((_, i) => `"Complex Header ${i}","Data with, commas","Value ${i}","Info ${i}"`);
            const csvContent = `"Product Name","Price (USD)","Stock Level","Category"\n${complexTable.join('\n')}`;
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(csvContent, { contentType: 'csv' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(150);
        });
    });
    describe('Toggle Headings Performance (⭐ NOUVEAU v2.1)', () => {
        it('should parse multiple toggle headings efficiently', () => {
            const toggleContent = Array(100).fill(0).map((_, i) => `> # Toggle Section ${i}\n> Content for section ${i}\n> More content here.`).join('\n\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(toggleContent, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(200);
            const toggleHeadings = result.blocks.filter((b) => b.type.startsWith('heading_') && b[b.type].is_toggleable);
            expect(toggleHeadings.length).toBe(100);
        });
        it('should handle deeply nested toggle structures efficiently', () => {
            let nestedToggle = '';
            for (let i = 1; i <= 50; i++) {
                const level = Math.min(i, 3); // Max H3
                nestedToggle += `> ${'#'.repeat(level)} Level ${i}\n> Content ${i}\n\n`;
            }
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(nestedToggle, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(300);
        });
    });
    describe('Memory Usage', () => {
        it('should not exceed memory threshold for large content', () => {
            const largeContent = test_helpers_1.ContentGenerators.generateMarkdown('large');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(largeContent, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.memoryDelta).toBeLessThan(TEST_CONSTANTS.PERFORMANCE_THRESHOLDS.MEMORY_LIMIT);
        });
        it('should not leak memory with repeated parsing', () => {
            const content = test_helpers_1.ContentGenerators.generateMarkdown('small');
            // Warm up
            for (let i = 0; i < 10; i++) {
                (0, parseContent_1.parseContent)(content, { contentType: 'markdown' });
            }
            const { metrics: finalMetrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                // Actual test
                for (let i = 0; i < 100; i++) {
                    (0, parseContent_1.parseContent)(content, { contentType: 'markdown' });
                }
            });
            // Memory increase should be minimal
            expect(finalMetrics.memoryDelta).toBeLessThan(50); // 50MB max
        });
    });
    describe('ReDoS Protection', () => {
        const redosPatterns = [
            { name: 'Catastrophic backtracking with asterisks', pattern: 'a'.repeat(1000) + '!' },
            { name: 'Nested quantifiers', pattern: '(' + 'a'.repeat(500) + ')*b' },
            { name: 'Alternation with repetition', pattern: 'a'.repeat(100) + 'X' + 'a'.repeat(100) },
            { name: 'Multiple asterisks', pattern: '*'.repeat(1000) },
            { name: 'Nested formatting', pattern: '**'.repeat(500) + 'text' },
            { name: 'Long code block', pattern: '```' + 'a'.repeat(1000) + '\n' + 'b'.repeat(1000) }
        ];
        redosPatterns.forEach(({ name, pattern }) => {
            it(`should protect against ReDoS: ${name}`, () => {
                const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                    return (0, parseContent_1.parseContent)(pattern, { contentType: 'markdown' });
                });
                // Should complete within reasonable time (1 second max)
                expect(metrics.duration).toBeLessThan(1000);
                expect(result.success).toBeDefined();
            });
        });
        it('should handle nested formatting without exponential time', () => {
            const nestedFormatting = '*'.repeat(50) + 'text' + '*'.repeat(50);
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(nestedFormatting, { contentType: 'markdown' });
            });
            expect(metrics.duration).toBeLessThan(100);
            expect(result.success).toBeDefined();
        });
    });
    describe('Deep Recursion Handling', () => {
        it('should handle deeply nested lists without stack overflow', () => {
            const deepList = Array(100).fill(0).map((_, i) => '  '.repeat(Math.min(i, 10)) + `- Item at depth ${i}`).join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(deepList, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(1000);
            // Verify depth is limited
            const maxDepth = findMaxDepth(result.blocks);
            expect(maxDepth).toBeLessThanOrEqual(10);
        });
        it('should handle deeply nested quotes', () => {
            const deepQuotes = Array(50).fill(0).map((_, i) => '>'.repeat(Math.min(i + 1, 5)) + ` Quote at level ${i}`).join('\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(deepQuotes, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(500);
        });
    });
    describe('Large Table Performance', () => {
        it('should handle large CSV tables efficiently', () => {
            const csvContent = test_helpers_1.ContentGenerators.generateTable('csv', 1000);
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(csvContent, { contentType: 'csv' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(2000); // 2 seconds max
            const tableBlock = result.blocks.find((b) => b.type === 'table');
            expect(tableBlock).toBeDefined();
        });
        it('should respect Notion table size limits', () => {
            const wideTable = test_helpers_1.ContentGenerators.generateTable('csv', 10);
            const result = (0, parseContent_1.parseContent)(wideTable, { contentType: 'csv' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const tableBlock = result.blocks.find((b) => b.type === 'table');
            if (tableBlock?.table?.table_width) {
                expect(tableBlock.table.table_width).toBeLessThanOrEqual(50);
            }
        });
    });
    describe('Code Block Performance', () => {
        it('should handle long code blocks efficiently', () => {
            const longCode = test_helpers_1.ContentGenerators.generateCode('javascript', 'large');
            const codeBlock = `\`\`\`javascript\n${longCode}\n\`\`\``;
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(codeBlock, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(500);
            const codeBlockResult = result.blocks.find((b) => b.type === 'code');
            expect(codeBlockResult).toBeDefined();
        });
        it('should truncate extremely long code blocks', () => {
            const extremelyLongCode = 'a'.repeat(10000);
            const codeBlock = `\`\`\`\n${extremelyLongCode}\n\`\`\``;
            const result = (0, parseContent_1.parseContent)(codeBlock, { contentType: 'markdown' });
            test_helpers_1.testHelpers.expectValidResult(result);
            const codeBlockResult = result.blocks.find((b) => b.type === 'code');
            if (codeBlockResult?.code?.rich_text?.[0]?.text?.content) {
                // Notion has a 2000 character limit for code
                expect(codeBlockResult.code.rich_text[0].text.content.length).toBeLessThanOrEqual(2000);
            }
        });
    });
    describe('Concurrent Processing', () => {
        it('should handle multiple concurrent parsing operations', async () => {
            const contents = Array(10).fill(0).map((_, i) => test_helpers_1.ContentGenerators.generateMarkdown('small') + `\n\n# Document ${i}`);
            const { result: results, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return Promise.all(contents.map(content => Promise.resolve((0, parseContent_1.parseContent)(content, { contentType: 'markdown' }))));
            });
            const resolvedResults = await results;
            expect(resolvedResults).toHaveLength(10);
            resolvedResults.forEach(result => {
                test_helpers_1.testHelpers.expectValidResult(result);
            });
            expect(metrics.duration).toBeLessThan(1000); // Concurrent processing should be efficient
        });
    });
    describe('Stress Testing', () => {
        it('should handle extreme content sizes gracefully', () => {
            const extremeContent = 'a'.repeat(100000); // 100KB of text
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(extremeContent, { contentType: 'text' });
            });
            expect(result.success).toBeDefined();
            expect(metrics.duration).toBeLessThan(5000); // 5 seconds max
        });
        it('should handle many small blocks efficiently', () => {
            const manyBlocks = Array(1000).fill(0).map((_, i) => `Block ${i}`).join('\n\n');
            const { result, metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                return (0, parseContent_1.parseContent)(manyBlocks, { contentType: 'markdown' });
            });
            test_helpers_1.testHelpers.expectValidResult(result);
            expect(metrics.duration).toBeLessThan(2000);
            expect(result.blocks.length).toBeGreaterThan(500);
        });
    });
    describe('Performance Regression Tests', () => {
        it('should maintain consistent performance across runs', () => {
            const content = test_helpers_1.ContentGenerators.generateMarkdown('medium');
            const runs = 5;
            const durations = [];
            for (let i = 0; i < runs; i++) {
                const { metrics } = test_helpers_1.testHelpers.measurePerformance(() => {
                    return (0, parseContent_1.parseContent)(content, { contentType: 'markdown' });
                });
                durations.push(metrics.duration);
            }
            const avgDuration = durations.reduce((a, b) => a + b, 0) / runs;
            const maxVariation = Math.max(...durations) - Math.min(...durations);
            expect(avgDuration).toBeLessThan(TEST_CONSTANTS.PERFORMANCE_THRESHOLDS.MEDIUM_CONTENT);
            expect(maxVariation).toBeLessThan(avgDuration * 0.5); // Variation should be less than 50% of average
        });
    });
});
// Helper function to find maximum depth in nested blocks
function findMaxDepth(blocks, currentDepth = 0) {
    let maxDepth = currentDepth;
    for (const block of blocks) {
        if (block.children && Array.isArray(block.children)) {
            const childDepth = findMaxDepth(block.children, currentDepth + 1);
            maxDepth = Math.max(maxDepth, childDepth);
        }
    }
    return maxDepth;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxyYXlhblxcRGVza3RvcFxcRGV2XFxOb3Rpb25DbGlwcGVyXFxwYWNrYWdlc1xcbm90aW9uLXBhcnNlclxcdGVzdHNcXGNvbXByZWhlbnNpdmVcXHBlcmZvcm1hbmNlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCx5REFBc0Q7QUFDdEQsMERBQXlFO0FBUXpFLGtEQUFrRDtBQUNsRCxNQUFNLDBCQUEwQixHQUFHO0lBQ2pDLGdEQUFnRDtJQUNoRCxvQkFBb0IsRUFBRSxDQUFDLEVBQU8sYUFBYTtJQUMzQyxtQkFBbUIsRUFBRSxFQUFFLEVBQU8sY0FBYztJQUM1QyxlQUFlLEVBQUUsRUFBRSxFQUFXLGNBQWM7SUFDNUMsb0JBQW9CLEVBQUUsRUFBRSxFQUFNLGNBQWM7SUFDNUMsZUFBZSxFQUFFLENBQUMsRUFBWSxhQUFhO0lBQzNDLGtCQUFrQixFQUFFLEVBQUUsRUFBUSxjQUFjO0lBQzVDLG1CQUFtQixFQUFFLEVBQUUsRUFBTyxjQUFjO0lBQzVDLG1CQUFtQixFQUFFLEVBQUUsRUFBTyxjQUFjO0lBQzVDLGVBQWUsRUFBRSxJQUFJLEVBQVMsWUFBWTtJQUUxQyxtQ0FBbUM7SUFDbkMsY0FBYyxFQUFFLEdBQUc7Q0FDcEIsQ0FBQztBQUVGLFFBQVEsQ0FBQywrQ0FBK0MsRUFBRSxHQUFHLEVBQUU7SUFDN0QsOERBQThEO0lBQzlELFFBQVEsQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7UUFDMUQsRUFBRSxDQUFDLHlEQUF5RCxFQUFFLEdBQUcsRUFBRTtZQUNqRSxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRS9ELE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsMEJBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUU7Z0JBQzlELE9BQU8sSUFBQSwyQkFBWSxFQUFDLE9BQU8sRUFBRSxFQUFF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WUFBWSxDQUFDLE1BQW1CLEVBQUUsZUFBdUIsQ0FBQztJQUNqRSxJQUFJLFFBQVEsR0FBRyxZQUFZLENBQUM7SUFFNUIsS0FBSyxNQUFNLEtBQUssSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUMzQixJQUFJLEtBQUssQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztZQUNwRCxNQUFNLFVBQVUsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDbEUsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzVDLENBQUM7SUFDSCxDQUFDO0lBRUQsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHJheWFuXFxEZXNrdG9wXFxEZXZcXE5vdGlvbkNsaXBwZXJcXHBhY2thZ2VzXFxub3Rpb24tcGFyc2VyXFx0ZXN0c1xcY29tcHJlaGVuc2l2ZVxccGVyZm9ybWFuY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGVzdHMgZGUgcGVyZm9ybWFuY2UgY29tcGxldHMgLSBDb25mb3JtZXMgYXUgQ2FoaWVyIGRlcyBDaGFyZ2VzIHYyLjEg4q2QXHJcbiAqIFZhbGlkZSBsZXMgYmVuY2htYXJrcyBkZSBwZXJmb3JtYW5jZSBzZWxvbiBsZXMgc3DDqWNpZmljYXRpb25zXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcGFyc2VDb250ZW50IH0gZnJvbSAnLi4vLi4vc3JjL3BhcnNlQ29udGVudCc7XHJcbmltcG9ydCB7IENvbnRlbnRHZW5lcmF0b3JzLCB0ZXN0SGVscGVycyB9IGZyb20gJy4uL2hlbHBlcnMvdGVzdC1oZWxwZXJzJztcclxuXHJcbi8vIFR5cGVzIGxvY2F1eFxyXG50eXBlIFRlc3RCbG9jayA9IHtcclxuICB0eXBlOiBzdHJpbmc7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59O1xyXG5cclxuLy8gQ29uc3RhbnRlcyBjb25mb3JtZXMgYXUgQ2FoaWVyIGRlcyBDaGFyZ2VzIHYyLjFcclxuY29uc3QgUEVSRk9STUFOQ0VfQkVOQ0hNQVJLU19WMjEgPSB7XHJcbiAgLy8gQmVuY2htYXJrcyBjaWJsZXMgc2Vsb24gbGUgY2FoaWVyIGRlcyBjaGFyZ2VzXHJcbiAgREVURUNUSU9OXzEwMDBfTElORVM6IDUsICAgICAgLy8gPDVtcyAoUDUwKVxyXG4gIFBBUlNFX01BUktET1dOXzEwMDA6IDMwLCAgICAgIC8vIDwzMG1zIChQNTApXHJcbiAgUEFSU0VfQ09ERV8xMDAwOiAyMCwgICAgICAgICAgLy8gPDIwbXMgKFA1MClcclxuICBQQVJTRV9UQUJMRV8xMDBfUk9XUzogMTUsICAgICAvLyA8MTVtcyAoUDUwKVxyXG4gIFBBUlNFX0FVRElPX1VSTDogMSwgICAgICAgICAgIC8vIDwxbXMgKFA1MClcclxuICBDT05WRVJUXzEwMF9CTE9DS1M6IDIwLCAgICAgICAvLyA8MjBtcyAoUDUwKVxyXG4gIFZBTElEQVRFXzEwMF9CTE9DS1M6IDEwLCAgICAgIC8vIDwxMG1zIChQNTApXHJcbiAgUElQRUxJTkVfVE9UQUxfMTAwMDogODAsICAgICAgLy8gPDgwbXMgKFA1MClcclxuICBGSUxFX1VQTE9BRF81TUI6IDIwMDAsICAgICAgICAvLyA8MnMgKFA1MClcclxuICBcclxuICAvLyBQOTUgdGhyZXNob2xkcyAocGx1cyBwZXJtaXNzaWZzKVxyXG4gIFA5NV9NVUxUSVBMSUVSOiAxLjVcclxufTtcclxuXHJcbmRlc2NyaWJlKCdQZXJmb3JtYW5jZSBUZXN0cyAtIENhaGllciBkZXMgQ2hhcmdlcyB2Mi4xIOKtkCcsICgpID0+IHtcclxuICAvLyDirZAgVGVzdHMgY29uZm9ybWVzIGF1eCBiZW5jaG1hcmtzIGR1IENhaGllciBkZXMgQ2hhcmdlcyB2Mi4xXHJcbiAgZGVzY3JpYmUoJ0RldGVjdGlvbiBQZXJmb3JtYW5jZSAoQ2FoaWVyIGRlcyBDaGFyZ2VzKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGNvbnRlbnQgdHlwZSBpbiA8NW1zIGZvciAxMDAwIGxpbmVzIChQNTApJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gQXJyYXkoMTAwMCkuZmlsbCgnTGluZSBvZiBjb250ZW50Jykuam9pbignXFxuJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHJlc3VsdCwgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gcGFyc2VDb250ZW50KGNvbnRlbnQsIHsgaW5jbHVkZU1ldGFkYXRhOiB0cnVlIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfQkVOQ0hNQVJLU19WMjEuREVURUNUSU9OXzEwMDBfTElORVMpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhPy5kZXRlY3RlZFR5cGUpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBhdWRpbyBVUkxzIGluIDwxbXMgKFA1MCknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGF1ZGlvVXJsID0gJ2h0dHBzOi8vZXhhbXBsZS5jb20vcG9kY2FzdC5tcDMnO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChhdWRpb1VybCwgeyBpbmNsdWRlTWV0YWRhdGE6IHRydWUgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuZHVyYXRpb24pLnRvQmVMZXNzVGhhbihQRVJGT1JNQU5DRV9CRU5DSE1BUktTX1YyMS5QQVJTRV9BVURJT19VUkwpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhPy5kZXRlY3RlZFR5cGUpLnRvQmUoJ3VybCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQYXJzaW5nIFBlcmZvcm1hbmNlIChDYWhpZXIgZGVzIENoYXJnZXMpJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBNYXJrZG93biAxMDAwIGxpbmVzIGluIDwzMG1zIChQNTApJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gQXJyYXkoMTAwMCkuZmlsbCgwKS5tYXAoKF8sIGkpID0+IFxyXG4gICAgICAgIGAjIEhlYWRlciAke2l9XFxuXFxuUGFyYWdyYXBoIHdpdGggKipib2xkKiogYW5kICppdGFsaWMqIHRleHQuXFxuXFxuLSBMaXN0IGl0ZW0gJHtpfWBcclxuICAgICAgKS5qb2luKCdcXG5cXG4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBtZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQoY29udGVudCwgeyBjb250ZW50VHlwZTogJ21hcmtkb3duJyB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX0JFTkNITUFSS1NfVjIxLlBBUlNFX01BUktET1dOXzEwMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmJsb2Nrcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxMDAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFyc2UgY29kZSAxMDAwIGxpbmVzIGluIDwyMG1zIChQNTApJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb2RlQ29udGVudCA9IEFycmF5KDEwMDApLmZpbGwoMCkubWFwKChfLCBpKSA9PiBcclxuICAgICAgICBgZnVuY3Rpb24gdGVzdCR7aX0oKSB7XFxuICByZXR1cm4gJHtpfTtcXG59YFxyXG4gICAgICApLmpvaW4oJ1xcbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChjb2RlQ29udGVudCwgeyBjb250ZW50VHlwZTogJ2NvZGUnIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfQkVOQ0hNQVJLU19WMjEuUEFSU0VfQ09ERV8xMDAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcGFyc2UgdGFibGUgMTAwIHJvd3MgaW4gPDE1bXMgKFA1MCknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRhYmxlUm93cyA9IEFycmF5KDEwMCkuZmlsbCgwKS5tYXAoKF8sIGkpID0+IFxyXG4gICAgICAgIGBSb3cke2l9LFZhbHVlJHtpfSxEYXRhJHtpfWBcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgY3N2Q29udGVudCA9IGBIZWFkZXIxLEhlYWRlcjIsSGVhZGVyM1xcbiR7dGFibGVSb3dzLmpvaW4oJ1xcbicpfWA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHJlc3VsdCwgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gcGFyc2VDb250ZW50KGNzdkNvbnRlbnQsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfQkVOQ0hNQVJLU19WMjEuUEFSU0VfVEFCTEVfMTAwX1JPV1MpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3MuZmluZCgoYjogVGVzdEJsb2NrKSA9PiBiLnR5cGUgPT09ICd0YWJsZScpO1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jaykudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29udmVyc2lvbiBQZXJmb3JtYW5jZSAoQ2FoaWVyIGRlcyBDaGFyZ2VzKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY29udmVydCAxMDAgYmxvY2tzIGluIDwyMG1zIChQNTApJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gQXJyYXkoMTAwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgYCMjIFNlY3Rpb24gJHtpfVxcblxcbkNvbnRlbnQgZm9yIHNlY3Rpb24gJHtpfSB3aXRoIHNvbWUgKipmb3JtYXR0aW5nKiouYFxyXG4gICAgICApLmpvaW4oJ1xcblxcbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChjb250ZW50LCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oUEVSRk9STUFOQ0VfQkVOQ0hNQVJLU19WMjEuQ09OVkVSVF8xMDBfQkxPQ0tTKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEwMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24gUGVyZm9ybWFuY2UgKENhaGllciBkZXMgQ2hhcmdlcyknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIDEwMCBibG9ja3MgaW4gPDEwbXMgKFA1MCknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBBcnJheSgxMDApLmZpbGwoMCkubWFwKChfLCBpKSA9PiBcclxuICAgICAgICBgUGFyYWdyYXBoICR7aX0gd2l0aCB2YWxpZCBjb250ZW50LmBcclxuICAgICAgKS5qb2luKCdcXG5cXG4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBtZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQoY29udGVudCwgeyBcclxuICAgICAgICAgIGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nLFxyXG4gICAgICAgICAgaW5jbHVkZVZhbGlkYXRpb246IHRydWUgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuZHVyYXRpb24pLnRvQmVMZXNzVGhhbihQRVJGT1JNQU5DRV9CRU5DSE1BUktTX1YyMS5WQUxJREFURV8xMDBfQkxPQ0tTKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZGF0aW9uPy5pc1ZhbGlkKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQaXBlbGluZSBUb3RhbCBQZXJmb3JtYW5jZSAoQ2FoaWVyIGRlcyBDaGFyZ2VzKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgY29tcGxldGUgZnVsbCBwaXBlbGluZSBmb3IgMTAwMCBsaW5lcyBpbiA8ODBtcyAoUDUwKScsICgpID0+IHtcclxuICAgICAgY29uc3QgY29udGVudCA9IEFycmF5KDEwMDApLmZpbGwoMCkubWFwKChfLCBpKSA9PiBcclxuICAgICAgICBgTGluZSAke2l9IHdpdGggdmFyaW91cyAqKmZvcm1hdHRpbmcqKiBhbmQgW2xpbmtzXShodHRwczovL2V4YW1wbGUuY29tKS5gXHJcbiAgICAgICkuam9pbignXFxuJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHJlc3VsdCwgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gcGFyc2VDb250ZW50KGNvbnRlbnQsIHsgXHJcbiAgICAgICAgICBpbmNsdWRlTWV0YWRhdGE6IHRydWUsXHJcbiAgICAgICAgICBpbmNsdWRlVmFsaWRhdGlvbjogdHJ1ZSBcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKFBFUkZPUk1BTkNFX0JFTkNITUFSS1NfVjIxLlBJUEVMSU5FX1RPVEFMXzEwMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGFkYXRhKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkYXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8g4q2QIE5PVVZFQVUgOiBUZXN0cyBkZSBwZXJmb3JtYW5jZSBwb3VyIGxlcyBub3V2ZWxsZXMgZm9uY3Rpb25uYWxpdMOpcyB2Mi4xXHJcbiAgZGVzY3JpYmUoJ0F1ZGlvIFBlcmZvcm1hbmNlICjirZAgTk9VVkVBVSB2Mi4xKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcGFyc2UgbXVsdGlwbGUgYXVkaW8gVVJMcyBlZmZpY2llbnRseScsICgpID0+IHtcclxuICAgICAgY29uc3QgYXVkaW9VcmxzID0gQXJyYXkoMTAwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgYGh0dHBzOi8vZXhhbXBsZS5jb20vYXVkaW8ke2l9Lm1wM2BcclxuICAgICAgKS5qb2luKCdcXG4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBtZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQoYXVkaW9VcmxzKTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMCk7IC8vIFNob3VsZCBiZSB2ZXJ5IGZhc3RcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvSGF2ZUxlbmd0aCgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgYXVkaW8gcGxheWxpc3RzIHdpdGhvdXQgcGVyZm9ybWFuY2UgZGVncmFkYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhcmdlUGxheWxpc3QgPSBBcnJheSgxMDAwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgYGh0dHBzOi8vZXhhbXBsZS5jb20vc29uZyR7aX0ubXAzYFxyXG4gICAgICApLmpvaW4oJ1xcbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChsYXJnZVBsYXlsaXN0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDUwMCk7IC8vIFNob3VsZCBzY2FsZSB3ZWxsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1RhYmxlIEhlYWRlcnMgUGVyZm9ybWFuY2UgKOKtkCBOT1VWRUFVIHYyLjEpJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgaGVhZGVycyBpbiBsYXJnZSB0YWJsZXMgZWZmaWNpZW50bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhcmdlVGFibGUgPSBBcnJheSgxMDAwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgYFJvdyR7aX0sRGF0YSR7aX0sVmFsdWUke2l9LEluZm8ke2l9YFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBjc3ZXaXRoSGVhZGVycyA9IGBOYW1lLEFnZSxDaXR5LENvdW50cnlcXG4ke2xhcmdlVGFibGUuam9pbignXFxuJyl9YDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBtZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQoY3N2V2l0aEhlYWRlcnMsIHsgXHJcbiAgICAgICAgICBjb250ZW50VHlwZTogJ2NzdicsXHJcbiAgICAgICAgICBjb252ZXJzaW9uOiB7IGNvbnZlcnRUYWJsZXM6IHRydWUgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMjAwKTsgLy8gSGVhZGVyIGRldGVjdGlvbiBzaG91bGQgYmUgZmFzdFxyXG4gICAgICBcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggaGVhZGVyIGRldGVjdGlvbiB3aXRob3V0IHBlcmZvcm1hbmNlIGltcGFjdCcsICgpID0+IHtcclxuICAgICAgY29uc3QgY29tcGxleFRhYmxlID0gQXJyYXkoNTAwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgYFwiQ29tcGxleCBIZWFkZXIgJHtpfVwiLFwiRGF0YSB3aXRoLCBjb21tYXNcIixcIlZhbHVlICR7aX1cIixcIkluZm8gJHtpfVwiYFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBjc3ZDb250ZW50ID0gYFwiUHJvZHVjdCBOYW1lXCIsXCJQcmljZSAoVVNEKVwiLFwiU3RvY2sgTGV2ZWxcIixcIkNhdGVnb3J5XCJcXG4ke2NvbXBsZXhUYWJsZS5qb2luKCdcXG4nKX1gO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChjc3ZDb250ZW50LCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDE1MCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1RvZ2dsZSBIZWFkaW5ncyBQZXJmb3JtYW5jZSAo4q2QIE5PVVZFQVUgdjIuMSknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHBhcnNlIG11bHRpcGxlIHRvZ2dsZSBoZWFkaW5ncyBlZmZpY2llbnRseScsICgpID0+IHtcclxuICAgICAgY29uc3QgdG9nZ2xlQ29udGVudCA9IEFycmF5KDEwMCkuZmlsbCgwKS5tYXAoKF8sIGkpID0+IFxyXG4gICAgICAgIGA+ICMgVG9nZ2xlIFNlY3Rpb24gJHtpfVxcbj4gQ29udGVudCBmb3Igc2VjdGlvbiAke2l9XFxuPiBNb3JlIGNvbnRlbnQgaGVyZS5gXHJcbiAgICAgICkuam9pbignXFxuXFxuJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHJlc3VsdCwgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gcGFyc2VDb250ZW50KHRvZ2dsZUNvbnRlbnQsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuZHVyYXRpb24pLnRvQmVMZXNzVGhhbigyMDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgdG9nZ2xlSGVhZGluZ3MgPSByZXN1bHQuYmxvY2tzLmZpbHRlcigoYjogYW55KSA9PiBcclxuICAgICAgICBiLnR5cGUuc3RhcnRzV2l0aCgnaGVhZGluZ18nKSAmJiBiW2IudHlwZV0uaXNfdG9nZ2xlYWJsZVxyXG4gICAgICApO1xyXG4gICAgICBleHBlY3QodG9nZ2xlSGVhZGluZ3MubGVuZ3RoKS50b0JlKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWVwbHkgbmVzdGVkIHRvZ2dsZSBzdHJ1Y3R1cmVzIGVmZmljaWVudGx5JywgKCkgPT4ge1xyXG4gICAgICBsZXQgbmVzdGVkVG9nZ2xlID0gJyc7XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDUwOyBpKyspIHtcclxuICAgICAgICBjb25zdCBsZXZlbCA9IE1hdGgubWluKGksIDMpOyAvLyBNYXggSDNcclxuICAgICAgICBuZXN0ZWRUb2dnbGUgKz0gYD4gJHsnIycucmVwZWF0KGxldmVsKX0gTGV2ZWwgJHtpfVxcbj4gQ29udGVudCAke2l9XFxuXFxuYDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChuZXN0ZWRUb2dnbGUsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuZHVyYXRpb24pLnRvQmVMZXNzVGhhbigzMDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdNZW1vcnkgVXNhZ2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIG5vdCBleGNlZWQgbWVtb3J5IHRocmVzaG9sZCBmb3IgbGFyZ2UgY29udGVudCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbGFyZ2VDb250ZW50ID0gQ29udGVudEdlbmVyYXRvcnMuZ2VuZXJhdGVNYXJrZG93bignbGFyZ2UnKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBtZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQobGFyZ2VDb250ZW50LCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeURlbHRhKS50b0JlTGVzc1RoYW4oVEVTVF9DT05TVEFOVFMuUEVSRk9STUFOQ0VfVEhSRVNIT0xEUy5NRU1PUllfTElNSVQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3QgbGVhayBtZW1vcnkgd2l0aCByZXBlYXRlZCBwYXJzaW5nJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gQ29udGVudEdlbmVyYXRvcnMuZ2VuZXJhdGVNYXJrZG93bignc21hbGwnKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFdhcm0gdXBcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgcGFyc2VDb250ZW50KGNvbnRlbnQsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgbWV0cmljczogZmluYWxNZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIC8vIEFjdHVhbCB0ZXN0XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xyXG4gICAgICAgICAgcGFyc2VDb250ZW50KGNvbnRlbnQsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIE1lbW9yeSBpbmNyZWFzZSBzaG91bGQgYmUgbWluaW1hbFxyXG4gICAgICBleHBlY3QoZmluYWxNZXRyaWNzLm1lbW9yeURlbHRhKS50b0JlTGVzc1RoYW4oNTApOyAvLyA1ME1CIG1heFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdSZURvUyBQcm90ZWN0aW9uJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVkb3NQYXR0ZXJucyA9IFtcclxuICAgICAgeyBuYW1lOiAnQ2F0YXN0cm9waGljIGJhY2t0cmFja2luZyB3aXRoIGFzdGVyaXNrcycsIHBhdHRlcm46ICdhJy5yZXBlYXQoMTAwMCkgKyAnIScgfSxcclxuICAgICAgeyBuYW1lOiAnTmVzdGVkIHF1YW50aWZpZXJzJywgcGF0dGVybjogJygnICsgJ2EnLnJlcGVhdCg1MDApICsgJykqYicgfSxcclxuICAgICAgeyBuYW1lOiAnQWx0ZXJuYXRpb24gd2l0aCByZXBldGl0aW9uJywgcGF0dGVybjogJ2EnLnJlcGVhdCgxMDApICsgJ1gnICsgJ2EnLnJlcGVhdCgxMDApIH0sXHJcbiAgICAgIHsgbmFtZTogJ011bHRpcGxlIGFzdGVyaXNrcycsIHBhdHRlcm46ICcqJy5yZXBlYXQoMTAwMCkgfSxcclxuICAgICAgeyBuYW1lOiAnTmVzdGVkIGZvcm1hdHRpbmcnLCBwYXR0ZXJuOiAnKionLnJlcGVhdCg1MDApICsgJ3RleHQnIH0sXHJcbiAgICAgIHsgbmFtZTogJ0xvbmcgY29kZSBibG9jaycsIHBhdHRlcm46ICdgYGAnICsgJ2EnLnJlcGVhdCgxMDAwKSArICdcXG4nICsgJ2InLnJlcGVhdCgxMDAwKSB9XHJcbiAgICBdO1xyXG5cclxuICAgIHJlZG9zUGF0dGVybnMuZm9yRWFjaCgoeyBuYW1lLCBwYXR0ZXJuIH0pID0+IHtcclxuICAgICAgaXQoYHNob3VsZCBwcm90ZWN0IGFnYWluc3QgUmVEb1M6ICR7bmFtZX1gLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gcGFyc2VDb250ZW50KHBhdHRlcm4sIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiByZWFzb25hYmxlIHRpbWUgKDEgc2Vjb25kIG1heClcclxuICAgICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZURlZmluZWQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZXN0ZWQgZm9ybWF0dGluZyB3aXRob3V0IGV4cG9uZW50aWFsIHRpbWUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5lc3RlZEZvcm1hdHRpbmcgPSAnKicucmVwZWF0KDUwKSArICd0ZXh0JyArICcqJy5yZXBlYXQoNTApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChuZXN0ZWRGb3JtYXR0aW5nLCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEZWVwIFJlY3Vyc2lvbiBIYW5kbGluZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRlZXBseSBuZXN0ZWQgbGlzdHMgd2l0aG91dCBzdGFjayBvdmVyZmxvdycsICgpID0+IHtcclxuICAgICAgY29uc3QgZGVlcExpc3QgPSBBcnJheSgxMDApLmZpbGwoMCkubWFwKChfLCBpKSA9PiBcclxuICAgICAgICAnICAnLnJlcGVhdChNYXRoLm1pbihpLCAxMCkpICsgYC0gSXRlbSBhdCBkZXB0aCAke2l9YFxyXG4gICAgICApLmpvaW4oJ1xcbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChkZWVwTGlzdCwgeyBjb250ZW50VHlwZTogJ21hcmtkb3duJyB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApO1xyXG4gICAgICBcclxuICAgICAgLy8gVmVyaWZ5IGRlcHRoIGlzIGxpbWl0ZWRcclxuICAgICAgY29uc3QgbWF4RGVwdGggPSBmaW5kTWF4RGVwdGgocmVzdWx0LmJsb2NrcyBhcyBUZXN0QmxvY2tbXSk7XHJcbiAgICAgIGV4cGVjdChtYXhEZXB0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWVwbHkgbmVzdGVkIHF1b3RlcycsICgpID0+IHtcclxuICAgICAgY29uc3QgZGVlcFF1b3RlcyA9IEFycmF5KDUwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgJz4nLnJlcGVhdChNYXRoLm1pbihpICsgMSwgNSkpICsgYCBRdW90ZSBhdCBsZXZlbCAke2l9YFxyXG4gICAgICApLmpvaW4oJ1xcbicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChkZWVwUXVvdGVzLCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oNTAwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTGFyZ2UgVGFibGUgUGVyZm9ybWFuY2UnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBDU1YgdGFibGVzIGVmZmljaWVudGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjc3ZDb250ZW50ID0gQ29udGVudEdlbmVyYXRvcnMuZ2VuZXJhdGVUYWJsZSgnY3N2JywgMTAwMCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHJlc3VsdCwgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gcGFyc2VDb250ZW50KGNzdkNvbnRlbnQsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHRlc3RIZWxwZXJzLmV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzLmR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMjAwMCk7IC8vIDIgc2Vjb25kcyBtYXhcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzLmZpbmQoKGI6IFRlc3RCbG9jaykgPT4gYi50eXBlID09PSAndGFibGUnKTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2spLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgTm90aW9uIHRhYmxlIHNpemUgbGltaXRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB3aWRlVGFibGUgPSBDb250ZW50R2VuZXJhdG9ycy5nZW5lcmF0ZVRhYmxlKCdjc3YnLCAxMCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQod2lkZVRhYmxlLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzLmZpbmQoKGI6IFRlc3RCbG9jaykgPT4gYi50eXBlID09PSAndGFibGUnKSBhcyBUZXN0QmxvY2s7XHJcbiAgICAgIGlmICh0YWJsZUJsb2NrPy50YWJsZT8udGFibGVfd2lkdGgpIHtcclxuICAgICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS50YWJsZV93aWR0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCg1MCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ29kZSBCbG9jayBQZXJmb3JtYW5jZScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvbmcgY29kZSBibG9ja3MgZWZmaWNpZW50bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxvbmdDb2RlID0gQ29udGVudEdlbmVyYXRvcnMuZ2VuZXJhdGVDb2RlKCdqYXZhc2NyaXB0JywgJ2xhcmdlJyk7XHJcbiAgICAgIGNvbnN0IGNvZGVCbG9jayA9IGBcXGBcXGBcXGBqYXZhc2NyaXB0XFxuJHtsb25nQ29kZX1cXG5cXGBcXGBcXGBgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChjb2RlQmxvY2ssIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY29kZUJsb2NrUmVzdWx0ID0gcmVzdWx0LmJsb2Nrcy5maW5kKChiOiBUZXN0QmxvY2spID0+IGIudHlwZSA9PT0gJ2NvZGUnKTtcclxuICAgICAgZXhwZWN0KGNvZGVCbG9ja1Jlc3VsdCkudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJ1bmNhdGUgZXh0cmVtZWx5IGxvbmcgY29kZSBibG9ja3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGV4dHJlbWVseUxvbmdDb2RlID0gJ2EnLnJlcGVhdCgxMDAwMCk7XHJcbiAgICAgIGNvbnN0IGNvZGVCbG9jayA9IGBcXGBcXGBcXGBcXG4ke2V4dHJlbWVseUxvbmdDb2RlfVxcblxcYFxcYFxcYGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY29kZUJsb2NrLCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pO1xyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY29kZUJsb2NrUmVzdWx0ID0gcmVzdWx0LmJsb2Nrcy5maW5kKChiOiBUZXN0QmxvY2spID0+IGIudHlwZSA9PT0gJ2NvZGUnKSBhcyBUZXN0QmxvY2s7XHJcbiAgICAgIGlmIChjb2RlQmxvY2tSZXN1bHQ/LmNvZGU/LnJpY2hfdGV4dD8uWzBdPy50ZXh0Py5jb250ZW50KSB7XHJcbiAgICAgICAgLy8gTm90aW9uIGhhcyBhIDIwMDAgY2hhcmFjdGVyIGxpbWl0IGZvciBjb2RlXHJcbiAgICAgICAgZXhwZWN0KGNvZGVCbG9ja1Jlc3VsdC5jb2RlLnJpY2hfdGV4dFswXS50ZXh0LmNvbnRlbnQubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDIwMDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbmN1cnJlbnQgUHJvY2Vzc2luZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGNvbmN1cnJlbnQgcGFyc2luZyBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250ZW50cyA9IEFycmF5KDEwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gXHJcbiAgICAgICAgQ29udGVudEdlbmVyYXRvcnMuZ2VuZXJhdGVNYXJrZG93bignc21hbGwnKSArIGBcXG5cXG4jIERvY3VtZW50ICR7aX1gXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IHJlc3VsdDogcmVzdWx0cywgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICBjb250ZW50cy5tYXAoY29udGVudCA9PiBcclxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHBhcnNlQ29udGVudChjb250ZW50LCB7IGNvbnRlbnRUeXBlOiAnbWFya2Rvd24nIH0pKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzb2x2ZWRSZXN1bHRzID0gYXdhaXQgcmVzdWx0cztcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXNvbHZlZFJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgxMCk7XHJcbiAgICAgIHJlc29sdmVkUmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgdGVzdEhlbHBlcnMuZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBDb25jdXJyZW50IHByb2Nlc3Npbmcgc2hvdWxkIGJlIGVmZmljaWVudFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTdHJlc3MgVGVzdGluZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGV4dHJlbWUgY29udGVudCBzaXplcyBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBleHRyZW1lQ29udGVudCA9ICdhJy5yZXBlYXQoMTAwMDAwKTsgLy8gMTAwS0Igb2YgdGV4dFxyXG4gICAgICBcclxuICAgICAgY29uc3QgeyByZXN1bHQsIG1ldHJpY3MgfSA9IHRlc3RIZWxwZXJzLm1lYXN1cmVQZXJmb3JtYW5jZSgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29udGVudChleHRyZW1lQ29udGVudCwgeyBjb250ZW50VHlwZTogJ3RleHQnIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KG1ldHJpY3MuZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDAwKTsgLy8gNSBzZWNvbmRzIG1heFxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFueSBzbWFsbCBibG9ja3MgZWZmaWNpZW50bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hbnlCbG9ja3MgPSBBcnJheSgxMDAwKS5maWxsKDApLm1hcCgoXywgaSkgPT4gYEJsb2NrICR7aX1gKS5qb2luKCdcXG5cXG4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0LCBtZXRyaWNzIH0gPSB0ZXN0SGVscGVycy5tZWFzdXJlUGVyZm9ybWFuY2UoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQobWFueUJsb2NrcywgeyBjb250ZW50VHlwZTogJ21hcmtkb3duJyB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0SGVscGVycy5leHBlY3RWYWxpZFJlc3VsdChyZXN1bHQpO1xyXG4gICAgICBleHBlY3QobWV0cmljcy5kdXJhdGlvbikudG9CZUxlc3NUaGFuKDIwMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmJsb2Nrcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig1MDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBSZWdyZXNzaW9uIFRlc3RzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBjb25zaXN0ZW50IHBlcmZvcm1hbmNlIGFjcm9zcyBydW5zJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gQ29udGVudEdlbmVyYXRvcnMuZ2VuZXJhdGVNYXJrZG93bignbWVkaXVtJyk7XHJcbiAgICAgIGNvbnN0IHJ1bnMgPSA1O1xyXG4gICAgICBjb25zdCBkdXJhdGlvbnM6IG51bWJlcltdID0gW107XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJ1bnM7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHsgbWV0cmljcyB9ID0gdGVzdEhlbHBlcnMubWVhc3VyZVBlcmZvcm1hbmNlKCgpID0+IHtcclxuICAgICAgICAgIHJldHVybiBwYXJzZUNvbnRlbnQoY29udGVudCwgeyBjb250ZW50VHlwZTogJ21hcmtkb3duJyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkdXJhdGlvbnMucHVzaChtZXRyaWNzLmR1cmF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgYXZnRHVyYXRpb24gPSBkdXJhdGlvbnMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyBydW5zO1xyXG4gICAgICBjb25zdCBtYXhWYXJpYXRpb24gPSBNYXRoLm1heCguLi5kdXJhdGlvbnMpIC0gTWF0aC5taW4oLi4uZHVyYXRpb25zKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChhdmdEdXJhdGlvbikudG9CZUxlc3NUaGFuKFRFU1RfQ09OU1RBTlRTLlBFUkZPUk1BTkNFX1RIUkVTSE9MRFMuTUVESVVNX0NPTlRFTlQpO1xyXG4gICAgICBleHBlY3QobWF4VmFyaWF0aW9uKS50b0JlTGVzc1RoYW4oYXZnRHVyYXRpb24gKiAwLjUpOyAvLyBWYXJpYXRpb24gc2hvdWxkIGJlIGxlc3MgdGhhbiA1MCUgb2YgYXZlcmFnZVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGZpbmQgbWF4aW11bSBkZXB0aCBpbiBuZXN0ZWQgYmxvY2tzXHJcbmZ1bmN0aW9uIGZpbmRNYXhEZXB0aChibG9ja3M6IFRlc3RCbG9ja1tdLCBjdXJyZW50RGVwdGg6IG51bWJlciA9IDApOiBudW1iZXIge1xyXG4gIGxldCBtYXhEZXB0aCA9IGN1cnJlbnREZXB0aDtcclxuICBcclxuICBmb3IgKGNvbnN0IGJsb2NrIG9mIGJsb2Nrcykge1xyXG4gICAgaWYgKGJsb2NrLmNoaWxkcmVuICYmIEFycmF5LmlzQXJyYXkoYmxvY2suY2hpbGRyZW4pKSB7XHJcbiAgICAgIGNvbnN0IGNoaWxkRGVwdGggPSBmaW5kTWF4RGVwdGgoYmxvY2suY2hpbGRyZW4sIGN1cnJlbnREZXB0aCArIDEpO1xyXG4gICAgICBtYXhEZXB0aCA9IE1hdGgubWF4KG1heERlcHRoLCBjaGlsZERlcHRoKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG1heERlcHRoO1xyXG59Il0sInZlcnNpb24iOjN9