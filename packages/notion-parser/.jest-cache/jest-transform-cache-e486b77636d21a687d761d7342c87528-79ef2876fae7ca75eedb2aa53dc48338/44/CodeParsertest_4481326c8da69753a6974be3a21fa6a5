ac25c4ce5eaa48ede0e0eab40b061302
"use strict";
/**
 * Tests unitaires pour CodeParser - Cahier des Charges v2.1
 * Couvre le parsing de code avec dÃ©tection de langage complÃ¨te
 */
Object.defineProperty(exports, "__esModule", { value: true });
const CodeParser_1 = require("../../../src/parsers/CodeParser");
const parseContent_1 = require("../../../src/parseContent");
describe('CodeParser - Cahier des Charges v2.1', () => {
    let parser;
    beforeEach(() => {
        parser = new CodeParser_1.CodeParser();
    });
    describe('Language Detection - JavaScript/TypeScript', () => {
        it('should detect JavaScript with function declarations', () => {
            const jsCode = 'function hello() {\n  console.log("Hello World");\n  return true;\n}';
            const result = parser.parse(jsCode);
            expect(result).toHaveLength(1);
            expect(result[0].type).toBe('code');
            expect(result[0].metadata?.language).toBe('javascript');
        });
        it('should detect JavaScript with arrow functions', () => {
            const jsCode = 'const hello = () => {\n  console.log("Hello");\n};';
            const result = parser.parse(jsCode);
            expect(result[0].metadata?.language).toBe('javascript');
        });
        it('should detect JavaScript with ES6 imports', () => {
            const jsCode = 'import React from "react";\nconst component = () => <div>Hello</div>;';
            const result = parser.parse(jsCode);
            expect(result[0].metadata?.language).toBe('javascript');
        });
        it('should detect TypeScript with type annotations', () => {
            const tsCode = 'interface User {\n  name: string;\n  age: number;\n}\nfunction greet(user: User): string {\n  return `Hello ${user.name}`;\n}';
            const result = parser.parse(tsCode);
            expect(result[0].metadata?.language).toBe('typescript');
        });
        it('should detect TypeScript with generic types', () => {
            const tsCode = 'function identity<T>(arg: T): T {\n  return arg;\n}';
            const result = parser.parse(tsCode);
            expect(result[0].metadata?.language).toBe('typescript');
        });
    });
    describe('Language Detection - Python', () => {
        it('should detect Python with function definitions', () => {
            const pythonCode = 'def hello():\n    print("Hello World")\n    return True';
            const result = parser.parse(pythonCode);
            expect(result[0].metadata?.language).toBe('python');
        });
        it('should detect Python with class definitions', () => {
            const pythonCode = 'class MyClass:\n    def __init__(self):\n        self.value = 42';
            const result = parser.parse(pythonCode);
            expect(result[0].metadata?.language).toBe('python');
        });
        it('should detect Python with imports', () => {
            const pythonCode = 'import os\nfrom datetime import datetime\n\nprint("Hello")';
            const result = parser.parse(pythonCode);
            expect(result[0].metadata?.language).toBe('python');
        });
        it('should detect Python with list comprehensions', () => {
            const pythonCode = 'numbers = [x for x in range(10) if x % 2 == 0]';
            const result = parser.parse(pythonCode);
            expect(result[0].metadata?.language).toBe('python');
        });
    });
    describe('Language Detection - Java', () => {
        it('should detect Java with class declarations', () => {
            const javaCode = 'public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println("Hello World");\n    }\n}';
            const result = parser.parse(javaCode);
            expect(result[0].metadata?.language).toBe('java');
        });
        it('should detect Java with imports', () => {
            const javaCode = 'import java.util.List;\nimport java.util.ArrayList;\n\npublic class Test {}';
            const result = parser.parse(javaCode);
            expect(result[0].metadata?.language).toBe('java');
        });
    });
    describe('Language Detection - C/C++', () => {
        it('should detect C with includes and main function', () => {
            const cCode = '#include <stdio.h>\n\nint main() {\n    printf("Hello World");\n    return 0;\n}';
            const result = parser.parse(cCode);
            expect(result[0].metadata?.language).toBe('c');
        });
        it('should detect C++ with std namespace', () => {
            const cppCode = '#include <iostream>\n\nint main() {\n    std::cout << "Hello World" << std::endl;\n    return 0;\n}';
            const result = parser.parse(cppCode);
            expect(result[0].metadata?.language).toBe('c++');
        });
    });
    describe('Language Detection - Other Languages', () => {
        it('should detect C# with using statements', () => {
            const csharpCode = 'using System;\n\nnamespace HelloWorld {\n    public class Program {\n        public static void Main() {\n            Console.WriteLine("Hello World");\n        }\n    }\n}';
            const result = parser.parse(csharpCode);
            expect(result[0].metadata?.language).toBe('c#');
        });
        it('should detect PHP with PHP tags', () => {
            const phpCode = '<?php\n$name = "World";\necho "Hello " . $name;\n?>';
            const result = parser.parse(phpCode);
            expect(result[0].metadata?.language).toBe('php');
        });
        it('should detect Ruby with def and end', () => {
            const rubyCode = 'def hello\n  puts "Hello World"\nend\n\nhello';
            const result = parser.parse(rubyCode);
            expect(result[0].metadata?.language).toBe('ruby');
        });
        it('should detect Go with package and func', () => {
            const goCode = 'package main\n\nimport "fmt"\n\nfunc main() {\n    fmt.Println("Hello World")\n}';
            const result = parser.parse(goCode);
            expect(result[0].metadata?.language).toBe('go');
        });
        it('should detect Rust with fn and println!', () => {
            const rustCode = 'fn main() {\n    println!("Hello World");\n}';
            const result = parser.parse(rustCode);
            expect(result[0].metadata?.language).toBe('rust');
        });
        it('should detect SQL with SELECT statements', () => {
            const sqlCode = 'SELECT name, age FROM users WHERE age > 18 ORDER BY name;';
            const result = parser.parse(sqlCode);
            expect(result[0].metadata?.language).toBe('sql');
        });
        it('should detect CSS with selectors and properties', () => {
            const cssCode = '.container {\n  display: flex;\n  justify-content: center;\n  background-color: #f0f0f0;\n}';
            const result = parser.parse(cssCode);
            expect(result[0].metadata?.language).toBe('css');
        });
        it('should detect HTML with tags', () => {
            const htmlCode = '<!DOCTYPE html>\n<html>\n<head>\n    <title>Test</title>\n</head>\n<body>\n    <h1>Hello World</h1>\n</body>\n</html>';
            const result = parser.parse(htmlCode);
            expect(result[0].metadata?.language).toBe('html');
        });
    });
    describe('Language Detection - Fallback', () => {
        it('should fallback to plain text for unknown languages', () => {
            const unknownCode = 'some unknown syntax here that does not match any pattern';
            const result = parser.parse(unknownCode);
            expect(result[0].metadata?.language).toBe('plain text');
        });
        it('should handle mixed language content', () => {
            const mixedCode = '// JavaScript comment\nfunction test() {}\n/* CSS comment */\n.class { color: red; }';
            const result = parser.parse(mixedCode);
            // Should detect the most prominent language (JavaScript in this case)
            expect(['javascript', 'css', 'plain text']).toContain(result[0].metadata?.language);
        });
    });
    describe('Code Block Structure', () => {
        it('should create valid Notion code block structure', () => {
            const code = 'const test = "hello";';
            const result = parser.parse(code);
            expect(result).toHaveLength(1);
            expect(result[0]).toMatchObject({
                type: 'code',
                content: code,
                metadata: {
                    language: expect.any(String),
                    isBlock: true
                }
            });
        });
        it('should preserve code formatting and whitespace', () => {
            const code = 'function test() {\n    if (true) {\n        return "indented";\n    }\n}';
            const result = parser.parse(code);
            expect(result[0].content).toBe(code);
        });
        it('should handle empty code blocks', () => {
            const code = '';
            const result = parser.parse(code);
            expect(result).toEqual([]);
        });
        it('should handle whitespace-only code', () => {
            const code = '   \n\t\n   ';
            const result = parser.parse(code);
            expect(result).toEqual([]);
        });
    });
    describe('Content Truncation', () => {
        it('should truncate extremely long code blocks', () => {
            const longCode = 'a'.repeat(5000); // Exceeds 2000 char limit
            const result = parser.parse(longCode);
            expect(result).toHaveLength(1);
            expect(result[0].content.length).toBeLessThanOrEqual(2000);
        });
        it('should respect custom maxCodeLength option', () => {
            const customParser = new CodeParser_1.CodeParser({ maxCodeLength: 100 });
            const longCode = 'a'.repeat(200);
            const result = customParser.parse(longCode);
            expect(result[0].content.length).toBeLessThanOrEqual(100);
        });
        it('should not truncate short code', () => {
            const shortCode = 'function test() { return true; }';
            const result = parser.parse(shortCode);
            expect(result[0].content).toBe(shortCode);
        });
    });
    describe('Language Validation', () => {
        it('should validate provided language from metadata', () => {
            const customParser = new CodeParser_1.CodeParser({
                metadata: { language: 'python' }
            });
            const code = 'some code here';
            const result = customParser.parse(code);
            expect(result[0].metadata?.language).toBe('python');
        });
        it('should fallback if provided language is invalid', () => {
            const customParser = new CodeParser_1.CodeParser({
                metadata: { language: 'invalid-language' }
            });
            const jsCode = 'function test() {}';
            const result = customParser.parse(jsCode);
            expect(result[0].metadata?.language).toBe('javascript'); // Auto-detected
        });
        it('should handle case-insensitive language names', () => {
            const customParser = new CodeParser_1.CodeParser({
                metadata: { language: 'JAVASCRIPT' }
            });
            const code = 'some code';
            const result = customParser.parse(code);
            expect(result[0].metadata?.language).toBe('javascript');
        });
    });
    describe('Special Characters and Encoding', () => {
        it('should handle code with special characters', () => {
            const codeWithSpecial = 'const emoji = "ðŸŽ¯";\nconst unicode = "SpÃ©ciÃ l chÃ racters";';
            const result = parser.parse(codeWithSpecial);
            expect(result[0].content).toContain('ðŸŽ¯');
            expect(result[0].content).toContain('SpÃ©ciÃ l');
        });
        it('should handle code with escape sequences', () => {
            const codeWithEscapes = 'const str = "Hello\\nWorld\\t!";\nconst regex = /\\d+/g;';
            const result = parser.parse(codeWithEscapes);
            expect(result[0].content).toBe(codeWithEscapes);
        });
        it('should handle code with various quotes', () => {
            const codeWithQuotes = `const single = 'single quotes';\nconst double = "double quotes";\nconst template = \`template \${literal}\`;`;
            const result = parser.parse(codeWithQuotes);
            expect(result[0].content).toBe(codeWithQuotes);
        });
    });
    describe('Performance', () => {
        it('should parse large code files efficiently', () => {
            const largeCode = Array(1000).fill('function test() { return true; }').join('\n');
            const startTime = Date.now();
            const result = parser.parse(largeCode);
            const duration = Date.now() - startTime;
            expect(result).toHaveLength(1);
            expect(duration).toBeLessThan(100); // Should be fast
        });
        it('should handle concurrent code parsing', () => {
            const codeSnippets = [
                'const a = 1;',
                'def func(): pass',
                'public class Test {}',
                '.class { color: red; }',
                'SELECT * FROM table;'
            ];
            const results = codeSnippets.map(code => parser.parse(code));
            results.forEach(result => {
                expect(result).toHaveLength(1);
                expect(result[0].type).toBe('code');
            });
        });
    });
    describe('Error Handling', () => {
        it('should handle malformed code gracefully', () => {
            const malformedCode = 'function unclosed() { if (true { return;';
            const result = parser.parse(malformedCode);
            expect(result).toHaveLength(1);
            expect(result[0].type).toBe('code');
            expect(result[0].content).toBe(malformedCode);
        });
        it('should handle null and undefined input', () => {
            expect(parser.parse(null)).toEqual([]);
            expect(parser.parse(undefined)).toEqual([]);
        });
        it('should handle very short code snippets', () => {
            const shortCode = 'x';
            const result = parser.parse(shortCode);
            expect(result).toHaveLength(1);
            expect(result[0].content).toBe(shortCode);
        });
    });
    describe('Integration with parseContent', () => {
        it('should work correctly with parseContent function', () => {
            const jsCode = 'function hello() {\n  console.log("Hello World");\n}';
            const result = (0, parseContent_1.parseContent)(jsCode, { contentType: 'code' });
            expect(result.success).toBe(true);
            expect(result.blocks).toHaveLength(1);
            expect(result.blocks[0].type).toBe('code');
        });
        it('should auto-detect code in parseContent', () => {
            const pythonCode = 'def hello():\n    print("Hello World")';
            const result = (0, parseContent_1.parseContent)(pythonCode);
            expect(result.success).toBe(true);
            expect(result.blocks).toHaveLength(1);
            expect(result.blocks[0].type).toBe('code');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxyYXlhblxcRGVza3RvcFxcRGV2XFxOb3Rpb25DbGlwcGVyXFxwYWNrYWdlc1xcbm90aW9uLXBhcnNlclxcdGVzdHNcXHVuaXRcXHBhcnNlcnNcXENvZGVQYXJzZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILGdFQUE2RDtBQUM3RCw0REFBeUQ7QUFFekQsUUFBUSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtJQUNwRCxJQUFJLE1BQWtCLENBQUM7SUFFdkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLE1BQU0sR0FBRyxJQUFJLHVCQUFVLEVBQUUsQ0FBQztJQUM1QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw0Q0FBNEMsRUFBRSxHQUFHLEVBQUU7UUFDMUQsRUFBRSxDQUFDLHFEQUFxRCxFQUFFLEdBQUcsRUFBRTtZQUM3RCxNQUFNLE1BQU0sR0FBRyxzRUFBc0UsQ0FBQztZQUN0RixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXBDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzFELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUN2RCxNQUFNLE1BQU0sR0FBRyxvREFBb0QsQ0FBQztZQUNwRSxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXBDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFB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RTtZQUNqRCxNQUFNLFVBQVUsR0FBRyx3Q0FBd0MsQ0FBQztZQUM1RCxNQUFNLE1BQU0sR0FBRyxJQUFBLDJCQUFZLEVBQUMsVUFBVSxDQUFDLENBQUM7WUFFeEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHJheWFuXFxEZXNrdG9wXFxEZXZcXE5vdGlvbkNsaXBwZXJcXHBhY2thZ2VzXFxub3Rpb24tcGFyc2VyXFx0ZXN0c1xcdW5pdFxccGFyc2Vyc1xcQ29kZVBhcnNlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgdW5pdGFpcmVzIHBvdXIgQ29kZVBhcnNlciAtIENhaGllciBkZXMgQ2hhcmdlcyB2Mi4xXG4gKiBDb3V2cmUgbGUgcGFyc2luZyBkZSBjb2RlIGF2ZWMgZMOpdGVjdGlvbiBkZSBsYW5nYWdlIGNvbXBsw6h0ZVxuICovXG5cbmltcG9ydCB7IENvZGVQYXJzZXIgfSBmcm9tICcuLi8uLi8uLi9zcmMvcGFyc2Vycy9Db2RlUGFyc2VyJztcbmltcG9ydCB7IHBhcnNlQ29udGVudCB9IGZyb20gJy4uLy4uLy4uL3NyYy9wYXJzZUNvbnRlbnQnO1xuXG5kZXNjcmliZSgnQ29kZVBhcnNlciAtIENhaGllciBkZXMgQ2hhcmdlcyB2Mi4xJywgKCkgPT4ge1xuICBsZXQgcGFyc2VyOiBDb2RlUGFyc2VyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHBhcnNlciA9IG5ldyBDb2RlUGFyc2VyKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMYW5ndWFnZSBEZXRlY3Rpb24gLSBKYXZhU2NyaXB0L1R5cGVTY3JpcHQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgSmF2YVNjcmlwdCB3aXRoIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGpzQ29kZSA9ICdmdW5jdGlvbiBoZWxsbygpIHtcXG4gIGNvbnNvbGUubG9nKFwiSGVsbG8gV29ybGRcIik7XFxuICByZXR1cm4gdHJ1ZTtcXG59JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShqc0NvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLnR5cGUpLnRvQmUoJ2NvZGUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdqYXZhc2NyaXB0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBKYXZhU2NyaXB0IHdpdGggYXJyb3cgZnVuY3Rpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QganNDb2RlID0gJ2NvbnN0IGhlbGxvID0gKCkgPT4ge1xcbiAgY29uc29sZS5sb2coXCJIZWxsb1wiKTtcXG59Oyc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UoanNDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ2phdmFzY3JpcHQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IEphdmFTY3JpcHQgd2l0aCBFUzYgaW1wb3J0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGpzQ29kZSA9ICdpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XFxuY29uc3QgY29tcG9uZW50ID0gKCkgPT4gPGRpdj5IZWxsbzwvZGl2PjsnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGpzQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdqYXZhc2NyaXB0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBUeXBlU2NyaXB0IHdpdGggdHlwZSBhbm5vdGF0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRzQ29kZSA9ICdpbnRlcmZhY2UgVXNlciB7XFxuICBuYW1lOiBzdHJpbmc7XFxuICBhZ2U6IG51bWJlcjtcXG59XFxuZnVuY3Rpb24gZ3JlZXQodXNlcjogVXNlcik6IHN0cmluZyB7XFxuICByZXR1cm4gYEhlbGxvICR7dXNlci5uYW1lfWA7XFxufSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UodHNDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ3R5cGVzY3JpcHQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IFR5cGVTY3JpcHQgd2l0aCBnZW5lcmljIHR5cGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdHNDb2RlID0gJ2Z1bmN0aW9uIGlkZW50aXR5PFQ+KGFyZzogVCk6IFQge1xcbiAgcmV0dXJuIGFyZztcXG59JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZSh0c0NvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgndHlwZXNjcmlwdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGFuZ3VhZ2UgRGV0ZWN0aW9uIC0gUHl0aG9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGV0ZWN0IFB5dGhvbiB3aXRoIGZ1bmN0aW9uIGRlZmluaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHl0aG9uQ29kZSA9ICdkZWYgaGVsbG8oKTpcXG4gICAgcHJpbnQoXCJIZWxsbyBXb3JsZFwiKVxcbiAgICByZXR1cm4gVHJ1ZSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UocHl0aG9uQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdweXRob24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IFB5dGhvbiB3aXRoIGNsYXNzIGRlZmluaXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHl0aG9uQ29kZSA9ICdjbGFzcyBNeUNsYXNzOlxcbiAgICBkZWYgX19pbml0X18oc2VsZik6XFxuICAgICAgICBzZWxmLnZhbHVlID0gNDInO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKHB5dGhvbkNvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgncHl0aG9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBQeXRob24gd2l0aCBpbXBvcnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHl0aG9uQ29kZSA9ICdpbXBvcnQgb3NcXG5mcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZVxcblxcbnByaW50KFwiSGVsbG9cIiknO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKHB5dGhvbkNvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgncHl0aG9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBQeXRob24gd2l0aCBsaXN0IGNvbXByZWhlbnNpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHl0aG9uQ29kZSA9ICdudW1iZXJzID0gW3ggZm9yIHggaW4gcmFuZ2UoMTApIGlmIHggJSAyID09IDBdJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShweXRob25Db2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ3B5dGhvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGFuZ3VhZ2UgRGV0ZWN0aW9uIC0gSmF2YScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBKYXZhIHdpdGggY2xhc3MgZGVjbGFyYXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgamF2YUNvZGUgPSAncHVibGljIGNsYXNzIEhlbGxvV29ybGQge1xcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XFxuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJIZWxsbyBXb3JsZFwiKTtcXG4gICAgfVxcbn0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGphdmFDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ2phdmEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IEphdmEgd2l0aCBpbXBvcnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgamF2YUNvZGUgPSAnaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xcblxcbnB1YmxpYyBjbGFzcyBUZXN0IHt9JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShqYXZhQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdqYXZhJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMYW5ndWFnZSBEZXRlY3Rpb24gLSBDL0MrKycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBDIHdpdGggaW5jbHVkZXMgYW5kIG1haW4gZnVuY3Rpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjQ29kZSA9ICcjaW5jbHVkZSA8c3RkaW8uaD5cXG5cXG5pbnQgbWFpbigpIHtcXG4gICAgcHJpbnRmKFwiSGVsbG8gV29ybGRcIik7XFxuICAgIHJldHVybiAwO1xcbn0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ2MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IEMrKyB3aXRoIHN0ZCBuYW1lc3BhY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjcHBDb2RlID0gJyNpbmNsdWRlIDxpb3N0cmVhbT5cXG5cXG5pbnQgbWFpbigpIHtcXG4gICAgc3RkOjpjb3V0IDw8IFwiSGVsbG8gV29ybGRcIiA8PCBzdGQ6OmVuZGw7XFxuICAgIHJldHVybiAwO1xcbn0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNwcENvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgnYysrJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMYW5ndWFnZSBEZXRlY3Rpb24gLSBPdGhlciBMYW5ndWFnZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgQyMgd2l0aCB1c2luZyBzdGF0ZW1lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3NoYXJwQ29kZSA9ICd1c2luZyBTeXN0ZW07XFxuXFxubmFtZXNwYWNlIEhlbGxvV29ybGQge1xcbiAgICBwdWJsaWMgY2xhc3MgUHJvZ3JhbSB7XFxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWFpbigpIHtcXG4gICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShcIkhlbGxvIFdvcmxkXCIpO1xcbiAgICAgICAgfVxcbiAgICB9XFxufSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UoY3NoYXJwQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdjIycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgUEhQIHdpdGggUEhQIHRhZ3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwaHBDb2RlID0gJzw/cGhwXFxuJG5hbWUgPSBcIldvcmxkXCI7XFxuZWNobyBcIkhlbGxvIFwiIC4gJG5hbWU7XFxuPz4nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKHBocENvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgncGhwJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBSdWJ5IHdpdGggZGVmIGFuZCBlbmQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBydWJ5Q29kZSA9ICdkZWYgaGVsbG9cXG4gIHB1dHMgXCJIZWxsbyBXb3JsZFwiXFxuZW5kXFxuXFxuaGVsbG8nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKHJ1YnlDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ3J1YnknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IEdvIHdpdGggcGFja2FnZSBhbmQgZnVuYycsICgpID0+IHtcbiAgICAgIGNvbnN0IGdvQ29kZSA9ICdwYWNrYWdlIG1haW5cXG5cXG5pbXBvcnQgXCJmbXRcIlxcblxcbmZ1bmMgbWFpbigpIHtcXG4gICAgZm10LlByaW50bG4oXCJIZWxsbyBXb3JsZFwiKVxcbn0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGdvQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdnbycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgUnVzdCB3aXRoIGZuIGFuZCBwcmludGxuIScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJ1c3RDb2RlID0gJ2ZuIG1haW4oKSB7XFxuICAgIHByaW50bG4hKFwiSGVsbG8gV29ybGRcIik7XFxufSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UocnVzdENvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgncnVzdCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgU1FMIHdpdGggU0VMRUNUIHN0YXRlbWVudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzcWxDb2RlID0gJ1NFTEVDVCBuYW1lLCBhZ2UgRlJPTSB1c2VycyBXSEVSRSBhZ2UgPiAxOCBPUkRFUiBCWSBuYW1lOyc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2Uoc3FsQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdzcWwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IENTUyB3aXRoIHNlbGVjdG9ycyBhbmQgcHJvcGVydGllcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNzc0NvZGUgPSAnLmNvbnRhaW5lciB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xcbn0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNzc0NvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgnY3NzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBIVE1MIHdpdGggdGFncycsICgpID0+IHtcbiAgICAgIGNvbnN0IGh0bWxDb2RlID0gJzwhRE9DVFlQRSBodG1sPlxcbjxodG1sPlxcbjxoZWFkPlxcbiAgICA8dGl0bGU+VGVzdDwvdGl0bGU+XFxuPC9oZWFkPlxcbjxib2R5PlxcbiAgICA8aDE+SGVsbG8gV29ybGQ8L2gxPlxcbjwvYm9keT5cXG48L2h0bWw+JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShodG1sQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdodG1sJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMYW5ndWFnZSBEZXRlY3Rpb24gLSBGYWxsYmFjaycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZhbGxiYWNrIHRvIHBsYWluIHRleHQgZm9yIHVua25vd24gbGFuZ3VhZ2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdW5rbm93bkNvZGUgPSAnc29tZSB1bmtub3duIHN5bnRheCBoZXJlIHRoYXQgZG9lcyBub3QgbWF0Y2ggYW55IHBhdHRlcm4nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKHVua25vd25Db2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ3BsYWluIHRleHQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1peGVkIGxhbmd1YWdlIGNvbnRlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtaXhlZENvZGUgPSAnLy8gSmF2YVNjcmlwdCBjb21tZW50XFxuZnVuY3Rpb24gdGVzdCgpIHt9XFxuLyogQ1NTIGNvbW1lbnQgKi9cXG4uY2xhc3MgeyBjb2xvcjogcmVkOyB9JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShtaXhlZENvZGUpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgZGV0ZWN0IHRoZSBtb3N0IHByb21pbmVudCBsYW5ndWFnZSAoSmF2YVNjcmlwdCBpbiB0aGlzIGNhc2UpXG4gICAgICBleHBlY3QoWydqYXZhc2NyaXB0JywgJ2NzcycsICdwbGFpbiB0ZXh0J10pLnRvQ29udGFpbihyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvZGUgQmxvY2sgU3RydWN0dXJlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHZhbGlkIE5vdGlvbiBjb2RlIGJsb2NrIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSAnY29uc3QgdGVzdCA9IFwiaGVsbG9cIjsnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICBjb250ZW50OiBjb2RlLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGxhbmd1YWdlOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgaXNCbG9jazogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJlc2VydmUgY29kZSBmb3JtYXR0aW5nIGFuZCB3aGl0ZXNwYWNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9ICdmdW5jdGlvbiB0ZXN0KCkge1xcbiAgICBpZiAodHJ1ZSkge1xcbiAgICAgICAgcmV0dXJuIFwiaW5kZW50ZWRcIjtcXG4gICAgfVxcbn0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQmUoY29kZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBjb2RlIGJsb2NrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSAnJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShjb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB3aGl0ZXNwYWNlLW9ubHkgY29kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSAnICAgXFxuXFx0XFxuICAgJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShjb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250ZW50IFRydW5jYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0cnVuY2F0ZSBleHRyZW1lbHkgbG9uZyBjb2RlIGJsb2NrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdDb2RlID0gJ2EnLnJlcGVhdCg1MDAwKTsgLy8gRXhjZWVkcyAyMDAwIGNoYXIgbGltaXRcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShsb25nQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudC5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMjAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgY3VzdG9tIG1heENvZGVMZW5ndGggb3B0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tUGFyc2VyID0gbmV3IENvZGVQYXJzZXIoeyBtYXhDb2RlTGVuZ3RoOiAxMDAgfSk7XG4gICAgICBjb25zdCBsb25nQ29kZSA9ICdhJy5yZXBlYXQoMjAwKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGN1c3RvbVBhcnNlci5wYXJzZShsb25nQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudC5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHRydW5jYXRlIHNob3J0IGNvZGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzaG9ydENvZGUgPSAnZnVuY3Rpb24gdGVzdCgpIHsgcmV0dXJuIHRydWU7IH0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKHNob3J0Q29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9CZShzaG9ydENvZGUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGFuZ3VhZ2UgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHByb3ZpZGVkIGxhbmd1YWdlIGZyb20gbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21QYXJzZXIgPSBuZXcgQ29kZVBhcnNlcih7IFxuICAgICAgICBtZXRhZGF0YTogeyBsYW5ndWFnZTogJ3B5dGhvbicgfSBcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY29kZSA9ICdzb21lIGNvZGUgaGVyZSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBjdXN0b21QYXJzZXIucGFyc2UoY29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWV0YWRhdGE/Lmxhbmd1YWdlKS50b0JlKCdweXRob24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgaWYgcHJvdmlkZWQgbGFuZ3VhZ2UgaXMgaW52YWxpZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVBhcnNlciA9IG5ldyBDb2RlUGFyc2VyKHsgXG4gICAgICAgIG1ldGFkYXRhOiB7IGxhbmd1YWdlOiAnaW52YWxpZC1sYW5ndWFnZScgfSBcbiAgICAgIH0pO1xuICAgICAgY29uc3QganNDb2RlID0gJ2Z1bmN0aW9uIHRlc3QoKSB7fSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBjdXN0b21QYXJzZXIucGFyc2UoanNDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5tZXRhZGF0YT8ubGFuZ3VhZ2UpLnRvQmUoJ2phdmFzY3JpcHQnKTsgLy8gQXV0by1kZXRlY3RlZFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FzZS1pbnNlbnNpdGl2ZSBsYW5ndWFnZSBuYW1lcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVBhcnNlciA9IG5ldyBDb2RlUGFyc2VyKHsgXG4gICAgICAgIG1ldGFkYXRhOiB7IGxhbmd1YWdlOiAnSkFWQVNDUklQVCcgfSBcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY29kZSA9ICdzb21lIGNvZGUnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY3VzdG9tUGFyc2VyLnBhcnNlKGNvZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLm1ldGFkYXRhPy5sYW5ndWFnZSkudG9CZSgnamF2YXNjcmlwdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3BlY2lhbCBDaGFyYWN0ZXJzIGFuZCBFbmNvZGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb2RlIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZVdpdGhTcGVjaWFsID0gJ2NvbnN0IGVtb2ppID0gXCLwn46vXCI7XFxuY29uc3QgdW5pY29kZSA9IFwiU3DDqWNpw6BsIGNow6ByYWN0ZXJzXCI7JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShjb2RlV2l0aFNwZWNpYWwpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQ29udGFpbign8J+OrycpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0NvbnRhaW4oJ1Nww6ljacOgbCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29kZSB3aXRoIGVzY2FwZSBzZXF1ZW5jZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlV2l0aEVzY2FwZXMgPSAnY29uc3Qgc3RyID0gXCJIZWxsb1xcXFxuV29ybGRcXFxcdCFcIjtcXG5jb25zdCByZWdleCA9IC9cXFxcZCsvZzsnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VyLnBhcnNlKGNvZGVXaXRoRXNjYXBlcyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9CZShjb2RlV2l0aEVzY2FwZXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29kZSB3aXRoIHZhcmlvdXMgcXVvdGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZVdpdGhRdW90ZXMgPSBgY29uc3Qgc2luZ2xlID0gJ3NpbmdsZSBxdW90ZXMnO1xcbmNvbnN0IGRvdWJsZSA9IFwiZG91YmxlIHF1b3Rlc1wiO1xcbmNvbnN0IHRlbXBsYXRlID0gXFxgdGVtcGxhdGUgXFwke2xpdGVyYWx9XFxgO2A7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UoY29kZVdpdGhRdW90ZXMpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQmUoY29kZVdpdGhRdW90ZXMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBsYXJnZSBjb2RlIGZpbGVzIGVmZmljaWVudGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VDb2RlID0gQXJyYXkoMTAwMCkuZmlsbCgnZnVuY3Rpb24gdGVzdCgpIHsgcmV0dXJuIHRydWU7IH0nKS5qb2luKCdcXG4nKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShsYXJnZUNvZGUpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigxMDApOyAvLyBTaG91bGQgYmUgZmFzdFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBjb2RlIHBhcnNpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlU25pcHBldHMgPSBbXG4gICAgICAgICdjb25zdCBhID0gMTsnLFxuICAgICAgICAnZGVmIGZ1bmMoKTogcGFzcycsXG4gICAgICAgICdwdWJsaWMgY2xhc3MgVGVzdCB7fScsXG4gICAgICAgICcuY2xhc3MgeyBjb2xvcjogcmVkOyB9JyxcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gdGFibGU7J1xuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGNvZGVTbmlwcGV0cy5tYXAoY29kZSA9PiBwYXJzZXIucGFyc2UoY29kZSkpO1xuICAgICAgXG4gICAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgICBleHBlY3QocmVzdWx0WzBdLnR5cGUpLnRvQmUoJ2NvZGUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIGNvZGUgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZENvZGUgPSAnZnVuY3Rpb24gdW5jbG9zZWQoKSB7IGlmICh0cnVlIHsgcmV0dXJuOyc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UobWFsZm9ybWVkQ29kZSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0udHlwZSkudG9CZSgnY29kZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKG1hbGZvcm1lZENvZGUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbnVsbCBhbmQgdW5kZWZpbmVkIGlucHV0JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHBhcnNlci5wYXJzZShudWxsIGFzIGFueSkpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KHBhcnNlci5wYXJzZSh1bmRlZmluZWQgYXMgYW55KSkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IHNob3J0IGNvZGUgc25pcHBldHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzaG9ydENvZGUgPSAneCc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2Uoc2hvcnRDb2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKHNob3J0Q29kZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiB3aXRoIHBhcnNlQ29udGVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHdvcmsgY29ycmVjdGx5IHdpdGggcGFyc2VDb250ZW50IGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QganNDb2RlID0gJ2Z1bmN0aW9uIGhlbGxvKCkge1xcbiAgY29uc29sZS5sb2coXCJIZWxsbyBXb3JsZFwiKTtcXG59JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChqc0NvZGUsIHsgY29udGVudFR5cGU6ICdjb2RlJyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYmxvY2tzWzBdLnR5cGUpLnRvQmUoJ2NvZGUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXV0by1kZXRlY3QgY29kZSBpbiBwYXJzZUNvbnRlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBweXRob25Db2RlID0gJ2RlZiBoZWxsbygpOlxcbiAgICBwcmludChcIkhlbGxvIFdvcmxkXCIpJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChweXRob25Db2RlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYmxvY2tzWzBdLnR5cGUpLnRvQmUoJ2NvZGUnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==