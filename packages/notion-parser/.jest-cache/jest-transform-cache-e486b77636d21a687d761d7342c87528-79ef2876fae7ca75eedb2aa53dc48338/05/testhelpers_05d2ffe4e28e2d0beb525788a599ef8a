552a52a6cfed46c6fa896b254cc4d5ff
"use strict";
/**
 * Helpers centralis√©s pour les tests
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.customMatchers = exports.TestMocks = exports.ValidationUtils = exports.ContentGenerators = exports.testHelpers = exports.TestHelpersImpl = void 0;
class TestHelpersImpl {
    expectValidResult(result) {
        expect(result).toBeDefined();
        expect(result.success).toBe(true);
        expect(result.blocks).toBeDefined();
        expect(Array.isArray(result.blocks)).toBe(true);
        expect(result.error).toBeUndefined();
    }
    expectBlockTypes(blocks, expectedTypes) {
        const actualTypes = blocks.map(b => b.type);
        expectedTypes.forEach(expectedType => {
            expect(actualTypes).toContain(expectedType);
        });
    }
    expectRichTextContent(block, expectedContent) {
        const richText = this.extractRichText(block);
        const content = richText.map(rt => rt.text?.content || rt.plain_text || '').join('');
        expect(content).toBe(expectedContent);
    }
    measurePerformance(fn) {
        const memoryBefore = process.memoryUsage().heapUsed;
        const startTime = performance.now();
        const result = fn();
        const endTime = performance.now();
        const memoryAfter = process.memoryUsage().heapUsed;
        return {
            result,
            metrics: {
                startTime,
                endTime,
                duration: endTime - startTime,
                memoryBefore,
                memoryAfter,
                memoryDelta: (memoryAfter - memoryBefore) / 1024 / 1024 // MB
            }
        };
    }
    extractRichText(block) {
        // Essayer diff√©rents chemins pour trouver le rich_text
        if (block.paragraph?.rich_text)
            return block.paragraph.rich_text;
        if (block.heading_1?.rich_text)
            return block.heading_1.rich_text;
        if (block.heading_2?.rich_text)
            return block.heading_2.rich_text;
        if (block.heading_3?.rich_text)
            return block.heading_3.rich_text;
        if (block.callout?.rich_text)
            return block.callout.rich_text;
        if (block.quote?.rich_text)
            return block.quote.rich_text;
        if (block.rich_text)
            return block.rich_text;
        return [];
    }
}
exports.TestHelpersImpl = TestHelpersImpl;
// Instance globale des helpers
exports.testHelpers = new TestHelpersImpl();
// G√©n√©rateurs de contenu de test
class ContentGenerators {
    static generateMarkdown(size) {
        const baseContent = `# Test Header
This is a paragraph with **bold** and *italic* text.

## Subsection
- List item 1
- List item 2 with [link](https://example.com)

### Code Example
\`\`\`javascript
function test() {
  return "hello world";
}
\`\`\`

> This is a blockquote

| Column 1 | Column 2 |
|----------|----------|
| Cell 1   | Cell 2   |
`;
        switch (size) {
            case 'small':
                return baseContent;
            case 'medium':
                return Array(10).fill(baseContent).join('\n\n');
            case 'large':
                return Array(100).fill(baseContent).join('\n\n');
            default:
                return baseContent;
        }
    }
    static generateCode(language, size) {
        const templates = {
            javascript: `function example() {
  console.log("Hello World");
  return true;
}`,
            python: `def example():
    print("Hello World")
    return True`,
            java: `public class Example {
    public static void main(String[] args) {
        System.out.println("Hello World");
    }
}`,
            css: `.example {
  color: red;
  font-size: 16px;
}`
        };
        const baseCode = templates[language] || templates.javascript;
        switch (size) {
            case 'small':
                return baseCode;
            case 'medium':
                return Array(50).fill(0).map((_, i) => baseCode.replace(/example/g, `example${i}`)).join('\n\n');
            case 'large':
                return Array(500).fill(0).map((_, i) => baseCode.replace(/example/g, `example${i}`)).join('\n\n');
            default:
                return baseCode;
        }
    }
    static generateTable(format, rows = 10) {
        const headers = ['Name', 'Age', 'City', 'Country'];
        const data = Array(rows).fill(0).map((_, i) => [
            `Person${i}`,
            `${20 + i}`,
            `City${i}`,
            `Country${i}`
        ]);
        switch (format) {
            case 'csv':
                return [headers.join(','), ...data.map(row => row.join(','))].join('\n');
            case 'tsv':
                return [headers.join('\t'), ...data.map(row => row.join('\t'))].join('\n');
            case 'markdown':
                const separator = headers.map(() => '---').join('|');
                return [
                    `|${headers.join('|')}|`,
                    `|${separator}|`,
                    ...data.map(row => `|${row.join('|')}|`)
                ].join('\n');
            default:
                return '';
        }
    }
    static generateComplexContent() {
        return `# Complex Document Test

This document contains various types of content to test comprehensive parsing.

## Rich Text Formatting

Here we have **bold text**, *italic text*, ***bold and italic***, ~~strikethrough~~, \`inline code\`, and [links](https://example.com).

### Nested Formatting

**Bold with \`code\` inside** and *italic with [link](https://example.com) inside*.

## Lists

### Bulleted Lists
- Item 1
- Item 2
  - Nested item 1
  - Nested item 2
    - Deep nested item

### Numbered Lists
1. First item
2. Second item
   1. Nested numbered
   2. Another nested

### Todo Lists
- [ ] Unchecked task
- [x] Completed task
- [ ] Another task

## Code Blocks

\`\`\`javascript
function complexFunction(param1, param2) {
  const result = param1 + param2;
  console.log(\`Result: \${result}\`);
  return result;
}

// Usage
const value = complexFunction(10, 20);
\`\`\`

\`\`\`python
def complex_function(param1, param2):
    result = param1 + param2
    print(f"Result: {result}")
    return result

# Usage
value = complex_function(10, 20)
\`\`\`

## Tables

| Feature | Status | Priority | Notes |
|---------|--------|----------|-------|
| Parsing | ‚úÖ Done | High | Core functionality |
| Testing | üîÑ In Progress | High | Comprehensive coverage |
| Docs | ‚ùå Todo | Medium | User documentation |

## Callouts

> [!note] Important Note
> This is a note callout with **formatting**.

> [!warning] Warning
> This is a warning callout.

> [!tip] Pro Tip
> This is a tip callout with \`code\`.

## Quotes

> This is a simple quote.
> 
> It can span multiple lines.

> > This is a nested quote.

## Mathematical Expressions

The formula $E = mc^2$ is famous.

Block equation:
$$
\\int_{a}^{b} f(x) \\, dx = F(b) - F(a)
$$

## Media Links

Image: ![Test Image](https://example.com/image.jpg)
Video: https://youtube.com/watch?v=dQw4w9WgXcQ
Audio: https://example.com/audio.mp3

## Dividers

---

## Unicode and Special Characters

Emojis: üöÄ üéØ ‚úÖ ‚ùå üî• üí°
Accents: caf√©, na√Øve, r√©sum√©
Math symbols: Œ± Œ≤ Œ≥ Œ¥ ‚àë ‚à´ ‚àû
Arrows: ‚Üí ‚Üê ‚Üë ‚Üì ‚áí ‚áê

## Edge Cases

Empty lines:



Multiple spaces:    test    with    spaces

Special characters: @#$%^&*()_+-={}[]|\\:";'<>?,./ 

Very long line: ${'a'.repeat(1000)}

## End of Document`;
    }
}
exports.ContentGenerators = ContentGenerators;
// Utilitaires de validation
class ValidationUtils {
    static isValidNotionBlock(block) {
        return (block &&
            typeof block === 'object' &&
            typeof block.type === 'string' &&
            block[block.type] !== undefined);
    }
    static hasRichText(block) {
        const richTextPaths = [
            'paragraph.rich_text',
            'heading_1.rich_text',
            'heading_2.rich_text',
            'heading_3.rich_text',
            'callout.rich_text',
            'quote.rich_text'
        ];
        return richTextPaths.some(path => {
            const value = this.getNestedProperty(block, path);
            return Array.isArray(value) && value.length > 0;
        });
    }
    static getNestedProperty(obj, path) {
        return path.split('.').reduce((current, key) => current?.[key], obj);
    }
    static countBlocks(blocks) {
        const counts = {};
        const countRecursive = (blockList) => {
            blockList.forEach(block => {
                counts[block.type] = (counts[block.type] || 0) + 1;
                if (block.children) {
                    countRecursive(block.children);
                }
            });
        };
        countRecursive(blocks);
        return counts;
    }
}
exports.ValidationUtils = ValidationUtils;
// Mocks et stubs
class TestMocks {
    static createMockFile(name, type, size = 1024) {
        const content = 'x'.repeat(size);
        return new File([content], name, { type, lastModified: Date.now() });
    }
    static createMockFetch(response, shouldFail = false) {
        return jest.fn().mockImplementation(() => {
            if (shouldFail) {
                return Promise.reject(new Error('Mock fetch error'));
            }
            return Promise.resolve({
                ok: true,
                json: () => Promise.resolve(response),
                text: () => Promise.resolve(JSON.stringify(response))
            });
        });
    }
}
exports.TestMocks = TestMocks;
// Assertions personnalis√©es
exports.customMatchers = {
    toBeValidNotionBlock(received) {
        const pass = ValidationUtils.isValidNotionBlock(received);
        return {
            message: () => pass
                ? `expected ${JSON.stringify(received)} not to be a valid Notion block`
                : `expected ${JSON.stringify(received)} to be a valid Notion block`,
            pass
        };
    },
    toHaveRichTextContent(received, expected) {
        const richText = new TestHelpersImpl()['extractRichText'](received);
        const content = richText.map((rt) => rt.text?.content || rt.plain_text || '').join('');
        const pass = content === expected;
        return {
            message: () => pass
                ? `expected rich text content not to be "${expected}"`
                : `expected rich text content "${content}" to be "${expected}"`,
            pass
        };
    },
    toHaveBlockTypes(received, expected) {
        const actualTypes = received.map(b => b.type);
        const missingTypes = expected.filter(type => !actualTypes.includes(type));
        const pass = missingTypes.length === 0;
        return {
            message: () => pass
                ? `expected blocks not to have types ${expected.join(', ')}`
                : `expected blocks to have types ${expected.join(', ')}, missing: ${missingTypes.join(', ')}`,
            pass
        };
    },
    toBeWithinPerformanceThreshold(received, threshold) {
        const pass = received <= threshold;
        return {
            message: () => pass
                ? `expected ${received}ms not to be within threshold ${threshold}ms`
                : `expected ${received}ms to be within threshold ${threshold}ms`,
            pass
        };
    }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxyYXlhblxcRGVza3RvcFxcRGV2XFxOb3Rpb25DbGlwcGVyXFxwYWNrYWdlc1xcbm90aW9uLXBhcnNlclxcdGVzdHNcXGhlbHBlcnNcXHRlc3QtaGVscGVycy50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7OztBQTBDSCxNQUFhLGVBQWU7SUFDMUIsaUJBQWlCLENBQUMsTUFBa0I7UUFDbEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDcEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVELGdCQUFnQixDQUFDLE1BQW1CLEVBQUUsYUFBdUI7UUFDM0QsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxhQUFhLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO1lBQ25DLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQscUJBQXFCLENBQUMsS0FBZ0IsRUFBRSxlQUF1QjtRQUM3RCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdDLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUs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QUFDLENBQUMsWUFBWSxRQUFRLDZCQUE2QixTQUFTLElBQUk7WUFDbEUsSUFBSTtTQUNMLENBQUM7SUFDSixDQUFDO0NBQ0YsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXHJheWFuXFxEZXNrdG9wXFxEZXZcXE5vdGlvbkNsaXBwZXJcXHBhY2thZ2VzXFxub3Rpb24tcGFyc2VyXFx0ZXN0c1xcaGVscGVyc1xcdGVzdC1oZWxwZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBIZWxwZXJzIGNlbnRyYWxpc8OpcyBwb3VyIGxlcyB0ZXN0c1xyXG4gKi9cclxuXHJcbi8vIFR5cGVzIGxvY2F1eCBwb3VyIMOpdml0ZXIgbGVzIHByb2Jsw6htZXMgZCdpbXBvcnRcclxudHlwZSBUZXN0QmxvY2sgPSB7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG4gIFtrZXk6IHN0cmluZ106IGFueTtcclxuICBjaGlsZHJlbj86IFRlc3RCbG9ja1tdO1xyXG4gIGhhc19jaGlsZHJlbj86IGJvb2xlYW47XHJcbn07XHJcblxyXG50eXBlIFRlc3RSZXN1bHQgPSB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBibG9ja3M6IFRlc3RCbG9ja1tdO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG4gIHZhbGlkYXRpb24/OiBhbnk7XHJcbiAgbWV0YWRhdGE/OiB7XHJcbiAgICBkZXRlY3RlZFR5cGU6IHN0cmluZztcclxuICAgIGNvbmZpZGVuY2U6IG51bWJlcjtcclxuICAgIG9yaWdpbmFsTGVuZ3RoOiBudW1iZXI7XHJcbiAgICBibG9ja0NvdW50OiBudW1iZXI7XHJcbiAgICBwcm9jZXNzaW5nVGltZTogbnVtYmVyO1xyXG4gICAgY29udGVudFR5cGU/OiBzdHJpbmc7XHJcbiAgICBkZXRlY3Rpb25Db25maWRlbmNlPzogbnVtYmVyO1xyXG4gIH07XHJcbn07XHJcblxyXG50eXBlIFBlcmZvcm1hbmNlTWV0cmljcyA9IHtcclxuICBzdGFydFRpbWU6IG51bWJlcjtcclxuICBlbmRUaW1lOiBudW1iZXI7XHJcbiAgZHVyYXRpb246IG51bWJlcjtcclxuICBtZW1vcnlCZWZvcmU6IG51bWJlcjtcclxuICBtZW1vcnlBZnRlcjogbnVtYmVyO1xyXG4gIG1lbW9yeURlbHRhOiBudW1iZXI7XHJcbn07XHJcblxyXG5pbnRlcmZhY2UgVGVzdEhlbHBlcnMge1xyXG4gIGV4cGVjdFZhbGlkUmVzdWx0KHJlc3VsdDogVGVzdFJlc3VsdCk6IHZvaWQ7XHJcbiAgZXhwZWN0QmxvY2tUeXBlcyhibG9ja3M6IFRlc3RCbG9ja1tdLCBleHBlY3RlZFR5cGVzOiBzdHJpbmdbXSk6IHZvaWQ7XHJcbiAgZXhwZWN0UmljaFRleHRDb250ZW50KGJsb2NrOiBUZXN0QmxvY2ssIGV4cGVjdGVkQ29udGVudDogc3RyaW5nKTogdm9pZDtcclxuICBtZWFzdXJlUGVyZm9ybWFuY2U8VD4oZm46ICgpID0+IFQpOiB7IHJlc3VsdDogVDsgbWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXN0SGVscGVyc0ltcGwgaW1wbGVtZW50cyBUZXN0SGVscGVycyB7XHJcbiAgZXhwZWN0VmFsaWRSZXN1bHQocmVzdWx0OiBUZXN0UmVzdWx0KTogdm9pZCB7XHJcbiAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5ibG9ja3MpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQuYmxvY2tzKSkudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmVVbmRlZmluZWQoKTtcclxuICB9XHJcblxyXG4gIGV4cGVjdEJsb2NrVHlwZXMoYmxvY2tzOiBUZXN0QmxvY2tbXSwgZXhwZWN0ZWRUeXBlczogc3RyaW5nW10pOiB2b2lkIHtcclxuICAgIGNvbnN0IGFjdHVhbFR5cGVzID0gYmxvY2tzLm1hcChiID0+IGIudHlwZSk7XHJcbiAgICBleHBlY3RlZFR5cGVzLmZvckVhY2goZXhwZWN0ZWRUeXBlID0+IHtcclxuICAgICAgZXhwZWN0KGFjdHVhbFR5cGVzKS50b0NvbnRhaW4oZXhwZWN0ZWRUeXBlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZXhwZWN0UmljaFRleHRDb250ZW50KGJsb2NrOiBUZXN0QmxvY2ssIGV4cGVjdGVkQ29udGVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCByaWNoVGV4dCA9IHRoaXMuZXh0cmFjdFJpY2hUZXh0KGJsb2NrKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSByaWNoVGV4dC5tYXAocnQgPT4gcnQudGV4dD8uY29udGVudCB8fCBydC5wbGFpbl90ZXh0IHx8ICcnKS5qb2luKCcnKTtcclxuICAgIGV4cGVjdChjb250ZW50KS50b0JlKGV4cGVjdGVkQ29udGVudCk7XHJcbiAgfVxyXG5cclxuICBtZWFzdXJlUGVyZm9ybWFuY2U8VD4oZm46ICgpID0+IFQpOiB7IHJlc3VsdDogVDsgbWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzIH0ge1xyXG4gICAgY29uc3QgbWVtb3J5QmVmb3JlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIGNvbnN0IG1lbW9yeUFmdGVyID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN1bHQsXHJcbiAgICAgIG1ldHJpY3M6IHtcclxuICAgICAgICBzdGFydFRpbWUsXHJcbiAgICAgICAgZW5kVGltZSxcclxuICAgICAgICBkdXJhdGlvbjogZW5kVGltZSAtIHN0YXJ0VGltZSxcclxuICAgICAgICBtZW1vcnlCZWZvcmUsXHJcbiAgICAgICAgbWVtb3J5QWZ0ZXIsXHJcbiAgICAgICAgbWVtb3J5RGVsdGE6IChtZW1vcnlBZnRlciAtIG1lbW9yeUJlZm9yZSkgLyAxMDI0IC8gMTAyNCAvLyBNQlxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleHRyYWN0UmljaFRleHQoYmxvY2s6IFRlc3RCbG9jayk6IGFueVtdIHtcclxuICAgIC8vIEVzc2F5ZXIgZGlmZsOpcmVudHMgY2hlbWlucyBwb3VyIHRyb3V2ZXIgbGUgcmljaF90ZXh0XHJcbiAgICBpZiAoYmxvY2sucGFyYWdyYXBoPy5yaWNoX3RleHQpIHJldHVybiBibG9jay5wYXJhZ3JhcGgucmljaF90ZXh0O1xyXG4gICAgaWYgKGJsb2NrLmhlYWRpbmdfMT8ucmljaF90ZXh0KSByZXR1cm4gYmxvY2suaGVhZGluZ18xLnJpY2hfdGV4dDtcclxuICAgIGlmIChibG9jay5oZWFkaW5nXzI/LnJpY2hfdGV4dCkgcmV0dXJuIGJsb2NrLmhlYWRpbmdfMi5yaWNoX3RleHQ7XHJcbiAgICBpZiAoYmxvY2suaGVhZGluZ18zPy5yaWNoX3RleHQpIHJldHVybiBibG9jay5oZWFkaW5nXzMucmljaF90ZXh0O1xyXG4gICAgaWYgKGJsb2NrLmNhbGxvdXQ/LnJpY2hfdGV4dCkgcmV0dXJuIGJsb2NrLmNhbGxvdXQucmljaF90ZXh0O1xyXG4gICAgaWYgKGJsb2NrLnF1b3RlPy5yaWNoX3RleHQpIHJldHVybiBibG9jay5xdW90ZS5yaWNoX3RleHQ7XHJcbiAgICBpZiAoYmxvY2sucmljaF90ZXh0KSByZXR1cm4gYmxvY2sucmljaF90ZXh0O1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSW5zdGFuY2UgZ2xvYmFsZSBkZXMgaGVscGVyc1xyXG5leHBvcnQgY29uc3QgdGVzdEhlbHBlcnMgPSBuZXcgVGVzdEhlbHBlcnNJbXBsKCk7XHJcblxyXG4vLyBHw6luw6lyYXRldXJzIGRlIGNvbnRlbnUgZGUgdGVzdFxyXG5leHBvcnQgY2xhc3MgQ29udGVudEdlbmVyYXRvcnMge1xyXG4gIHN0YXRpYyBnZW5lcmF0ZU1hcmtkb3duKHNpemU6ICdzbWFsbCcgfCAnbWVkaXVtJyB8ICdsYXJnZScpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgYmFzZUNvbnRlbnQgPSBgIyBUZXN0IEhlYWRlclxyXG5UaGlzIGlzIGEgcGFyYWdyYXBoIHdpdGggKipib2xkKiogYW5kICppdGFsaWMqIHRleHQuXHJcblxyXG4jIyBTdWJzZWN0aW9uXHJcbi0gTGlzdCBpdGVtIDFcclxuLSBMaXN0IGl0ZW0gMiB3aXRoIFtsaW5rXShodHRwczovL2V4YW1wbGUuY29tKVxyXG5cclxuIyMjIENvZGUgRXhhbXBsZVxyXG5cXGBcXGBcXGBqYXZhc2NyaXB0XHJcbmZ1bmN0aW9uIHRlc3QoKSB7XHJcbiAgcmV0dXJuIFwiaGVsbG8gd29ybGRcIjtcclxufVxyXG5cXGBcXGBcXGBcclxuXHJcbj4gVGhpcyBpcyBhIGJsb2NrcXVvdGVcclxuXHJcbnwgQ29sdW1uIDEgfCBDb2x1bW4gMiB8XHJcbnwtLS0tLS0tLS0tfC0tLS0tLS0tLS18XHJcbnwgQ2VsbCAxICAgfCBDZWxsIDIgICB8XHJcbmA7XHJcblxyXG4gICAgc3dpdGNoIChzaXplKSB7XHJcbiAgICAgIGNhc2UgJ3NtYWxsJzpcclxuICAgICAgICByZXR1cm4gYmFzZUNvbnRlbnQ7XHJcbiAgICAgIGNhc2UgJ21lZGl1bSc6XHJcbiAgICAgICAgcmV0dXJuIEFycmF5KDEwKS5maWxsKGJhc2VDb250ZW50KS5qb2luKCdcXG5cXG4nKTtcclxuICAgICAgY2FzZSAnbGFyZ2UnOlxyXG4gICAgICAgIHJldHVybiBBcnJheSgxMDApLmZpbGwoYmFzZUNvbnRlbnQpLmpvaW4oJ1xcblxcbicpO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBiYXNlQ29udGVudDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZW5lcmF0ZUNvZGUobGFuZ3VhZ2U6IHN0cmluZywgc2l6ZTogJ3NtYWxsJyB8ICdtZWRpdW0nIHwgJ2xhcmdlJyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSB7XHJcbiAgICAgIGphdmFzY3JpcHQ6IGBmdW5jdGlvbiBleGFtcGxlKCkge1xyXG4gIGNvbnNvbGUubG9nKFwiSGVsbG8gV29ybGRcIik7XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1gLFxyXG4gICAgICBweXRob246IGBkZWYgZXhhbXBsZSgpOlxyXG4gICAgcHJpbnQoXCJIZWxsbyBXb3JsZFwiKVxyXG4gICAgcmV0dXJuIFRydWVgLFxyXG4gICAgICBqYXZhOiBgcHVibGljIGNsYXNzIEV4YW1wbGUge1xyXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xyXG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIkhlbGxvIFdvcmxkXCIpO1xyXG4gICAgfVxyXG59YCxcclxuICAgICAgY3NzOiBgLmV4YW1wbGUge1xyXG4gIGNvbG9yOiByZWQ7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG59YFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBiYXNlQ29kZSA9IHRlbXBsYXRlc1tsYW5ndWFnZSBhcyBrZXlvZiB0eXBlb2YgdGVtcGxhdGVzXSB8fCB0ZW1wbGF0ZXMuamF2YXNjcmlwdDtcclxuXHJcbiAgICBzd2l0Y2ggKHNpemUpIHtcclxuICAgICAgY2FzZSAnc21hbGwnOlxyXG4gICAgICAgIHJldHVybiBiYXNlQ29kZTtcclxuICAgICAgY2FzZSAnbWVkaXVtJzpcclxuICAgICAgICByZXR1cm4gQXJyYXkoNTApLmZpbGwoMCkubWFwKChfLCBpKSA9PiBcclxuICAgICAgICAgIGJhc2VDb2RlLnJlcGxhY2UoL2V4YW1wbGUvZywgYGV4YW1wbGUke2l9YClcclxuICAgICAgICApLmpvaW4oJ1xcblxcbicpO1xyXG4gICAgICBjYXNlICdsYXJnZSc6XHJcbiAgICAgICAgcmV0dXJuIEFycmF5KDUwMCkuZmlsbCgwKS5tYXAoKF8sIGkpID0+IFxyXG4gICAgICAgICAgYmFzZUNvZGUucmVwbGFjZSgvZXhhbXBsZS9nLCBgZXhhbXBsZSR7aX1gKVxyXG4gICAgICAgICkuam9pbignXFxuXFxuJyk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGJhc2VDb2RlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdlbmVyYXRlVGFibGUoZm9ybWF0OiAnY3N2JyB8ICd0c3YnIHwgJ21hcmtkb3duJywgcm93czogbnVtYmVyID0gMTApOiBzdHJpbmcge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IFsnTmFtZScsICdBZ2UnLCAnQ2l0eScsICdDb3VudHJ5J107XHJcbiAgICBjb25zdCBkYXRhID0gQXJyYXkocm93cykuZmlsbCgwKS5tYXAoKF8sIGkpID0+IFtcclxuICAgICAgYFBlcnNvbiR7aX1gLFxyXG4gICAgICBgJHsyMCArIGl9YCxcclxuICAgICAgYENpdHkke2l9YCxcclxuICAgICAgYENvdW50cnkke2l9YFxyXG4gICAgXSk7XHJcblxyXG4gICAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgICAgY2FzZSAnY3N2JzpcclxuICAgICAgICByZXR1cm4gW2hlYWRlcnMuam9pbignLCcpLCAuLi5kYXRhLm1hcChyb3cgPT4gcm93LmpvaW4oJywnKSldLmpvaW4oJ1xcbicpO1xyXG4gICAgICBjYXNlICd0c3YnOlxyXG4gICAgICAgIHJldHVybiBbaGVhZGVycy5qb2luKCdcXHQnKSwgLi4uZGF0YS5tYXAocm93ID0+IHJvdy5qb2luKCdcXHQnKSldLmpvaW4oJ1xcbicpO1xyXG4gICAgICBjYXNlICdtYXJrZG93bic6XHJcbiAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gaGVhZGVycy5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJ3wnKTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgYHwke2hlYWRlcnMuam9pbignfCcpfXxgLFxyXG4gICAgICAgICAgYHwke3NlcGFyYXRvcn18YCxcclxuICAgICAgICAgIC4uLmRhdGEubWFwKHJvdyA9PiBgfCR7cm93LmpvaW4oJ3wnKX18YClcclxuICAgICAgICBdLmpvaW4oJ1xcbicpO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZW5lcmF0ZUNvbXBsZXhDb250ZW50KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCMgQ29tcGxleCBEb2N1bWVudCBUZXN0XHJcblxyXG5UaGlzIGRvY3VtZW50IGNvbnRhaW5zIHZhcmlvdXMgdHlwZXMgb2YgY29udGVudCB0byB0ZXN0IGNvbXByZWhlbnNpdmUgcGFyc2luZy5cclxuXHJcbiMjIFJpY2ggVGV4dCBGb3JtYXR0aW5nXHJcblxyXG5IZXJlIHdlIGhhdmUgKipib2xkIHRleHQqKiwgKml0YWxpYyB0ZXh0KiwgKioqYm9sZCBhbmQgaXRhbGljKioqLCB+fnN0cmlrZXRocm91Z2h+fiwgXFxgaW5saW5lIGNvZGVcXGAsIGFuZCBbbGlua3NdKGh0dHBzOi8vZXhhbXBsZS5jb20pLlxyXG5cclxuIyMjIE5lc3RlZCBGb3JtYXR0aW5nXHJcblxyXG4qKkJvbGQgd2l0aCBcXGBjb2RlXFxgIGluc2lkZSoqIGFuZCAqaXRhbGljIHdpdGggW2xpbmtdKGh0dHBzOi8vZXhhbXBsZS5jb20pIGluc2lkZSouXHJcblxyXG4jIyBMaXN0c1xyXG5cclxuIyMjIEJ1bGxldGVkIExpc3RzXHJcbi0gSXRlbSAxXHJcbi0gSXRlbSAyXHJcbiAgLSBOZXN0ZWQgaXRlbSAxXHJcbiAgLSBOZXN0ZWQgaXRlbSAyXHJcbiAgICAtIERlZXAgbmVzdGVkIGl0ZW1cclxuXHJcbiMjIyBOdW1iZXJlZCBMaXN0c1xyXG4xLiBGaXJzdCBpdGVtXHJcbjIuIFNlY29uZCBpdGVtXHJcbiAgIDEuIE5lc3RlZCBudW1iZXJlZFxyXG4gICAyLiBBbm90aGVyIG5lc3RlZFxyXG5cclxuIyMjIFRvZG8gTGlzdHNcclxuLSBbIF0gVW5jaGVja2VkIHRhc2tcclxuLSBbeF0gQ29tcGxldGVkIHRhc2tcclxuLSBbIF0gQW5vdGhlciB0YXNrXHJcblxyXG4jIyBDb2RlIEJsb2Nrc1xyXG5cclxuXFxgXFxgXFxgamF2YXNjcmlwdFxyXG5mdW5jdGlvbiBjb21wbGV4RnVuY3Rpb24ocGFyYW0xLCBwYXJhbTIpIHtcclxuICBjb25zdCByZXN1bHQgPSBwYXJhbTEgKyBwYXJhbTI7XHJcbiAgY29uc29sZS5sb2coXFxgUmVzdWx0OiBcXCR7cmVzdWx0fVxcYCk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLy8gVXNhZ2VcclxuY29uc3QgdmFsdWUgPSBjb21wbGV4RnVuY3Rpb24oMTAsIDIwKTtcclxuXFxgXFxgXFxgXHJcblxyXG5cXGBcXGBcXGBweXRob25cclxuZGVmIGNvbXBsZXhfZnVuY3Rpb24ocGFyYW0xLCBwYXJhbTIpOlxyXG4gICAgcmVzdWx0ID0gcGFyYW0xICsgcGFyYW0yXHJcbiAgICBwcmludChmXCJSZXN1bHQ6IHtyZXN1bHR9XCIpXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4jIFVzYWdlXHJcbnZhbHVlID0gY29tcGxleF9mdW5jdGlvbigxMCwgMjApXHJcblxcYFxcYFxcYFxyXG5cclxuIyMgVGFibGVzXHJcblxyXG58IEZlYXR1cmUgfCBTdGF0dXMgfCBQcmlvcml0eSB8IE5vdGVzIHxcclxufC0tLS0tLS0tLXwtLS0tLS0tLXwtLS0tLS0tLS0tfC0tLS0tLS18XHJcbnwgUGFyc2luZyB8IOKchSBEb25lIHwgSGlnaCB8IENvcmUgZnVuY3Rpb25hbGl0eSB8XHJcbnwgVGVzdGluZyB8IPCflIQgSW4gUHJvZ3Jlc3MgfCBIaWdoIHwgQ29tcHJlaGVuc2l2ZSBjb3ZlcmFnZSB8XHJcbnwgRG9jcyB8IOKdjCBUb2RvIHwgTWVkaXVtIHwgVXNlciBkb2N1bWVudGF0aW9uIHxcclxuXHJcbiMjIENhbGxvdXRzXHJcblxyXG4+IFshbm90ZV0gSW1wb3J0YW50IE5vdGVcclxuPiBUaGlzIGlzIGEgbm90ZSBjYWxsb3V0IHdpdGggKipmb3JtYXR0aW5nKiouXHJcblxyXG4+IFshd2FybmluZ10gV2FybmluZ1xyXG4+IFRoaXMgaXMgYSB3YXJuaW5nIGNhbGxvdXQuXHJcblxyXG4+IFshdGlwXSBQcm8gVGlwXHJcbj4gVGhpcyBpcyBhIHRpcCBjYWxsb3V0IHdpdGggXFxgY29kZVxcYC5cclxuXHJcbiMjIFF1b3Rlc1xyXG5cclxuPiBUaGlzIGlzIGEgc2ltcGxlIHF1b3RlLlxyXG4+IFxyXG4+IEl0IGNhbiBzcGFuIG11bHRpcGxlIGxpbmVzLlxyXG5cclxuPiA+IFRoaXMgaXMgYSBuZXN0ZWQgcXVvdGUuXHJcblxyXG4jIyBNYXRoZW1hdGljYWwgRXhwcmVzc2lvbnNcclxuXHJcblRoZSBmb3JtdWxhICRFID0gbWNeMiQgaXMgZmFtb3VzLlxyXG5cclxuQmxvY2sgZXF1YXRpb246XHJcbiQkXHJcblxcXFxpbnRfe2F9XntifSBmKHgpIFxcXFwsIGR4ID0gRihiKSAtIEYoYSlcclxuJCRcclxuXHJcbiMjIE1lZGlhIExpbmtzXHJcblxyXG5JbWFnZTogIVtUZXN0IEltYWdlXShodHRwczovL2V4YW1wbGUuY29tL2ltYWdlLmpwZylcclxuVmlkZW86IGh0dHBzOi8veW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUVxyXG5BdWRpbzogaHR0cHM6Ly9leGFtcGxlLmNvbS9hdWRpby5tcDNcclxuXHJcbiMjIERpdmlkZXJzXHJcblxyXG4tLS1cclxuXHJcbiMjIFVuaWNvZGUgYW5kIFNwZWNpYWwgQ2hhcmFjdGVyc1xyXG5cclxuRW1vamlzOiDwn5qAIPCfjq8g4pyFIOKdjCDwn5SlIPCfkqFcclxuQWNjZW50czogY2Fmw6ksIG5hw692ZSwgcsOpc3Vtw6lcclxuTWF0aCBzeW1ib2xzOiDOsSDOsiDOsyDOtCDiiJEg4oirIOKInlxyXG5BcnJvd3M6IOKGkiDihpAg4oaRIOKGkyDih5Ig4oeQXHJcblxyXG4jIyBFZGdlIENhc2VzXHJcblxyXG5FbXB0eSBsaW5lczpcclxuXHJcblxyXG5cclxuTXVsdGlwbGUgc3BhY2VzOiAgICB0ZXN0ICAgIHdpdGggICAgc3BhY2VzXHJcblxyXG5TcGVjaWFsIGNoYXJhY3RlcnM6IEAjJCVeJiooKV8rLT17fVtdfFxcXFw6XCI7Jzw+PywuLyBcclxuXHJcblZlcnkgbG9uZyBsaW5lOiAkeydhJy5yZXBlYXQoMTAwMCl9XHJcblxyXG4jIyBFbmQgb2YgRG9jdW1lbnRgO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVXRpbGl0YWlyZXMgZGUgdmFsaWRhdGlvblxyXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvblV0aWxzIHtcclxuICBzdGF0aWMgaXNWYWxpZE5vdGlvbkJsb2NrKGJsb2NrOiBhbnkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGJsb2NrICYmXHJcbiAgICAgIHR5cGVvZiBibG9jayA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgdHlwZW9mIGJsb2NrLnR5cGUgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgIGJsb2NrW2Jsb2NrLnR5cGVdICE9PSB1bmRlZmluZWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFzUmljaFRleHQoYmxvY2s6IFRlc3RCbG9jayk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgcmljaFRleHRQYXRocyA9IFtcclxuICAgICAgJ3BhcmFncmFwaC5yaWNoX3RleHQnLFxyXG4gICAgICAnaGVhZGluZ18xLnJpY2hfdGV4dCcsXHJcbiAgICAgICdoZWFkaW5nXzIucmljaF90ZXh0JyxcclxuICAgICAgJ2hlYWRpbmdfMy5yaWNoX3RleHQnLFxyXG4gICAgICAnY2FsbG91dC5yaWNoX3RleHQnLFxyXG4gICAgICAncXVvdGUucmljaF90ZXh0J1xyXG4gICAgXTtcclxuXHJcbiAgICByZXR1cm4gcmljaFRleHRQYXRocy5zb21lKHBhdGggPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0TmVzdGVkUHJvcGVydHkoYmxvY2ssIHBhdGgpO1xyXG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID4gMDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldE5lc3RlZFByb3BlcnR5KG9iajogYW55LCBwYXRoOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgcmV0dXJuIHBhdGguc3BsaXQoJy4nKS5yZWR1Y2UoKGN1cnJlbnQsIGtleSkgPT4gY3VycmVudD8uW2tleV0sIG9iaik7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY291bnRCbG9ja3MoYmxvY2tzOiBUZXN0QmxvY2tbXSk6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4ge1xyXG4gICAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgICBcclxuICAgIGNvbnN0IGNvdW50UmVjdXJzaXZlID0gKGJsb2NrTGlzdDogVGVzdEJsb2NrW10pID0+IHtcclxuICAgICAgYmxvY2tMaXN0LmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICAgIGNvdW50c1tibG9jay50eXBlXSA9IChjb3VudHNbYmxvY2sudHlwZV0gfHwgMCkgKyAxO1xyXG4gICAgICAgIGlmIChibG9jay5jaGlsZHJlbikge1xyXG4gICAgICAgICAgY291bnRSZWN1cnNpdmUoYmxvY2suY2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvdW50UmVjdXJzaXZlKGJsb2Nrcyk7XHJcbiAgICByZXR1cm4gY291bnRzO1xyXG4gIH1cclxufVxyXG5cclxuLy8gTW9ja3MgZXQgc3R1YnNcclxuZXhwb3J0IGNsYXNzIFRlc3RNb2NrcyB7XHJcbiAgc3RhdGljIGNyZWF0ZU1vY2tGaWxlKG5hbWU6IHN0cmluZywgdHlwZTogc3RyaW5nLCBzaXplOiBudW1iZXIgPSAxMDI0KTogRmlsZSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gJ3gnLnJlcGVhdChzaXplKTtcclxuICAgIHJldHVybiBuZXcgRmlsZShbY29udGVudF0sIG5hbWUsIHsgdHlwZSwgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZU1vY2tGZXRjaChyZXNwb25zZTogYW55LCBzaG91bGRGYWlsOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcclxuICAgICAgaWYgKHNob3VsZEZhaWwpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdNb2NrIGZldGNoIGVycm9yJykpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xyXG4gICAgICAgIG9rOiB0cnVlLFxyXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXNwb25zZSksXHJcbiAgICAgICAgdGV4dDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSlcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEFzc2VydGlvbnMgcGVyc29ubmFsaXPDqWVzXHJcbmV4cG9ydCBjb25zdCBjdXN0b21NYXRjaGVycyA9IHtcclxuICB0b0JlVmFsaWROb3Rpb25CbG9jayhyZWNlaXZlZDogYW55KSB7XHJcbiAgICBjb25zdCBwYXNzID0gVmFsaWRhdGlvblV0aWxzLmlzVmFsaWROb3Rpb25CbG9jayhyZWNlaXZlZCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiAoKSA9PiBwYXNzIFxyXG4gICAgICAgID8gYGV4cGVjdGVkICR7SlNPTi5zdHJpbmdpZnkocmVjZWl2ZWQpfSBub3QgdG8gYmUgYSB2YWxpZCBOb3Rpb24gYmxvY2tgXHJcbiAgICAgICAgOiBgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShyZWNlaXZlZCl9IHRvIGJlIGEgdmFsaWQgTm90aW9uIGJsb2NrYCxcclxuICAgICAgcGFzc1xyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICB0b0hhdmVSaWNoVGV4dENvbnRlbnQocmVjZWl2ZWQ6IGFueSwgZXhwZWN0ZWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgcmljaFRleHQgPSBuZXcgVGVzdEhlbHBlcnNJbXBsKClbJ2V4dHJhY3RSaWNoVGV4dCddKHJlY2VpdmVkKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSByaWNoVGV4dC5tYXAoKHJ0OiBhbnkpID0+IHJ0LnRleHQ/LmNvbnRlbnQgfHwgcnQucGxhaW5fdGV4dCB8fCAnJykuam9pbignJyk7XHJcbiAgICBjb25zdCBwYXNzID0gY29udGVudCA9PT0gZXhwZWN0ZWQ7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6ICgpID0+IHBhc3NcclxuICAgICAgICA/IGBleHBlY3RlZCByaWNoIHRleHQgY29udGVudCBub3QgdG8gYmUgXCIke2V4cGVjdGVkfVwiYFxyXG4gICAgICAgIDogYGV4cGVjdGVkIHJpY2ggdGV4dCBjb250ZW50IFwiJHtjb250ZW50fVwiIHRvIGJlIFwiJHtleHBlY3RlZH1cImAsXHJcbiAgICAgIHBhc3NcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgdG9IYXZlQmxvY2tUeXBlcyhyZWNlaXZlZDogVGVzdEJsb2NrW10sIGV4cGVjdGVkOiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgYWN0dWFsVHlwZXMgPSByZWNlaXZlZC5tYXAoYiA9PiBiLnR5cGUpO1xyXG4gICAgY29uc3QgbWlzc2luZ1R5cGVzID0gZXhwZWN0ZWQuZmlsdGVyKHR5cGUgPT4gIWFjdHVhbFR5cGVzLmluY2x1ZGVzKHR5cGUpKTtcclxuICAgIGNvbnN0IHBhc3MgPSBtaXNzaW5nVHlwZXMubGVuZ3RoID09PSAwO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6ICgpID0+IHBhc3NcclxuICAgICAgICA/IGBleHBlY3RlZCBibG9ja3Mgbm90IHRvIGhhdmUgdHlwZXMgJHtleHBlY3RlZC5qb2luKCcsICcpfWBcclxuICAgICAgICA6IGBleHBlY3RlZCBibG9ja3MgdG8gaGF2ZSB0eXBlcyAke2V4cGVjdGVkLmpvaW4oJywgJyl9LCBtaXNzaW5nOiAke21pc3NpbmdUeXBlcy5qb2luKCcsICcpfWAsXHJcbiAgICAgIHBhc3NcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgdG9CZVdpdGhpblBlcmZvcm1hbmNlVGhyZXNob2xkKHJlY2VpdmVkOiBudW1iZXIsIHRocmVzaG9sZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBwYXNzID0gcmVjZWl2ZWQgPD0gdGhyZXNob2xkO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogKCkgPT4gcGFzc1xyXG4gICAgICAgID8gYGV4cGVjdGVkICR7cmVjZWl2ZWR9bXMgbm90IHRvIGJlIHdpdGhpbiB0aHJlc2hvbGQgJHt0aHJlc2hvbGR9bXNgXHJcbiAgICAgICAgOiBgZXhwZWN0ZWQgJHtyZWNlaXZlZH1tcyB0byBiZSB3aXRoaW4gdGhyZXNob2xkICR7dGhyZXNob2xkfW1zYCxcclxuICAgICAgcGFzc1xyXG4gICAgfTtcclxuICB9XHJcbn07Il0sInZlcnNpb24iOjN9