{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\detectors\\ContentDetector.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\detectors\\ContentDetector.ts"],"sourcesContent":["import type { DetectionOptions } from '../types';\r\nimport { MarkdownDetector } from './MarkdownDetector';\r\n\r\nexport type ContentType = 'markdown' | 'html' | 'code' | 'table' | 'csv' | 'tsv' | 'url' | 'latex' | 'json' | 'audio' | 'text';\r\n\r\nexport interface DetectionResult {\r\n  type: ContentType;\r\n  confidence: number;\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport class ContentDetector {\r\n  private markdownDetector = new MarkdownDetector();\r\n\r\n  detect(content: string, options: DetectionOptions = {}): DetectionResult {\r\n    if (!content?.trim()) {\r\n      return { type: 'text', confidence: 1.0 };\r\n    }\r\n\r\n    const results: DetectionResult[] = [];\r\n\r\n    // URL Detection\r\n    if (options.enableUrlDetection !== false) {\r\n      const urlResult = this.detectUrl(content);\r\n      if (urlResult.confidence > 0.8) {\r\n        results.push(urlResult);\r\n      }\r\n    }\r\n\r\n    // LaTeX Detection\r\n    if (options.enableLatexDetection !== false) {\r\n      const latexResult = this.detectLatex(content);\r\n      if (latexResult.confidence > 0.5) {\r\n        results.push(latexResult);\r\n      }\r\n    }\r\n\r\n    // JSON Detection\r\n    if (options.enableJsonDetection !== false) {\r\n      const jsonResult = this.detectJson(content);\r\n      if (jsonResult.confidence > 0.7) {\r\n        results.push(jsonResult);\r\n      }\r\n    }\r\n\r\n    // Code Detection\r\n    if (options.enableCodeDetection !== false) {\r\n      const codeResult = this.detectCode(content);\r\n      if (codeResult.confidence > 0.4) { // Seuil abaissé pour détecter plus de code\r\n        results.push(codeResult);\r\n      }\r\n    }\r\n\r\n    // Table Detection\r\n    if (options.enableTableDetection !== false) {\r\n      const tableResult = this.detectTable(content);\r\n      if (tableResult.confidence > 0.6) {\r\n        results.push(tableResult);\r\n      }\r\n    }\r\n\r\n    // HTML Detection\r\n    if (options.enableHtmlDetection !== false) {\r\n      const htmlResult = this.detectHtml(content);\r\n      if (htmlResult.confidence > 0.5) {\r\n        results.push(htmlResult);\r\n      }\r\n    }\r\n\r\n    // Markdown Detection\r\n    if (options.enableMarkdownDetection !== false) {\r\n      const markdownResult = this.markdownDetector.detect(content);\r\n      if (markdownResult.confidence > 0.4) {\r\n        results.push(markdownResult);\r\n      }\r\n    }\r\n\r\n    // Return highest confidence result or default to text\r\n    if (results.length === 0) {\r\n      return { type: 'text', confidence: 1.0 };\r\n    }\r\n\r\n    return results.reduce((best, current) => \r\n      current.confidence > best.confidence ? current : best\r\n    );\r\n  }\r\n\r\n  private detectUrl(content: string): DetectionResult {\r\n    const trimmed = content.trim();\r\n    \r\n    // Single URL\r\n    if (this.isValidUrl(trimmed)) {\r\n      return {\r\n        type: 'url',\r\n        confidence: 0.95,\r\n        metadata: { url: trimmed }\r\n      };\r\n    }\r\n\r\n    // Multiple URLs\r\n    const urls = trimmed.split(/\\s+/).filter(line => this.isValidUrl(line));\r\n    if (urls.length > 0 && urls.length === trimmed.split(/\\s+/).length) {\r\n      return {\r\n        type: 'url',\r\n        confidence: 0.85,\r\n        metadata: { urls }\r\n      };\r\n    }\r\n\r\n    return { type: 'url', confidence: 0.0 };\r\n  }\r\n\r\n  private detectCode(content: string): DetectionResult {\r\n    const lines = content.split('\\n');\r\n    let codeIndicators = 0;\r\n    let totalLines = lines.length;\r\n\r\n    // Code block markers\r\n    if (content.includes('```')) {\r\n      codeIndicators += 0.4;\r\n    }\r\n\r\n    // Indentation patterns\r\n    const indentedLines = lines.filter(line => \r\n      line.match(/^[ ]{2,}/) || line.match(/^\\t/)\r\n    ).length;\r\n    \r\n    if (indentedLines / totalLines > 0.3) {\r\n      codeIndicators += 0.3;\r\n    }\r\n\r\n    // Programming language keywords\r\n    const codeKeywords = [\r\n      'function', 'const', 'let', 'var', 'class', 'import', 'export',\r\n      'if', 'else', 'for', 'while', 'return', 'try', 'catch',\r\n      'def', 'class', 'import', 'from', 'return', 'if', 'else',\r\n      'public', 'private', 'static', 'void', 'int', 'string',\r\n      'console.log', 'console.', 'document.', 'window.'\r\n    ];\r\n\r\n    const keywordMatches = codeKeywords.filter(keyword => \r\n      content.includes(keyword)\r\n    ).length;\r\n\r\n    if (keywordMatches >= 1) { // Seuil abaissé de 2 à 1\r\n      codeIndicators += 0.4; // Augmenté de 0.3 à 0.4\r\n    }\r\n\r\n    // Brackets and semicolons\r\n    const brackets = (content.match(/[{}[\\]()]/g) || []).length;\r\n    const semicolons = (content.match(/;/g) || []).length;\r\n    \r\n    if (brackets > totalLines * 0.5 || semicolons > totalLines * 0.3) {\r\n      codeIndicators += 0.2;\r\n    }\r\n\r\n    return {\r\n      type: 'code',\r\n      confidence: Math.min(codeIndicators, 1.0),\r\n      metadata: { \r\n        language: this.detectLanguage(content)\r\n      }\r\n    };\r\n  }\r\n\r\n  private detectTable(content: string): DetectionResult {\r\n    const lines = content.split('\\n').filter(line => line.trim());\r\n    \r\n    // CSV detection\r\n    if (this.detectCsv(content)) {\r\n      return {\r\n        type: 'csv',\r\n        confidence: 0.8,\r\n        metadata: { delimiter: ',' }\r\n      };\r\n    }\r\n\r\n    // TSV detection\r\n    if (this.detectTsv(content)) {\r\n      return {\r\n        type: 'tsv',\r\n        confidence: 0.8,\r\n        metadata: { delimiter: '\\t' }\r\n      };\r\n    }\r\n\r\n    // Markdown table detection\r\n    const pipeLines = lines.filter(line => line.includes('|')).length;\r\n    if (pipeLines >= 2 && pipeLines / lines.length > 0.5) {\r\n      // Check for header separator\r\n      const hasHeaderSeparator = lines.some(line => \r\n        line.match(/^\\|?[\\s]*:?-+:?[\\s]*\\|/)\r\n      );\r\n      \r\n      return {\r\n        type: 'table',\r\n        confidence: hasHeaderSeparator ? 0.9 : 0.6,\r\n        metadata: { format: 'markdown' }\r\n      };\r\n    }\r\n\r\n    return { type: 'table', confidence: 0.0 };\r\n  }\r\n\r\n  private detectHtml(content: string): DetectionResult {\r\n    const htmlTags = content.match(/<[^>]+>/g) || [];\r\n    const totalLength = content.length;\r\n    \r\n    if (htmlTags.length === 0) {\r\n      return { type: 'html', confidence: 0.0 };\r\n    }\r\n\r\n    // Calculate tag density\r\n    const tagDensity = htmlTags.length / (totalLength / 100);\r\n    \r\n    // Check for common HTML structures\r\n    const hasHtmlStructure = content.includes('<html>') || \r\n                            content.includes('<!DOCTYPE') ||\r\n                            content.includes('<head>') ||\r\n                            content.includes('<body>');\r\n\r\n    const hasCommonTags = ['<div>', '<p>', '<span>', '<a>', '<img>']\r\n      .some(tag => content.includes(tag));\r\n\r\n    let confidence = 0;\r\n    \r\n    if (hasHtmlStructure) confidence += 0.4;\r\n    if (hasCommonTags) confidence += 0.3;\r\n    if (tagDensity > 2) confidence += 0.3;\r\n\r\n    return {\r\n      type: 'html',\r\n      confidence: Math.min(confidence, 1.0)\r\n    };\r\n  }\r\n\r\n  private detectCsv(content: string): boolean {\r\n    const lines = content.split('\\n').filter(line => line.trim());\r\n    if (lines.length < 2) return false;\r\n\r\n    const commaLines = lines.filter(line => line.includes(',')).length;\r\n    return commaLines / lines.length > 0.7;\r\n  }\r\n\r\n  private detectTsv(content: string): boolean {\r\n    const lines = content.split('\\n').filter(line => line.trim());\r\n    if (lines.length < 2) return false;\r\n\r\n    const tabLines = lines.filter(line => line.includes('\\t')).length;\r\n    return tabLines / lines.length > 0.7;\r\n  }\r\n\r\n  private detectLanguage(content: string): string {\r\n    // Simple language detection based on patterns\r\n    if (content.includes('function') && content.includes('{')) {\r\n      if (content.includes('const') || content.includes('let')) {\r\n        return 'javascript';\r\n      }\r\n      return 'javascript';\r\n    }\r\n    \r\n    if (content.includes('def ') && content.includes(':')) {\r\n      return 'python';\r\n    }\r\n    \r\n    if (content.includes('public class') || content.includes('import java')) {\r\n      return 'java';\r\n    }\r\n    \r\n    if (content.includes('#include') || content.includes('int main')) {\r\n      return 'c++';\r\n    }\r\n    \r\n    if (content.includes('<?php')) {\r\n      return 'php';\r\n    }\r\n\r\n    return 'plain text';\r\n  }\r\n\r\n  private detectLatex(content: string): DetectionResult {\r\n    let confidence = 0;\r\n    const trimmed = content.trim();\r\n\r\n    // LaTeX delimiters\r\n    const inlineLatex = (trimmed.match(/\\$[^$]+\\$/g) || []).length;\r\n    const blockLatex = (trimmed.match(/\\$\\$[\\s\\S]+?\\$\\$/g) || []).length;\r\n    const environments = (trimmed.match(/\\\\begin\\{[^}]+\\}[\\s\\S]*?\\\\end\\{[^}]+\\}/g) || []).length;\r\n\r\n    if (blockLatex > 0) confidence += 0.4;\r\n    if (inlineLatex > 0) confidence += 0.3;\r\n    if (environments > 0) confidence += 0.4;\r\n\r\n    // LaTeX commands\r\n    const latexCommands = [\r\n      '\\\\frac', '\\\\sum', '\\\\int', '\\\\sqrt', '\\\\alpha', '\\\\beta', '\\\\gamma',\r\n      '\\\\theta', '\\\\lambda', '\\\\mu', '\\\\sigma', '\\\\pi', '\\\\infty',\r\n      '\\\\partial', '\\\\nabla', '\\\\times', '\\\\cdot', '\\\\leq', '\\\\geq',\r\n      '\\\\neq', '\\\\approx', '\\\\equiv', '\\\\rightarrow', '\\\\leftarrow'\r\n    ];\r\n\r\n    const commandMatches = latexCommands.filter(cmd => \r\n      trimmed.includes(cmd)\r\n    ).length;\r\n\r\n    if (commandMatches > 0) confidence += Math.min(commandMatches * 0.1, 0.3);\r\n\r\n    // Math environments\r\n    const mathEnvs = ['equation', 'align', 'matrix', 'cases', 'split'];\r\n    const envMatches = mathEnvs.filter(env => \r\n      trimmed.includes(`\\\\begin{${env}}`) || trimmed.includes(`\\\\end{${env}}`)\r\n    ).length;\r\n\r\n    if (envMatches > 0) confidence += 0.3;\r\n\r\n    return {\r\n      type: 'latex',\r\n      confidence: Math.min(confidence, 1.0),\r\n      metadata: {\r\n        hasInlineLatex: inlineLatex > 0,\r\n        hasBlockLatex: blockLatex > 0,\r\n        hasEnvironments: environments > 0\r\n      }\r\n    };\r\n  }\r\n\r\n  private detectJson(content: string): DetectionResult {\r\n    const trimmed = content.trim();\r\n    \r\n    try {\r\n      // Try to parse as JSON\r\n      const parsed = JSON.parse(trimmed);\r\n      \r\n      // Check if it's a meaningful JSON structure\r\n      if (typeof parsed === 'object' && parsed !== null) {\r\n        const isArray = Array.isArray(parsed);\r\n        const isObject = !isArray && typeof parsed === 'object';\r\n        \r\n        let confidence = 0.8;\r\n        \r\n        // Boost confidence for complex structures\r\n        if (isArray && parsed.length > 0) {\r\n          confidence += 0.1;\r\n        }\r\n        \r\n        if (isObject && Object.keys(parsed).length > 0) {\r\n          confidence += 0.1;\r\n        }\r\n        \r\n        return {\r\n          type: 'json',\r\n          confidence: Math.min(confidence, 1.0),\r\n          metadata: {\r\n            isArray,\r\n            isObject,\r\n            itemCount: isArray ? parsed.length : Object.keys(parsed).length\r\n          }\r\n        };\r\n      }\r\n    } catch {\r\n      // Not valid JSON, check for JSON-like patterns\r\n      let confidence = 0;\r\n      \r\n      // Check for JSON-like structure patterns\r\n      if (trimmed.startsWith('{') && trimmed.endsWith('}')) {\r\n        confidence += 0.3;\r\n      }\r\n      \r\n      if (trimmed.startsWith('[') && trimmed.endsWith(']')) {\r\n        confidence += 0.3;\r\n      }\r\n      \r\n      // Check for JSON-like key-value patterns\r\n      const keyValuePattern = /\"[^\"]+\"\\s*:\\s*[^,}]+/g;\r\n      const keyValueMatches = (trimmed.match(keyValuePattern) || []).length;\r\n      \r\n      if (keyValueMatches > 0) {\r\n        confidence += Math.min(keyValueMatches * 0.1, 0.4);\r\n      }\r\n      \r\n      return {\r\n        type: 'json',\r\n        confidence: Math.min(confidence, 0.6), // Max 0.6 for invalid JSON\r\n        metadata: {\r\n          isValidJson: false,\r\n          hasJsonLikeStructure: confidence > 0\r\n        }\r\n      };\r\n    }\r\n    \r\n    return { type: 'json', confidence: 0.0 };\r\n  }\r\n\r\n  private isValidUrl(text: string): boolean {\r\n    try {\r\n      // Simple URL validation using regex\r\n      const urlPattern = /^https?:\\/\\/[^\\s<>\"{}|\\\\^`[\\]]+$/;\r\n      return urlPattern.test(text) && text.includes('.');\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n}"],"version":3}