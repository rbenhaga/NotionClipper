{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\parsers\\LatexParser.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\parsers\\LatexParser.test.ts"],"sourcesContent":["import { parseContent } from '../../../src/parseContent';\r\n\r\n// Types flexibles pour les tests\r\ntype TestBlock = {\r\n  type: string;\r\n  [key: string]: any;\r\n};\r\n\r\ndescribe('LaTeX Parsing', () => {\r\n  describe('Inline LaTeX Detection', () => {\r\n    it('should detect inline math with single dollar signs', () => {\r\n      const content = 'The formula $E = mc^2$ is famous';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(0);\r\n      \r\n      const blocks = result.blocks as TestBlock[];\r\n      const equationBlock = blocks.find((b: TestBlock) => b.type === 'equation');\r\n      expect(equationBlock).toBeDefined();\r\n    });\r\n\r\n    it('should detect inline math with escaped parentheses', () => {\r\n      const content = 'Formula \\\\(x^2 + y^2 = z^2\\\\) is Pythagorean';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      const blocks = result.blocks as TestBlock[];\r\n      const equationBlock = blocks.find((b: TestBlock) => b.type === 'equation');\r\n      expect(equationBlock).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Block LaTeX Detection', () => {\r\n    it('should detect display math with double dollar signs', () => {\r\n      const content = '$$\\\\int_{a}^{b} f(x) \\\\, dx = F(b) - F(a)$$';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(0);\r\n      expect(result.blocks[0].type).toBe('equation');\r\n    });\r\n\r\n    it('should detect LaTeX environments', () => {\r\n      const content = `\\\\begin{equation}\r\nE = mc^2\r\n\\\\end{equation}`;\r\n      \r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(0);\r\n      expect(result.blocks[0].type).toBe('equation');\r\n    });\r\n\r\n    it('should detect align environments', () => {\r\n      const content = `\\\\begin{align}\r\nx &= a + b \\\\\\\\\r\ny &= c + d\r\n\\\\end{align}`;\r\n      \r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(0);\r\n      expect(result.blocks[0].type).toBe('equation');\r\n    });\r\n  });\r\n\r\n  describe('Complex LaTeX Expressions', () => {\r\n    it('should handle fractions', () => {\r\n      const content = '$\\\\frac{a}{b} + \\\\frac{c}{d} = \\\\frac{ad + bc}{bd}$';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      const blocks = result.blocks as TestBlock[];\r\n      const equationBlock = blocks.find((b: TestBlock) => b.type === 'equation');\r\n      expect(equationBlock).toBeDefined();\r\n    });\r\n\r\n    it('should handle integrals and summations', () => {\r\n      const content = '$\\\\sum_{i=1}^{n} i = \\\\frac{n(n+1)}{2}$';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      const blocks = result.blocks as TestBlock[];\r\n      const equationBlock = blocks.find((b: TestBlock) => b.type === 'equation');\r\n      expect(equationBlock).toBeDefined();\r\n    });\r\n\r\n    it('should handle matrices', () => {\r\n      const content = `$\\\\begin{pmatrix}\r\na & b \\\\\\\\\r\nc & d\r\n\\\\end{pmatrix}$`;\r\n      \r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks[0].type).toBe('equation');\r\n    });\r\n\r\n    it('should handle Greek letters and symbols', () => {\r\n      const content = '$\\\\alpha + \\\\beta = \\\\gamma \\\\cdot \\\\delta$';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      const blocks = result.blocks as TestBlock[];\r\n      const equationBlock = blocks.find((b: TestBlock) => b.type === 'equation');\r\n      expect(equationBlock).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Mixed Content', () => {\r\n    it('should handle text with multiple equations', () => {\r\n      const content = 'First equation $a = b$ and second $c = d$ in text';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks.length).toBeGreaterThan(0);\r\n      \r\n      const blocks = result.blocks as TestBlock[];\r\n      const equations = blocks.filter((b: TestBlock) => b.type === 'equation');\r\n      expect(equations.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should handle LaTeX mixed with markdown', () => {\r\n      const content = '# Math Section\\n\\nThe formula $E = mc^2$ is **important**.\\n\\n$F = ma$';\r\n      const result = parseContent(content, { contentType: 'markdown' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      const blocks = result.blocks as TestBlock[];\r\n      const equations = blocks.filter((b: TestBlock) => b.type === 'equation');\r\n      expect(equations.length).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  describe('LaTeX Validation', () => {\r\n    it('should handle malformed LaTeX gracefully', () => {\r\n      const malformed = '$\\\\frac{a}{b$'; // Missing closing brace\r\n      const result = parseContent(malformed, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      // Should either fix or treat as text\r\n    });\r\n\r\n    it('should handle unmatched delimiters', () => {\r\n      const unmatched = '$a = b + c'; // Missing closing $\r\n      const result = parseContent(unmatched, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n    });\r\n\r\n    it('should handle nested delimiters', () => {\r\n      const nested = '$a = \\\\text{nested}$'; // Simplified nested content\r\n      const result = parseContent(nested, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('Equation Block Structure', () => {\r\n    it('should create proper equation block structure', () => {\r\n      const content = '$x^2 + y^2 = r^2$';\r\n      const result = parseContent(content, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      const blocks = result.blocks as TestBlock[];\r\n      const equationBlock = blocks.find((b: TestBlock) => b.type === 'equation');\r\n      \r\n      expect(equationBlock).toBeValidNotionBlock();\r\n      expect(equationBlock?.type).toBe('equation');\r\n      expect(equationBlock?.equation).toBeDefined();\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should handle empty content', () => {\r\n      const result = parseContent('', { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toEqual([]);\r\n    });\r\n\r\n    it('should handle null content', () => {\r\n      const result = parseContent(null as any, { contentType: 'latex' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toEqual([]);\r\n    });\r\n  });\r\n\r\n  describe('Performance', () => {\r\n    it('should handle complex equations efficiently', () => {\r\n      const complexEquation = `$\\\\sum_{n=1}^{\\\\infty} \\\\frac{1}{n^2} = \\\\frac{\\\\pi^2}{6}$`;\r\n      \r\n      const startTime = performance.now();\r\n      const result = parseContent(complexEquation, { contentType: 'latex' });\r\n      const endTime = performance.now();\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(endTime - startTime).toBeLessThan(100);\r\n    });\r\n  });\r\n});"],"version":3}