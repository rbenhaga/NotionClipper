{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\converters\\NotionConverter.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\src\\converters\\NotionConverter.ts"],"sourcesContent":["import type { ASTNode, NotionBlock, NotionColor, ConversionOptions } from '../types';\r\nimport { RichTextConverter } from './RichTextConverter';\r\n\r\nexport class NotionConverter {\r\n  private richTextConverter = new RichTextConverter();\r\n\r\n  convert(nodes: ASTNode[], options: ConversionOptions = {}): NotionBlock[] {\r\n    const blocks: NotionBlock[] = [];\r\n\r\n    for (const node of nodes) {\r\n      const block = this.convertNode(node, options);\r\n      if (block) {\r\n        blocks.push(block);\r\n      }\r\n    }\r\n\r\n    return blocks;\r\n  }\r\n\r\n  private convertNode(node: ASTNode, options: ConversionOptions): NotionBlock | null {\r\n    switch (node.type) {\r\n      case 'text':\r\n        return this.convertText(node, options);\r\n      case 'heading':\r\n        return this.convertHeading(node, options);\r\n      case 'list_item':\r\n        return this.convertListItem(node, options);\r\n      case 'code':\r\n        return this.convertCode(node, options);\r\n      case 'table':\r\n        return this.convertTable(node, options);\r\n      case 'callout':\r\n        return this.convertCallout(node, options);\r\n      case 'image':\r\n      case 'video':\r\n      case 'audio':\r\n      case 'file':\r\n        return this.convertMedia(node, options);\r\n      case 'equation':\r\n        return this.convertEquation(node, options);\r\n      case 'quote':\r\n        return this.convertQuote(node, options);\r\n      case 'divider':\r\n        return this.convertDivider();\r\n      case 'toggle':\r\n        return this.convertToggle(node, options);\r\n      case 'bookmark':\r\n        return this.convertBookmark(node, options);\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  private convertText(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const richText = options.preserveFormatting \r\n      ? this.richTextConverter.parseRichText(node.content || '', { convertLinks: options.convertLinks })\r\n      : [{ type: 'text' as const, text: { content: node.content || '' } }];\r\n\r\n    return {\r\n      type: 'paragraph',\r\n      paragraph: {\r\n        rich_text: richText,\r\n        color: (node.metadata?.color as NotionColor) || 'default'\r\n      }\r\n    };\r\n  }\r\n\r\n  private convertHeading(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const level = node.metadata?.level || 1;\r\n    const type = `heading_${level}` as const;\r\n    const richText = options.preserveFormatting \r\n      ? this.richTextConverter.parseRichText(node.content || '', { convertLinks: options.convertLinks })\r\n      : [{ type: 'text' as const, text: { content: node.content || '' } }];\r\n\r\n    const block: any = {\r\n      type,\r\n      [type]: {\r\n        rich_text: richText,\r\n        color: (node.metadata?.color as NotionColor) || 'default',\r\n        is_toggleable: node.metadata?.isToggleable || false\r\n      }\r\n    };\r\n\r\n    // Convert children if they exist\r\n    if (node.children && node.children.length > 0) {\r\n      const childBlocks = this.convert(node.children, options);\r\n      block.children = childBlocks;\r\n      block.has_children = true;\r\n    }\r\n\r\n    return block;\r\n  }\r\n\r\n  private convertListItem(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const richText = options.preserveFormatting \r\n      ? this.richTextConverter.parseRichText(node.content || '', { convertLinks: options.convertLinks })\r\n      : [{ type: 'text' as const, text: { content: node.content || '' } }];\r\n\r\n    // Determine list type from metadata or parent\r\n    const listType = node.metadata?.listType || 'bulleted';\r\n    const checked = node.metadata?.checked;\r\n\r\n    if (listType === 'todo') {\r\n      return {\r\n        type: 'to_do',\r\n        to_do: {\r\n          rich_text: richText,\r\n          checked: checked || false,\r\n          color: (node.metadata?.color as NotionColor) || 'default'\r\n        }\r\n      };\r\n    } else if (listType === 'numbered') {\r\n      return {\r\n        type: 'numbered_list_item',\r\n        numbered_list_item: {\r\n          rich_text: richText,\r\n          color: (node.metadata?.color as NotionColor) || 'default'\r\n        }\r\n      };\r\n    } else {\r\n      return {\r\n        type: 'bulleted_list_item',\r\n        bulleted_list_item: {\r\n          rich_text: richText,\r\n          color: (node.metadata?.color as NotionColor) || 'default'\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  private convertCode(node: ASTNode, _options: ConversionOptions): NotionBlock {\r\n    const language = node.metadata?.language || 'plain text';\r\n    const isBlock = node.metadata?.isBlock !== false;\r\n\r\n    if (isBlock) {\r\n      return {\r\n        type: 'code',\r\n        code: {\r\n          rich_text: [{\r\n            type: 'text',\r\n            text: { content: node.content || '' }\r\n          }],\r\n          language,\r\n          caption: []\r\n        }\r\n      };\r\n    } else {\r\n      // Inline code - convert to paragraph with code formatting\r\n      return {\r\n        type: 'paragraph',\r\n        paragraph: {\r\n          rich_text: [{\r\n            type: 'text',\r\n            text: { content: node.content || '' },\r\n            annotations: { code: true }\r\n          }],\r\n          color: 'default'\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  private convertTable(node: ASTNode, _options: ConversionOptions): NotionBlock {\r\n    const headers = node.metadata?.headers || [];\r\n    const rows = node.metadata?.rows || [];\r\n    const tableWidth = headers.length;\r\n\r\n    const tableRows: any[] = [];\r\n\r\n    // Header row\r\n    if (headers.length > 0) {\r\n      tableRows.push({\r\n        type: 'table_row',\r\n        table_row: {\r\n          cells: headers.map((header: string) => [{\r\n            type: 'text',\r\n            text: { content: header }\r\n          }])\r\n        }\r\n      });\r\n    }\r\n\r\n    // Data rows\r\n    for (const row of rows) {\r\n      const normalizedRow = [...row];\r\n      while (normalizedRow.length < tableWidth) normalizedRow.push('');\r\n      if (normalizedRow.length > tableWidth) normalizedRow.length = tableWidth;\r\n\r\n      tableRows.push({\r\n        type: 'table_row',\r\n        table_row: {\r\n          cells: normalizedRow.map(cell => [{\r\n            type: 'text',\r\n            text: { content: cell }\r\n          }])\r\n        }\r\n      });\r\n    }\r\n\r\n    return {\r\n      type: 'table',\r\n      table: {\r\n        table_width: tableWidth,\r\n        has_column_header: node.metadata?.hasColumnHeader !== false,\r\n        has_row_header: node.metadata?.hasRowHeader || false,\r\n        children: tableRows\r\n      }\r\n    };\r\n  }\r\n\r\n  private convertCallout(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const richText = options.preserveFormatting \r\n      ? this.richTextConverter.parseRichText(node.content || '', { convertLinks: options.convertLinks })\r\n      : [{ type: 'text' as const, text: { content: node.content || '' } }];\r\n\r\n    return {\r\n      type: 'callout',\r\n      callout: {\r\n        rich_text: richText,\r\n        icon: {\r\n          type: 'emoji',\r\n          emoji: node.metadata?.icon || 'ðŸ’¡'\r\n        },\r\n        color: (node.metadata?.color as NotionColor) || 'gray_background'\r\n      }\r\n    };\r\n  }\r\n\r\n  private convertMedia(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const url = node.metadata?.url;\r\n    const caption = node.metadata?.caption;\r\n    // const alt = node.metadata?.alt; // Not used in current implementation\r\n\r\n    if (!url) {\r\n      return this.convertText({ type: 'text', content: node.content || '' }, options);\r\n    }\r\n\r\n    // Check conversion options\r\n    if (node.type === 'image' && options.convertImages === false) {\r\n      // Convert to text instead of image block\r\n      const imageText = caption ? `![${caption}](${url})` : `![image](${url})`;\r\n      return this.convertText({ type: 'text', content: imageText }, options);\r\n    }\r\n\r\n    if (node.type === 'video' && options.convertVideos === false) {\r\n      // Convert to text instead of video block\r\n      const videoText = caption ? `[${caption}](${url})` : `[video](${url})`;\r\n      return this.convertText({ type: 'text', content: videoText }, options);\r\n    }\r\n\r\n    const captionRichText = caption ? [{\r\n      type: 'text' as const,\r\n      text: { content: caption }\r\n    }] : [];\r\n\r\n    switch (node.type) {\r\n      case 'image':\r\n        return {\r\n          type: 'image',\r\n          image: {\r\n            type: 'external',\r\n            external: { url },\r\n            caption: captionRichText\r\n          }\r\n        };\r\n\r\n      case 'video':\r\n        return {\r\n          type: 'video',\r\n          video: {\r\n            type: 'external',\r\n            external: { url }\r\n          }\r\n        };\r\n\r\n      case 'audio':\r\n        return {\r\n          type: 'audio',\r\n          audio: {\r\n            type: 'external',\r\n            external: { url },\r\n            caption: captionRichText\r\n          }\r\n        };\r\n\r\n      case 'file':\r\n        if (url.toLowerCase().endsWith('.pdf')) {\r\n          return {\r\n            type: 'pdf',\r\n            pdf: {\r\n              type: 'external',\r\n              external: { url },\r\n              caption: captionRichText\r\n            }\r\n          };\r\n        }\r\n        // Fall through to bookmark for other files\r\n        return {\r\n          type: 'bookmark',\r\n          bookmark: {\r\n            url,\r\n            caption: captionRichText\r\n          }\r\n        };\r\n\r\n      default:\r\n        return {\r\n          type: 'bookmark',\r\n          bookmark: {\r\n            url,\r\n            caption: captionRichText\r\n          }\r\n        };\r\n    }\r\n  }\r\n\r\n  private convertEquation(node: ASTNode, _options: ConversionOptions): NotionBlock {\r\n    const isBlock = node.metadata?.isBlock !== false;\r\n    const expression = node.content || '';\r\n\r\n    if (isBlock) {\r\n      return {\r\n        type: 'equation',\r\n        equation: {\r\n          expression\r\n        }\r\n      };\r\n    } else {\r\n      // Inline equation - convert to paragraph with equation\r\n      return {\r\n        type: 'paragraph',\r\n        paragraph: {\r\n          rich_text: [{\r\n            type: 'equation',\r\n            equation: { expression }\r\n          }],\r\n          color: 'default'\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  private convertQuote(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const richText = options.preserveFormatting \r\n      ? this.richTextConverter.parseRichText(node.content || '', { convertLinks: options.convertLinks })\r\n      : [{ type: 'text' as const, text: { content: node.content || '' } }];\r\n\r\n    return {\r\n      type: 'quote',\r\n      quote: {\r\n        rich_text: richText,\r\n        color: (node.metadata?.color as NotionColor) || 'default'\r\n      }\r\n    };\r\n  }\r\n\r\n  private convertDivider(): NotionBlock {\r\n    return {\r\n      type: 'divider',\r\n      divider: {}\r\n    };\r\n  }\r\n\r\n  private convertToggle(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const richText = options.preserveFormatting \r\n      ? this.richTextConverter.parseRichText(node.content || '', { convertLinks: options.convertLinks })\r\n      : [{ type: 'text' as const, text: { content: node.content || '' } }];\r\n\r\n    const block: NotionBlock = {\r\n      type: 'toggle',\r\n      toggle: {\r\n        rich_text: richText,\r\n        color: (node.metadata?.color as NotionColor) || 'default'\r\n      }\r\n    };\r\n\r\n    // Convert children if they exist\r\n    if (node.children && node.children.length > 0) {\r\n      const childBlocks = this.convert(node.children, options);\r\n      (block as any).children = childBlocks;\r\n    }\r\n\r\n    return block;\r\n  }\r\n\r\n  private convertBookmark(node: ASTNode, options: ConversionOptions): NotionBlock {\r\n    const url = node.metadata?.url;\r\n    const caption = node.metadata?.title || node.metadata?.description;\r\n\r\n    if (!url) {\r\n      return this.convertText({ type: 'text', content: node.content || url || '' }, options);\r\n    }\r\n\r\n    return {\r\n      type: 'bookmark',\r\n      bookmark: {\r\n        url,\r\n        caption: caption ? [{\r\n          type: 'text',\r\n          text: { content: caption }\r\n        }] : []\r\n      }\r\n    };\r\n  }\r\n}"],"version":3}