3eb585a757ac78ff5cdaa6dfabebb9f9
"use strict";
/**
 * Tests unitaires pour Table Headers - Nouvelle fonctionnalité v2.1
 * Couvre la détection automatique des headers de colonnes et lignes
 */
Object.defineProperty(exports, "__esModule", { value: true });
const parseContent_1 = require("../../../src/parseContent");
describe('Table Headers Parser - Nouvelle fonctionnalité v2.1 ⭐', () => {
    describe('Column Header Detection (has_column_header)', () => {
        it('should detect column headers in CSV with text headers', () => {
            const csvWithHeaders = `Name,Age,Department,Salary
John Doe,30,Engineering,75000
Jane Smith,28,Design,68000
Bob Johnson,35,Marketing,72000`;
            const result = (0, parseContent_1.parseContent)(csvWithHeaders, { contentType: 'csv' });
            expect(result.success).toBe(true);
            expect(result.blocks).toHaveLength(1);
            const tableBlock = result.blocks[0];
            expect(tableBlock.type).toBe('table');
            expect(tableBlock.table.has_column_header).toBe(true);
            expect(tableBlock.table.has_row_header).toBe(false);
        });
        it('should detect column headers in TSV format', () => {
            const tsvWithHeaders = `Product\tPrice\tCategory\tStock
Laptop\t999.99\tElectronics\t50
Mouse\t29.99\tElectronics\t200
Desk\t299.99\tFurniture\t15`;
            const result = (0, parseContent_1.parseContent)(tsvWithHeaders, { contentType: 'tsv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
        it('should detect column headers in Markdown tables', () => {
            const markdownTable = `| Name | Age | City |
|------|-----|------|
| John | 30  | NYC  |
| Jane | 25  | LA   |
| Bob  | 35  | SF   |`;
            const result = (0, parseContent_1.parseContent)(markdownTable, { contentType: 'markdown' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks.find((block) => block.type === 'table');
            expect(tableBlock).toBeDefined();
            expect(tableBlock.table.has_column_header).toBe(true);
        });
        it('should NOT detect headers when first row contains only numbers', () => {
            const csvWithoutHeaders = `1,2,3,4
5,6,7,8
9,10,11,12`;
            const result = (0, parseContent_1.parseContent)(csvWithoutHeaders, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(false);
        });
        it('should NOT detect headers when first row is mixed data', () => {
            const csvMixedData = `john@email.com,30,2023-01-15,active
jane@email.com,25,2023-02-20,inactive
bob@email.com,35,2023-03-10,active`;
            const result = (0, parseContent_1.parseContent)(csvMixedData, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(false);
        });
        it('should use heuristics for header detection', () => {
            // Test case: First row has capitalized words, second row has data
            const csvWithGoodHeaders = `First Name,Last Name,Email Address,Phone Number
john,doe,john@example.com,555-1234
jane,smith,jane@example.com,555-5678`;
            const result = (0, parseContent_1.parseContent)(csvWithGoodHeaders, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
    });
    describe('Row Header Detection (has_row_header)', () => {
        it('should detect row headers when first column contains labels', () => {
            const csvWithRowHeaders = `Metric,Q1,Q2,Q3,Q4
Revenue,100000,120000,110000,130000
Expenses,80000,85000,82000,88000
Profit,20000,35000,28000,42000`;
            const result = (0, parseContent_1.parseContent)(csvWithRowHeaders, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
            expect(tableBlock.table.has_row_header).toBe(true);
        });
        it('should detect row headers in financial data', () => {
            const financialData = `Account,Jan,Feb,Mar
Assets,50000,52000,54000
Liabilities,30000,31000,32000
Equity,20000,21000,22000`;
            const result = (0, parseContent_1.parseContent)(financialData, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_row_header).toBe(true);
        });
        it('should NOT detect row headers when first column is data', () => {
            const csvWithoutRowHeaders = `1,Apple,Red,Sweet
2,Banana,Yellow,Sweet
3,Orange,Orange,Citrus`;
            const result = (0, parseContent_1.parseContent)(csvWithoutRowHeaders, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_row_header).toBe(false);
        });
    });
    describe('Complex Header Scenarios', () => {
        it('should handle tables with both column and row headers', () => {
            const complexTable = `Region,North,South,East,West
Sales,1000,1200,800,900
Marketing,200,250,150,180
Support,100,120,80,90`;
            const result = (0, parseContent_1.parseContent)(complexTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
            expect(tableBlock.table.has_row_header).toBe(true);
        });
        it('should handle tables with neither column nor row headers', () => {
            const dataOnlyTable = `1,2,3,4
5,6,7,8
9,10,11,12
13,14,15,16`;
            const result = (0, parseContent_1.parseContent)(dataOnlyTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(false);
            expect(tableBlock.table.has_row_header).toBe(false);
        });
        it('should handle single-row tables', () => {
            const singleRowTable = `Name,Age,City`;
            const result = (0, parseContent_1.parseContent)(singleRowTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(false); // Can't determine with single row
        });
        it('should handle single-column tables', () => {
            const singleColumnTable = `Names
John
Jane
Bob`;
            const result = (0, parseContent_1.parseContent)(singleColumnTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
    });
    describe('Header Detection Options', () => {
        it('should respect detectTableHeaders option', () => {
            const csvWithHeaders = `Name,Age,City
John,30,NYC
Jane,25,LA`;
            const withDetection = (0, parseContent_1.parseContent)(csvWithHeaders, {
                contentType: 'csv',
                conversion: { convertTables: true }
            });
            const withoutDetection = (0, parseContent_1.parseContent)(csvWithHeaders, {
                contentType: 'csv',
                conversion: { convertTables: false }
            });
            expect(withDetection.success).toBe(true);
            expect(withoutDetection.success).toBe(true);
            const withHeaders = withDetection.blocks[0];
            const withoutHeaders = withoutDetection.blocks[0];
            expect(withHeaders.table.has_column_header).toBe(true);
            expect(withoutHeaders.table.has_column_header).toBe(false);
        });
    });
    describe('Table Structure Validation', () => {
        it('should create valid Notion table structure with headers', () => {
            const csvTable = `Product,Price,Available
Laptop,999.99,Yes
Mouse,29.99,Yes
Keyboard,79.99,No`;
            const result = (0, parseContent_1.parseContent)(csvTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            // Validate complete table structure
            expect(tableBlock).toMatchObject({
                type: 'table',
                table: {
                    table_width: 3,
                    has_column_header: true,
                    has_row_header: false,
                    children: expect.any(Array)
                }
            });
            // Validate table rows
            expect(tableBlock.table.children).toHaveLength(4); // Header + 3 data rows
            tableBlock.table.children.forEach((row) => {
                expect(row.type).toBe('table_row');
                expect(row.table_row.cells).toHaveLength(3);
            });
        });
        it('should handle tables exceeding Notion column limit', () => {
            const wideTable = `A,B,C,D,E,F,G,H
1,2,3,4,5,6,7,8
9,10,11,12,13,14,15,16`;
            const result = (0, parseContent_1.parseContent)(wideTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            // Should limit to 5 columns (Notion limit)
            expect(tableBlock.table.table_width).toBeLessThanOrEqual(5);
        });
        it('should preserve cell content with proper rich text', () => {
            const csvWithFormatting = `Name,Description
John Doe,"Software Engineer with **bold** text"
Jane Smith,"Designer with *italic* text"`;
            const result = (0, parseContent_1.parseContent)(csvWithFormatting, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            // Check that cells contain rich text arrays
            tableBlock.table.children.forEach((row) => {
                row.table_row.cells.forEach((cell) => {
                    expect(Array.isArray(cell)).toBe(true);
                    if (cell.length > 0) {
                        expect(cell[0]).toHaveProperty('type', 'text');
                        expect(cell[0]).toHaveProperty('text');
                        expect(cell[0]).toHaveProperty('annotations');
                    }
                });
            });
        });
    });
    describe('Header Detection Heuristics', () => {
        it('should use multiple heuristics for column header detection', () => {
            const testCases = [
                {
                    name: 'Capitalized headers',
                    csv: `First Name,Last Name,Email\njohn,doe,john@example.com`,
                    expectHeader: true
                },
                {
                    name: 'All caps headers',
                    csv: `NAME,AGE,CITY\nJohn,30,NYC`,
                    expectHeader: true
                },
                {
                    name: 'Mixed case descriptive headers',
                    csv: `Customer Name,Order Date,Total Amount\nJohn Doe,2023-01-15,99.99`,
                    expectHeader: true
                },
                {
                    name: 'Numeric data in first row',
                    csv: `1,2,3\n4,5,6`,
                    expectHeader: false
                },
                {
                    name: 'Date data in first row',
                    csv: `2023-01-01,2023-01-02,2023-01-03\n100,200,300`,
                    expectHeader: false
                }
            ];
            testCases.forEach(testCase => {
                const result = (0, parseContent_1.parseContent)(testCase.csv, { contentType: 'csv' });
                expect(result.success).toBe(true);
                const tableBlock = result.blocks[0];
                expect(tableBlock.table.has_column_header).toBe(testCase.expectHeader);
            });
        });
        it('should use statistical analysis for row header detection', () => {
            const testCases = [
                {
                    name: 'Text labels in first column',
                    csv: `Category,Value1,Value2\nRevenue,1000,1200\nExpenses,800,900`,
                    expectRowHeader: true
                },
                {
                    name: 'Numeric IDs in first column',
                    csv: `ID,Name,Age\n1,John,30\n2,Jane,25`,
                    expectRowHeader: false
                },
                {
                    name: 'Mixed descriptive labels',
                    csv: `Metric,Q1,Q2\nTotal Sales,50000,60000\nNew Customers,100,120`,
                    expectRowHeader: true
                }
            ];
            testCases.forEach(testCase => {
                const result = (0, parseContent_1.parseContent)(testCase.csv, { contentType: 'csv' });
                expect(result.success).toBe(true);
                const tableBlock = result.blocks[0];
                expect(tableBlock.table.has_row_header).toBe(testCase.expectRowHeader);
            });
        });
    });
    describe('Performance and Edge Cases', () => {
        it('should handle large tables efficiently', () => {
            const largeTableRows = Array(1000).fill(0).map((_, i) => `Row${i},Value${i},Data${i}`);
            const largeTable = `Header1,Header2,Header3\n${largeTableRows.join('\n')}`;
            const startTime = Date.now();
            const result = (0, parseContent_1.parseContent)(largeTable, { contentType: 'csv' });
            const processingTime = Date.now() - startTime;
            expect(result.success).toBe(true);
            expect(processingTime).toBeLessThan(1000); // Should be reasonably fast
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
        it('should handle tables with empty cells', () => {
            const tableWithEmpties = `Name,Age,City,Country
John,30,,USA
Jane,,London,UK
,25,Paris,France`;
            const result = (0, parseContent_1.parseContent)(tableWithEmpties, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
        it('should handle tables with special characters', () => {
            const specialCharTable = `Nom,Âge,Ville
José,30,São Paulo
François,25,Montréal
Müller,35,München`;
            const result = (0, parseContent_1.parseContent)(specialCharTable, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
        it('should handle quoted CSV fields', () => {
            const quotedCsv = `"Product Name","Price (USD)","In Stock"
"MacBook Pro","1999.99","Yes"
"iPhone 14","999.99","No"
"iPad Air","599.99","Yes"`;
            const result = (0, parseContent_1.parseContent)(quotedCsv, { contentType: 'csv' });
            expect(result.success).toBe(true);
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.has_column_header).toBe(true);
        });
    });
    describe('Integration with Validation', () => {
        it('should validate table header properties', () => {
            const csvTable = `Name,Age\nJohn,30\nJane,25`;
            const result = (0, parseContent_1.parseContent)(csvTable, {
                contentType: 'csv',
                includeValidation: true
            });
            expect(result.success).toBe(true);
            expect(result.validation).toBeDefined();
            expect(result.validation?.isValid).toBe(true);
            const tableBlock = result.blocks[0];
            expect(typeof tableBlock.table.has_column_header).toBe('boolean');
            expect(typeof tableBlock.table.has_row_header).toBe('boolean');
        });
        it('should handle validation errors gracefully', () => {
            const malformedTable = `Name,Age,City,Extra,TooMany,Columns,ForNotion
John,30,NYC,1,2,3,4`;
            const result = (0, parseContent_1.parseContent)(malformedTable, {
                contentType: 'csv',
                includeValidation: true
            });
            expect(result.success).toBe(true);
            // Should handle table width limits
            const tableBlock = result.blocks[0];
            expect(tableBlock.table.table_width).toBeLessThanOrEqual(5);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxyYXlhblxcRGVza3RvcFxcRGV2XFxOb3Rpb25DbGlwcGVyXFxwYWNrYWdlc1xcbm90aW9uLXBhcnNlclxcdGVzdHNcXHVuaXRcXHBhcnNlcnNcXFRhYmxlSGVhZGVyc1BhcnNlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsNERBQXlEO0FBR3pELFFBQVEsQ0FBQyx1REFBdUQsRUFBRSxHQUFHLEVBQUU7SUFDckUsUUFBUSxDQUFDLDZDQUE2QyxFQUFFLEdBQUcsRUFBRTtRQUMzRCxFQUFFLENBQUMsdURBQXVELEVBQUUsR0FBRyxFQUFFO1lBQy9ELE1BQU0sY0FBYyxHQUFHOzs7K0JBR0UsQ0FBQztZQUUxQixNQUFNLE1BQU0sR0FBRyxJQUFBLDJCQUFZLEVBQUMsY0FBYyxFQUFFLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7WUFFcEUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdEMsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQVEsQ0FBQztZQUMzQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ3BELE1BQU0sY0FBYyxHQUFHOzs7NEJBR0QsQ0FBQztZ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bEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN4QyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFOUMsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQVEsQ0FBQztZQUMzQyxNQUFNLENBQUMsT0FBTyxVQUFVLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2xFLE1BQU0sQ0FBQyxPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxNQUFNLGNBQWMsR0FBRztvQkFDVCxDQUFDO1lBRWYsTUFBTSxNQUFNLEdBQUcsSUFBQSwyQkFBWSxFQUFDLGNBQWMsRUFBRTtnQkFDMUMsV0FBVyxFQUFFLEtBQUs7Z0JBQ2xCLGlCQUFpQixFQUFFLElBQUk7YUFDeEIsQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsbUNBQW1DO1lBQ25DLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFRLENBQUM7WUFDM0MsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccmF5YW5cXERlc2t0b3BcXERldlxcTm90aW9uQ2xpcHBlclxccGFja2FnZXNcXG5vdGlvbi1wYXJzZXJcXHRlc3RzXFx1bml0XFxwYXJzZXJzXFxUYWJsZUhlYWRlcnNQYXJzZXIudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGVzdHMgdW5pdGFpcmVzIHBvdXIgVGFibGUgSGVhZGVycyAtIE5vdXZlbGxlIGZvbmN0aW9ubmFsaXTDqSB2Mi4xXHJcbiAqIENvdXZyZSBsYSBkw6l0ZWN0aW9uIGF1dG9tYXRpcXVlIGRlcyBoZWFkZXJzIGRlIGNvbG9ubmVzIGV0IGxpZ25lc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHBhcnNlQ29udGVudCB9IGZyb20gJy4uLy4uLy4uL3NyYy9wYXJzZUNvbnRlbnQnO1xyXG5pbXBvcnQgdHlwZSB7IE5vdGlvbkJsb2NrIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcclxuXHJcbmRlc2NyaWJlKCdUYWJsZSBIZWFkZXJzIFBhcnNlciAtIE5vdXZlbGxlIGZvbmN0aW9ubmFsaXTDqSB2Mi4xIOKtkCcsICgpID0+IHtcclxuICBkZXNjcmliZSgnQ29sdW1uIEhlYWRlciBEZXRlY3Rpb24gKGhhc19jb2x1bW5faGVhZGVyKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGNvbHVtbiBoZWFkZXJzIGluIENTViB3aXRoIHRleHQgaGVhZGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgY3N2V2l0aEhlYWRlcnMgPSBgTmFtZSxBZ2UsRGVwYXJ0bWVudCxTYWxhcnlcclxuSm9obiBEb2UsMzAsRW5naW5lZXJpbmcsNzUwMDBcclxuSmFuZSBTbWl0aCwyOCxEZXNpZ24sNjgwMDBcclxuQm9iIEpvaG5zb24sMzUsTWFya2V0aW5nLDcyMDAwYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChjc3ZXaXRoSGVhZGVycywgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYmxvY2tzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnR5cGUpLnRvQmUoJ3RhYmxlJyk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfcm93X2hlYWRlcikudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBjb2x1bW4gaGVhZGVycyBpbiBUU1YgZm9ybWF0JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0c3ZXaXRoSGVhZGVycyA9IGBQcm9kdWN0XFx0UHJpY2VcXHRDYXRlZ29yeVxcdFN0b2NrXHJcbkxhcHRvcFxcdDk5OS45OVxcdEVsZWN0cm9uaWNzXFx0NTBcclxuTW91c2VcXHQyOS45OVxcdEVsZWN0cm9uaWNzXFx0MjAwXHJcbkRlc2tcXHQyOTkuOTlcXHRGdXJuaXR1cmVcXHQxNWA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQodHN2V2l0aEhlYWRlcnMsIHsgY29udGVudFR5cGU6ICd0c3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgY29sdW1uIGhlYWRlcnMgaW4gTWFya2Rvd24gdGFibGVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYXJrZG93blRhYmxlID0gYHwgTmFtZSB8IEFnZSB8IENpdHkgfFxyXG58LS0tLS0tfC0tLS0tfC0tLS0tLXxcclxufCBKb2huIHwgMzAgIHwgTllDICB8XHJcbnwgSmFuZSB8IDI1ICB8IExBICAgfFxyXG58IEJvYiAgfCAzNSAgfCBTRiAgIHxgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KG1hcmtkb3duVGFibGUsIHsgY29udGVudFR5cGU6ICdtYXJrZG93bicgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzLmZpbmQoKGJsb2NrOiBhbnkpID0+IGJsb2NrLnR5cGUgPT09ICd0YWJsZScpIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2spLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBOT1QgZGV0ZWN0IGhlYWRlcnMgd2hlbiBmaXJzdCByb3cgY29udGFpbnMgb25seSBudW1iZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjc3ZXaXRob3V0SGVhZGVycyA9IGAxLDIsMyw0XHJcbjUsNiw3LDhcclxuOSwxMCwxMSwxMmA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY3N2V2l0aG91dEhlYWRlcnMsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgTk9UIGRldGVjdCBoZWFkZXJzIHdoZW4gZmlyc3Qgcm93IGlzIG1peGVkIGRhdGEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNzdk1peGVkRGF0YSA9IGBqb2huQGVtYWlsLmNvbSwzMCwyMDIzLTAxLTE1LGFjdGl2ZVxyXG5qYW5lQGVtYWlsLmNvbSwyNSwyMDIzLTAyLTIwLGluYWN0aXZlXHJcbmJvYkBlbWFpbC5jb20sMzUsMjAyMy0wMy0xMCxhY3RpdmVgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGNzdk1peGVkRGF0YSwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2sudGFibGUuaGFzX2NvbHVtbl9oZWFkZXIpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB1c2UgaGV1cmlzdGljcyBmb3IgaGVhZGVyIGRldGVjdGlvbicsICgpID0+IHtcclxuICAgICAgLy8gVGVzdCBjYXNlOiBGaXJzdCByb3cgaGFzIGNhcGl0YWxpemVkIHdvcmRzLCBzZWNvbmQgcm93IGhhcyBkYXRhXHJcbiAgICAgIGNvbnN0IGNzdldpdGhHb29kSGVhZGVycyA9IGBGaXJzdCBOYW1lLExhc3QgTmFtZSxFbWFpbCBBZGRyZXNzLFBob25lIE51bWJlclxyXG5qb2huLGRvZSxqb2huQGV4YW1wbGUuY29tLDU1NS0xMjM0XHJcbmphbmUsc21pdGgsamFuZUBleGFtcGxlLmNvbSw1NTUtNTY3OGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY3N2V2l0aEdvb2RIZWFkZXJzLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUm93IEhlYWRlciBEZXRlY3Rpb24gKGhhc19yb3dfaGVhZGVyKScsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHJvdyBoZWFkZXJzIHdoZW4gZmlyc3QgY29sdW1uIGNvbnRhaW5zIGxhYmVscycsICgpID0+IHtcclxuICAgICAgY29uc3QgY3N2V2l0aFJvd0hlYWRlcnMgPSBgTWV0cmljLFExLFEyLFEzLFE0XHJcblJldmVudWUsMTAwMDAwLDEyMDAwMCwxMTAwMDAsMTMwMDAwXHJcbkV4cGVuc2VzLDgwMDAwLDg1MDAwLDgyMDAwLDg4MDAwXHJcblByb2ZpdCwyMDAwMCwzNTAwMCwyODAwMCw0MjAwMGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY3N2V2l0aFJvd0hlYWRlcnMsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfcm93X2hlYWRlcikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHJvdyBoZWFkZXJzIGluIGZpbmFuY2lhbCBkYXRhJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmaW5hbmNpYWxEYXRhID0gYEFjY291bnQsSmFuLEZlYixNYXJcclxuQXNzZXRzLDUwMDAwLDUyMDAwLDU0MDAwXHJcbkxpYWJpbGl0aWVzLDMwMDAwLDMxMDAwLDMyMDAwXHJcbkVxdWl0eSwyMDAwMCwyMTAwMCwyMjAwMGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoZmluYW5jaWFsRGF0YSwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2sudGFibGUuaGFzX3Jvd19oZWFkZXIpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIE5PVCBkZXRlY3Qgcm93IGhlYWRlcnMgd2hlbiBmaXJzdCBjb2x1bW4gaXMgZGF0YScsICgpID0+IHtcclxuICAgICAgY29uc3QgY3N2V2l0aG91dFJvd0hlYWRlcnMgPSBgMSxBcHBsZSxSZWQsU3dlZXRcclxuMixCYW5hbmEsWWVsbG93LFN3ZWV0XHJcbjMsT3JhbmdlLE9yYW5nZSxDaXRydXNgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGNzdldpdGhvdXRSb3dIZWFkZXJzLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfcm93X2hlYWRlcikudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbXBsZXggSGVhZGVyIFNjZW5hcmlvcycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRhYmxlcyB3aXRoIGJvdGggY29sdW1uIGFuZCByb3cgaGVhZGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29tcGxleFRhYmxlID0gYFJlZ2lvbixOb3J0aCxTb3V0aCxFYXN0LFdlc3RcclxuU2FsZXMsMTAwMCwxMjAwLDgwMCw5MDBcclxuTWFya2V0aW5nLDIwMCwyNTAsMTUwLDE4MFxyXG5TdXBwb3J0LDEwMCwxMjAsODAsOTBgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KGNvbXBsZXhUYWJsZSwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2sudGFibGUuaGFzX2NvbHVtbl9oZWFkZXIpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19yb3dfaGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGFibGVzIHdpdGggbmVpdGhlciBjb2x1bW4gbm9yIHJvdyBoZWFkZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhT25seVRhYmxlID0gYDEsMiwzLDRcclxuNSw2LDcsOFxyXG45LDEwLDExLDEyXHJcbjEzLDE0LDE1LDE2YDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChkYXRhT25seVRhYmxlLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19yb3dfaGVhZGVyKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNpbmdsZS1yb3cgdGFibGVzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzaW5nbGVSb3dUYWJsZSA9IGBOYW1lLEFnZSxDaXR5YDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChzaW5nbGVSb3dUYWJsZSwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2sudGFibGUuaGFzX2NvbHVtbl9oZWFkZXIpLnRvQmUoZmFsc2UpOyAvLyBDYW4ndCBkZXRlcm1pbmUgd2l0aCBzaW5nbGUgcm93XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzaW5nbGUtY29sdW1uIHRhYmxlcycsICgpID0+IHtcclxuICAgICAgY29uc3Qgc2luZ2xlQ29sdW1uVGFibGUgPSBgTmFtZXNcclxuSm9oblxyXG5KYW5lXHJcbkJvYmA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoc2luZ2xlQ29sdW1uVGFibGUsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdIZWFkZXIgRGV0ZWN0aW9uIE9wdGlvbnMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgZGV0ZWN0VGFibGVIZWFkZXJzIG9wdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgY3N2V2l0aEhlYWRlcnMgPSBgTmFtZSxBZ2UsQ2l0eVxyXG5Kb2huLDMwLE5ZQ1xyXG5KYW5lLDI1LExBYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHdpdGhEZXRlY3Rpb24gPSBwYXJzZUNvbnRlbnQoY3N2V2l0aEhlYWRlcnMsIHtcclxuICAgICAgICBjb250ZW50VHlwZTogJ2NzdicsXHJcbiAgICAgICAgY29udmVyc2lvbjogeyBjb252ZXJ0VGFibGVzOiB0cnVlIH1cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB3aXRob3V0RGV0ZWN0aW9uID0gcGFyc2VDb250ZW50KGNzdldpdGhIZWFkZXJzLCB7XHJcbiAgICAgICAgY29udGVudFR5cGU6ICdjc3YnLFxyXG4gICAgICAgIGNvbnZlcnNpb246IHsgY29udmVydFRhYmxlczogZmFsc2UgfVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdCh3aXRoRGV0ZWN0aW9uLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh3aXRob3V0RGV0ZWN0aW9uLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB3aXRoSGVhZGVycyA9IHdpdGhEZXRlY3Rpb24uYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgY29uc3Qgd2l0aG91dEhlYWRlcnMgPSB3aXRob3V0RGV0ZWN0aW9uLmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qod2l0aEhlYWRlcnMudGFibGUuaGFzX2NvbHVtbl9oZWFkZXIpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh3aXRob3V0SGVhZGVycy50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1RhYmxlIFN0cnVjdHVyZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgdmFsaWQgTm90aW9uIHRhYmxlIHN0cnVjdHVyZSB3aXRoIGhlYWRlcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNzdlRhYmxlID0gYFByb2R1Y3QsUHJpY2UsQXZhaWxhYmxlXHJcbkxhcHRvcCw5OTkuOTksWWVzXHJcbk1vdXNlLDI5Ljk5LFllc1xyXG5LZXlib2FyZCw3OS45OSxOb2A7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY3N2VGFibGUsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBWYWxpZGF0ZSBjb21wbGV0ZSB0YWJsZSBzdHJ1Y3R1cmVcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2spLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIHR5cGU6ICd0YWJsZScsXHJcbiAgICAgICAgdGFibGU6IHtcclxuICAgICAgICAgIHRhYmxlX3dpZHRoOiAzLFxyXG4gICAgICAgICAgaGFzX2NvbHVtbl9oZWFkZXI6IHRydWUsXHJcbiAgICAgICAgICBoYXNfcm93X2hlYWRlcjogZmFsc2UsXHJcbiAgICAgICAgICBjaGlsZHJlbjogZXhwZWN0LmFueShBcnJheSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gVmFsaWRhdGUgdGFibGUgcm93c1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5jaGlsZHJlbikudG9IYXZlTGVuZ3RoKDQpOyAvLyBIZWFkZXIgKyAzIGRhdGEgcm93c1xyXG4gICAgICB0YWJsZUJsb2NrLnRhYmxlLmNoaWxkcmVuLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KHJvdy50eXBlKS50b0JlKCd0YWJsZV9yb3cnKTtcclxuICAgICAgICBleHBlY3Qocm93LnRhYmxlX3Jvdy5jZWxscykudG9IYXZlTGVuZ3RoKDMpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRhYmxlcyBleGNlZWRpbmcgTm90aW9uIGNvbHVtbiBsaW1pdCcsICgpID0+IHtcclxuICAgICAgY29uc3Qgd2lkZVRhYmxlID0gYEEsQixDLEQsRSxGLEcsSFxyXG4xLDIsMyw0LDUsNiw3LDhcclxuOSwxMCwxMSwxMiwxMywxNCwxNSwxNmA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQod2lkZVRhYmxlLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBcclxuICAgICAgLy8gU2hvdWxkIGxpbWl0IHRvIDUgY29sdW1ucyAoTm90aW9uIGxpbWl0KVxyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS50YWJsZV93aWR0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCg1KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcHJlc2VydmUgY2VsbCBjb250ZW50IHdpdGggcHJvcGVyIHJpY2ggdGV4dCcsICgpID0+IHtcclxuICAgICAgY29uc3QgY3N2V2l0aEZvcm1hdHRpbmcgPSBgTmFtZSxEZXNjcmlwdGlvblxyXG5Kb2huIERvZSxcIlNvZnR3YXJlIEVuZ2luZWVyIHdpdGggKipib2xkKiogdGV4dFwiXHJcbkphbmUgU21pdGgsXCJEZXNpZ25lciB3aXRoICppdGFsaWMqIHRleHRcImA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQoY3N2V2l0aEZvcm1hdHRpbmcsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayB0aGF0IGNlbGxzIGNvbnRhaW4gcmljaCB0ZXh0IGFycmF5c1xyXG4gICAgICB0YWJsZUJsb2NrLnRhYmxlLmNoaWxkcmVuLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgcm93LnRhYmxlX3Jvdy5jZWxscy5mb3JFYWNoKChjZWxsOiBhbnkpID0+IHtcclxuICAgICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGNlbGwpKS50b0JlKHRydWUpO1xyXG4gICAgICAgICAgaWYgKGNlbGwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBleHBlY3QoY2VsbFswXSkudG9IYXZlUHJvcGVydHkoJ3R5cGUnLCAndGV4dCcpO1xyXG4gICAgICAgICAgICBleHBlY3QoY2VsbFswXSkudG9IYXZlUHJvcGVydHkoJ3RleHQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNlbGxbMF0pLnRvSGF2ZVByb3BlcnR5KCdhbm5vdGF0aW9ucycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSGVhZGVyIERldGVjdGlvbiBIZXVyaXN0aWNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB1c2UgbXVsdGlwbGUgaGV1cmlzdGljcyBmb3IgY29sdW1uIGhlYWRlciBkZXRlY3Rpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiAnQ2FwaXRhbGl6ZWQgaGVhZGVycycsXHJcbiAgICAgICAgICBjc3Y6IGBGaXJzdCBOYW1lLExhc3QgTmFtZSxFbWFpbFxcbmpvaG4sZG9lLGpvaG5AZXhhbXBsZS5jb21gLFxyXG4gICAgICAgICAgZXhwZWN0SGVhZGVyOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiAnQWxsIGNhcHMgaGVhZGVycycsXHJcbiAgICAgICAgICBjc3Y6IGBOQU1FLEFHRSxDSVRZXFxuSm9obiwzMCxOWUNgLFxyXG4gICAgICAgICAgZXhwZWN0SGVhZGVyOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiAnTWl4ZWQgY2FzZSBkZXNjcmlwdGl2ZSBoZWFkZXJzJyxcclxuICAgICAgICAgIGNzdjogYEN1c3RvbWVyIE5hbWUsT3JkZXIgRGF0ZSxUb3RhbCBBbW91bnRcXG5Kb2huIERvZSwyMDIzLTAxLTE1LDk5Ljk5YCxcclxuICAgICAgICAgIGV4cGVjdEhlYWRlcjogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogJ051bWVyaWMgZGF0YSBpbiBmaXJzdCByb3cnLFxyXG4gICAgICAgICAgY3N2OiBgMSwyLDNcXG40LDUsNmAsXHJcbiAgICAgICAgICBleHBlY3RIZWFkZXI6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiAnRGF0ZSBkYXRhIGluIGZpcnN0IHJvdycsXHJcbiAgICAgICAgICBjc3Y6IGAyMDIzLTAxLTAxLDIwMjMtMDEtMDIsMjAyMy0wMS0wM1xcbjEwMCwyMDAsMzAwYCxcclxuICAgICAgICAgIGV4cGVjdEhlYWRlcjogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0Q2FzZXMuZm9yRWFjaCh0ZXN0Q2FzZSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHRlc3RDYXNlLmNzdiwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZSh0ZXN0Q2FzZS5leHBlY3RIZWFkZXIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdXNlIHN0YXRpc3RpY2FsIGFuYWx5c2lzIGZvciByb3cgaGVhZGVyIGRldGVjdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdENhc2VzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6ICdUZXh0IGxhYmVscyBpbiBmaXJzdCBjb2x1bW4nLFxyXG4gICAgICAgICAgY3N2OiBgQ2F0ZWdvcnksVmFsdWUxLFZhbHVlMlxcblJldmVudWUsMTAwMCwxMjAwXFxuRXhwZW5zZXMsODAwLDkwMGAsXHJcbiAgICAgICAgICBleHBlY3RSb3dIZWFkZXI6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6ICdOdW1lcmljIElEcyBpbiBmaXJzdCBjb2x1bW4nLFxyXG4gICAgICAgICAgY3N2OiBgSUQsTmFtZSxBZ2VcXG4xLEpvaG4sMzBcXG4yLEphbmUsMjVgLFxyXG4gICAgICAgICAgZXhwZWN0Um93SGVhZGVyOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogJ01peGVkIGRlc2NyaXB0aXZlIGxhYmVscycsXHJcbiAgICAgICAgICBjc3Y6IGBNZXRyaWMsUTEsUTJcXG5Ub3RhbCBTYWxlcyw1MDAwMCw2MDAwMFxcbk5ldyBDdXN0b21lcnMsMTAwLDEyMGAsXHJcbiAgICAgICAgICBleHBlY3RSb3dIZWFkZXI6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICB0ZXN0Q2FzZXMuZm9yRWFjaCh0ZXN0Q2FzZSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHRlc3RDYXNlLmNzdiwgeyBjb250ZW50VHlwZTogJ2NzdicgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfcm93X2hlYWRlcikudG9CZSh0ZXN0Q2FzZS5leHBlY3RSb3dIZWFkZXIpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSB0YWJsZXMgZWZmaWNpZW50bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhcmdlVGFibGVSb3dzID0gQXJyYXkoMTAwMCkuZmlsbCgwKS5tYXAoKF8sIGkpID0+IFxyXG4gICAgICAgIGBSb3cke2l9LFZhbHVlJHtpfSxEYXRhJHtpfWBcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgbGFyZ2VUYWJsZSA9IGBIZWFkZXIxLEhlYWRlcjIsSGVhZGVyM1xcbiR7bGFyZ2VUYWJsZVJvd3Muam9pbignXFxuJyl9YDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChsYXJnZVRhYmxlLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocHJvY2Vzc2luZ1RpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gU2hvdWxkIGJlIHJlYXNvbmFibHkgZmFzdFxyXG4gICAgICBcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRhYmxlcyB3aXRoIGVtcHR5IGNlbGxzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0YWJsZVdpdGhFbXB0aWVzID0gYE5hbWUsQWdlLENpdHksQ291bnRyeVxyXG5Kb2huLDMwLCxVU0FcclxuSmFuZSwsTG9uZG9uLFVLXHJcbiwyNSxQYXJpcyxGcmFuY2VgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KHRhYmxlV2l0aEVtcHRpZXMsIHsgY29udGVudFR5cGU6ICdjc3YnIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBjb25zdCB0YWJsZUJsb2NrID0gcmVzdWx0LmJsb2Nrc1swXSBhcyBhbnk7XHJcbiAgICAgIGV4cGVjdCh0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGFibGVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzcGVjaWFsQ2hhclRhYmxlID0gYE5vbSzDgmdlLFZpbGxlXHJcbkpvc8OpLDMwLFPDo28gUGF1bG9cclxuRnJhbsOnb2lzLDI1LE1vbnRyw6lhbFxyXG5Nw7xsbGVyLDM1LE3DvG5jaGVuYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChzcGVjaWFsQ2hhclRhYmxlLCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHF1b3RlZCBDU1YgZmllbGRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBxdW90ZWRDc3YgPSBgXCJQcm9kdWN0IE5hbWVcIixcIlByaWNlIChVU0QpXCIsXCJJbiBTdG9ja1wiXHJcblwiTWFjQm9vayBQcm9cIixcIjE5OTkuOTlcIixcIlllc1wiXHJcblwiaVBob25lIDE0XCIsXCI5OTkuOTlcIixcIk5vXCJcclxuXCJpUGFkIEFpclwiLFwiNTk5Ljk5XCIsXCJZZXNcImA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUNvbnRlbnQocXVvdGVkQ3N2LCB7IGNvbnRlbnRUeXBlOiAnY3N2JyB9KTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcclxuICAgICAgY29uc3QgdGFibGVCbG9jayA9IHJlc3VsdC5ibG9ja3NbMF0gYXMgYW55O1xyXG4gICAgICBleHBlY3QodGFibGVCbG9jay50YWJsZS5oYXNfY29sdW1uX2hlYWRlcikudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gd2l0aCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB0YWJsZSBoZWFkZXIgcHJvcGVydGllcycsICgpID0+IHtcclxuICAgICAgY29uc3QgY3N2VGFibGUgPSBgTmFtZSxBZ2VcXG5Kb2huLDMwXFxuSmFuZSwyNWA7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlQ29udGVudChjc3ZUYWJsZSwgeyBcclxuICAgICAgICBjb250ZW50VHlwZTogJ2NzdicsXHJcbiAgICAgICAgaW5jbHVkZVZhbGlkYXRpb246IHRydWUgXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkYXRpb24pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWRhdGlvbj8uaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiB0YWJsZUJsb2NrLnRhYmxlLmhhc19jb2x1bW5faGVhZGVyKS50b0JlKCdib29sZWFuJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgdGFibGVCbG9jay50YWJsZS5oYXNfcm93X2hlYWRlcikudG9CZSgnYm9vbGVhbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgbWFsZm9ybWVkVGFibGUgPSBgTmFtZSxBZ2UsQ2l0eSxFeHRyYSxUb29NYW55LENvbHVtbnMsRm9yTm90aW9uXHJcbkpvaG4sMzAsTllDLDEsMiwzLDRgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcGFyc2VDb250ZW50KG1hbGZvcm1lZFRhYmxlLCB7IFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiAnY3N2JyxcclxuICAgICAgICBpbmNsdWRlVmFsaWRhdGlvbjogdHJ1ZSBcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgdGFibGUgd2lkdGggbGltaXRzXHJcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSByZXN1bHQuYmxvY2tzWzBdIGFzIGFueTtcclxuICAgICAgZXhwZWN0KHRhYmxlQmxvY2sudGFibGUudGFibGVfd2lkdGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoNSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sInZlcnNpb24iOjN9