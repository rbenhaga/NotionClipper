{"file":"C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\parsers\\CodeParser.test.ts","mappings":"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","names":[],"sources":["C:\\Users\\rayan\\Desktop\\Dev\\NotionClipper\\packages\\notion-parser\\tests\\unit\\parsers\\CodeParser.test.ts"],"sourcesContent":["/**\r\n * Tests unitaires pour CodeParser - Cahier des Charges v2.1\r\n * Couvre le parsing de code avec d√©tection de langage compl√®te\r\n */\r\n\r\nimport { CodeParser } from '../../../src/parsers/CodeParser';\r\nimport { parseContent } from '../../../src/parseContent';\r\n\r\n// Type helper pour √©viter les erreurs TypeScript\r\ntype CodeResult = ReturnType<CodeParser['parse']>;\r\n\r\ndescribe('CodeParser - Cahier des Charges v2.1', () => {\r\n  let parser: CodeParser;\r\n\r\n  beforeEach(() => {\r\n    parser = new CodeParser();\r\n  });\r\n\r\n  describe('Language Detection - JavaScript/TypeScript', () => {\r\n    it('should detect JavaScript with function declarations', () => {\r\n      const jsCode = 'function hello() {\\n  console.log(\"Hello World\");\\n  return true;\\n}';\r\n      const result = parser.parse(jsCode);\r\n      \r\n      expect(result).toHaveLength(1);\r\n      expect(result[0]?.type).toBe('code');\r\n      expect(result[0]?.metadata?.language).toBe('javascript');\r\n    });\r\n\r\n    it('should detect JavaScript with arrow functions', () => {\r\n      const jsCode = 'const hello = () => {\\n  console.log(\"Hello\");\\n};';\r\n      const result = parser.parse(jsCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('javascript');\r\n    });\r\n\r\n    it('should detect JavaScript with ES6 imports', () => {\r\n      const jsCode = 'import React from \"react\";\\nconst component = () => <div>Hello</div>;';\r\n      const result = parser.parse(jsCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('javascript');\r\n    });\r\n\r\n    it('should detect TypeScript with type annotations', () => {\r\n      const tsCode = 'interface User {\\n  name: string;\\n  age: number;\\n}\\nfunction greet(user: User): string {\\n  return `Hello ${user.name}`;\\n}';\r\n      const result = parser.parse(tsCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('typescript');\r\n    });\r\n\r\n    it('should detect TypeScript with generic types', () => {\r\n      const tsCode = 'function identity<T>(arg: T): T {\\n  return arg;\\n}';\r\n      const result = parser.parse(tsCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('typescript');\r\n    });\r\n  });\r\n\r\n  describe('Language Detection - Python', () => {\r\n    it('should detect Python with function definitions', () => {\r\n      const pythonCode = 'def hello():\\n    print(\"Hello World\")\\n    return True';\r\n      const result = parser.parse(pythonCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('python');\r\n    });\r\n\r\n    it('should detect Python with class definitions', () => {\r\n      const pythonCode = 'class MyClass:\\n    def __init__(self):\\n        self.value = 42';\r\n      const result = parser.parse(pythonCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('python');\r\n    });\r\n\r\n    it('should detect Python with imports', () => {\r\n      const pythonCode = 'import os\\nfrom datetime import datetime\\n\\nprint(\"Hello\")';\r\n      const result = parser.parse(pythonCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('python');\r\n    });\r\n\r\n    it('should detect Python with list comprehensions', () => {\r\n      const pythonCode = 'numbers = [x for x in range(10) if x % 2 == 0]';\r\n      const result = parser.parse(pythonCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('python');\r\n    });\r\n  });\r\n\r\n  describe('Language Detection - Java', () => {\r\n    it('should detect Java with class declarations', () => {\r\n      const javaCode = 'public class HelloWorld {\\n    public static void main(String[] args) {\\n        System.out.println(\"Hello World\");\\n    }\\n}';\r\n      const result = parser.parse(javaCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('java');\r\n    });\r\n\r\n    it('should detect Java with imports', () => {\r\n      const javaCode = 'import java.util.List;\\nimport java.util.ArrayList;\\n\\npublic class Test {}';\r\n      const result = parser.parse(javaCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('java');\r\n    });\r\n  });\r\n\r\n  describe('Language Detection - C/C++', () => {\r\n    it('should detect C with includes and main function', () => {\r\n      const cCode = '#include <stdio.h>\\n\\nint main() {\\n    printf(\"Hello World\");\\n    return 0;\\n}';\r\n      const result = parser.parse(cCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('c');\r\n    });\r\n\r\n    it('should detect C++ with std namespace', () => {\r\n      const cppCode = '#include <iostream>\\n\\nint main() {\\n    std::cout << \"Hello World\" << std::endl;\\n    return 0;\\n}';\r\n      const result = parser.parse(cppCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('c++');\r\n    });\r\n  });\r\n\r\n  describe('Language Detection - Other Languages', () => {\r\n    it('should detect C# with using statements', () => {\r\n      const csharpCode = 'using System;\\n\\nnamespace HelloWorld {\\n    public class Program {\\n        public static void Main() {\\n            Console.WriteLine(\"Hello World\");\\n        }\\n    }\\n}';\r\n      const result = parser.parse(csharpCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('c#');\r\n    });\r\n\r\n    it('should detect PHP with PHP tags', () => {\r\n      const phpCode = '<?php\\n$name = \"World\";\\necho \"Hello \" . $name;\\n?>';\r\n      const result = parser.parse(phpCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('php');\r\n    });\r\n\r\n    it('should detect Ruby with def and end', () => {\r\n      const rubyCode = 'def hello\\n  puts \"Hello World\"\\nend\\n\\nhello';\r\n      const result = parser.parse(rubyCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('ruby');\r\n    });\r\n\r\n    it('should detect Go with package and func', () => {\r\n      const goCode = 'package main\\n\\nimport \"fmt\"\\n\\nfunc main() {\\n    fmt.Println(\"Hello World\")\\n}';\r\n      const result = parser.parse(goCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('go');\r\n    });\r\n\r\n    it('should detect Rust with fn and println!', () => {\r\n      const rustCode = 'fn main() {\\n    println!(\"Hello World\");\\n}';\r\n      const result = parser.parse(rustCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('rust');\r\n    });\r\n\r\n    it('should detect SQL with SELECT statements', () => {\r\n      const sqlCode = 'SELECT name, age FROM users WHERE age > 18 ORDER BY name;';\r\n      const result = parser.parse(sqlCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('sql');\r\n    });\r\n\r\n    it('should detect CSS with selectors and properties', () => {\r\n      const cssCode = '.container {\\n  display: flex;\\n  justify-content: center;\\n  background-color: #f0f0f0;\\n}';\r\n      const result = parser.parse(cssCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('css');\r\n    });\r\n\r\n    it('should detect HTML with tags', () => {\r\n      const htmlCode = '<!DOCTYPE html>\\n<html>\\n<head>\\n    <title>Test</title>\\n</head>\\n<body>\\n    <h1>Hello World</h1>\\n</body>\\n</html>';\r\n      const result = parser.parse(htmlCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('html');\r\n    });\r\n  });\r\n\r\n  describe('Language Detection - Fallback', () => {\r\n    it('should fallback to plain text for unknown languages', () => {\r\n      const unknownCode = 'some unknown syntax here that does not match any pattern';\r\n      const result = parser.parse(unknownCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('plain text');\r\n    });\r\n\r\n    it('should handle mixed language content', () => {\r\n      const mixedCode = '// JavaScript comment\\nfunction test() {}\\n/* CSS comment */\\n.class { color: red; }';\r\n      const result = parser.parse(mixedCode);\r\n      \r\n      // Should detect the most prominent language (JavaScript in this case)\r\n      expect(['javascript', 'css', 'plain text']).toContain(result[0]?.metadata?.language);\r\n    });\r\n  });\r\n\r\n  describe('Code Block Structure', () => {\r\n    it('should create valid Notion code block structure', () => {\r\n      const code = 'const test = \"hello\";';\r\n      const result = parser.parse(code);\r\n      \r\n      expect(result).toHaveLength(1);\r\n      expect(result[0]).toMatchObject({\r\n        type: 'code',\r\n        content: code,\r\n        metadata: {\r\n          language: expect.any(String),\r\n          isBlock: true\r\n        }\r\n      });\r\n    });\r\n\r\n    it('should preserve code formatting and whitespace', () => {\r\n      const code = 'function test() {\\n    if (true) {\\n        return \"indented\";\\n    }\\n}';\r\n      const result = parser.parse(code);\r\n      \r\n      expect(result[0]?.content).toBe(code);\r\n    });\r\n\r\n    it('should handle empty code blocks', () => {\r\n      const code = '';\r\n      const result = parser.parse(code);\r\n      \r\n      expect(result).toEqual([]);\r\n    });\r\n\r\n    it('should handle whitespace-only code', () => {\r\n      const code = '   \\n\\t\\n   ';\r\n      const result = parser.parse(code);\r\n      \r\n      expect(result).toEqual([]);\r\n    });\r\n  });\r\n\r\n  describe('Content Truncation', () => {\r\n    it('should truncate extremely long code blocks', () => {\r\n      const longCode = 'a'.repeat(5000); // Exceeds 2000 char limit\r\n      const result = parser.parse(longCode);\r\n      \r\n      expect(result).toHaveLength(1);\r\n      expect(result[0]?.content?.length).toBeLessThanOrEqual(2000);\r\n    });\r\n\r\n    it('should respect custom maxCodeLength option', () => {\r\n      const customParser = new CodeParser({ maxCodeLength: 100 });\r\n      const longCode = 'a'.repeat(200);\r\n      const result = customParser.parse(longCode);\r\n      \r\n      expect(result[0]?.content?.length).toBeLessThanOrEqual(100);\r\n    });\r\n\r\n    it('should not truncate short code', () => {\r\n      const shortCode = 'function test() { return true; }';\r\n      const result = parser.parse(shortCode);\r\n      \r\n      expect(result[0]?.content).toBe(shortCode);\r\n    });\r\n  });\r\n\r\n  describe('Language Validation', () => {\r\n    it('should validate provided language from metadata', () => {\r\n      const customParser = new CodeParser({ \r\n        metadata: { language: 'python' } \r\n      });\r\n      const code = 'some code here';\r\n      const result = customParser.parse(code);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('python');\r\n    });\r\n\r\n    it('should fallback if provided language is invalid', () => {\r\n      const customParser = new CodeParser({ \r\n        metadata: { language: 'invalid-language' } \r\n      });\r\n      const jsCode = 'function test() {}';\r\n      const result = customParser.parse(jsCode);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('javascript'); // Auto-detected\r\n    });\r\n\r\n    it('should handle case-insensitive language names', () => {\r\n      const customParser = new CodeParser({ \r\n        metadata: { language: 'JAVASCRIPT' } \r\n      });\r\n      const code = 'some code';\r\n      const result = customParser.parse(code);\r\n      \r\n      expect(result[0]?.metadata?.language).toBe('javascript');\r\n    });\r\n  });\r\n\r\n  describe('Special Characters and Encoding', () => {\r\n    it('should handle code with special characters', () => {\r\n      const codeWithSpecial = 'const emoji = \"üéØ\";\\nconst unicode = \"Sp√©ci√†l ch√†racters\";';\r\n      const result = parser.parse(codeWithSpecial);\r\n      \r\n      expect(result[0]?.content).toContain('üéØ');\r\n      expect(result[0]?.content).toContain('Sp√©ci√†l');\r\n    });\r\n\r\n    it('should handle code with escape sequences', () => {\r\n      const codeWithEscapes = 'const str = \"Hello\\\\nWorld\\\\t!\";\\nconst regex = /\\\\d+/g;';\r\n      const result = parser.parse(codeWithEscapes);\r\n      \r\n      expect(result[0]?.content).toBe(codeWithEscapes);\r\n    });\r\n\r\n    it('should handle code with various quotes', () => {\r\n      const codeWithQuotes = `const single = 'single quotes';\\nconst double = \"double quotes\";\\nconst template = \\`template \\${literal}\\`;`;\r\n      const result = parser.parse(codeWithQuotes);\r\n      \r\n      expect(result[0]?.content).toBe(codeWithQuotes);\r\n    });\r\n  });\r\n\r\n  describe('Performance', () => {\r\n    it('should parse large code files efficiently', () => {\r\n      const largeCode = Array(1000).fill('function test() { return true; }').join('\\n');\r\n      \r\n      const startTime = Date.now();\r\n      const result = parser.parse(largeCode);\r\n      const duration = Date.now() - startTime;\r\n      \r\n      expect(result).toHaveLength(1);\r\n      expect(duration).toBeLessThan(100); // Should be fast\r\n    });\r\n\r\n    it('should handle concurrent code parsing', () => {\r\n      const codeSnippets = [\r\n        'const a = 1;',\r\n        'def func(): pass',\r\n        'public class Test {}',\r\n        '.class { color: red; }',\r\n        'SELECT * FROM table;'\r\n      ];\r\n      \r\n      const results = codeSnippets.map(code => parser.parse(code));\r\n      \r\n      results.forEach(result => {\r\n        expect(result).toHaveLength(1);\r\n        expect(result[0]?.type).toBe('code');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should handle malformed code gracefully', () => {\r\n      const malformedCode = 'function unclosed() { if (true { return;';\r\n      const result = parser.parse(malformedCode);\r\n      \r\n      expect(result).toHaveLength(1);\r\n      expect(result[0]?.type).toBe('code');\r\n      expect(result[0]?.content).toBe(malformedCode);\r\n    });\r\n\r\n    it('should handle null and undefined input', () => {\r\n      expect(parser.parse(null as any)).toEqual([]);\r\n      expect(parser.parse(undefined as any)).toEqual([]);\r\n    });\r\n\r\n    it('should handle very short code snippets', () => {\r\n      const shortCode = 'x';\r\n      const result = parser.parse(shortCode);\r\n      \r\n      expect(result).toHaveLength(1);\r\n      expect(result[0]?.content).toBe(shortCode);\r\n    });\r\n  });\r\n\r\n  describe('Integration with parseContent', () => {\r\n    it('should work correctly with parseContent function', () => {\r\n      const jsCode = 'function hello() {\\n  console.log(\"Hello World\");\\n}';\r\n      const result = parseContent(jsCode, { contentType: 'code' });\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toHaveLength(1);\r\n      expect(result.blocks[0].type).toBe('code');\r\n    });\r\n\r\n    it('should auto-detect code in parseContent', () => {\r\n      const pythonCode = 'def hello():\\n    print(\"Hello World\")';\r\n      const result = parseContent(pythonCode);\r\n      \r\n      expect(result.success).toBe(true);\r\n      expect(result.blocks).toHaveLength(1);\r\n      expect(result.blocks[0].type).toBe('code');\r\n    });\r\n  });\r\n});\r\n"],"version":3}